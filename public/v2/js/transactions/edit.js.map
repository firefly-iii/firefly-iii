{"version":3,"sources":["webpack:///./src/bootstrap.js","webpack:///./src/components/store/modules/transactions/create.js","webpack:///./src/components/store/modules/transactions/edit.js","webpack:///./src/components/store/modules/dashboard/index.js","webpack:///./src/components/store/modules/root.js","webpack:///./src/components/store/modules/accounts/index.js","webpack:///./src/components/store/index.js","webpack:///./src/i18n.js","webpack:///./src/components/transactions/Edit.vue","webpack:///./src/components/transactions/Edit.vue?0833","webpack:///./src/pages/transactions/edit.js","webpack:///./src/shared/transactions.js","webpack:///./src/components/transactions/TransactionTags.vue?b406","webpack:///./src/components/partials/Alert.vue","webpack:///./src/components/partials/Alert.vue?532e","webpack:///./src/components/transactions/SplitForm.vue","webpack:///./src/components/transactions/TransactionDescription.vue","webpack:///./src/components/transactions/TransactionDescription.vue?b847","webpack:///./src/components/transactions/TransactionDate.vue","webpack:///./src/components/transactions/TransactionDate.vue?a5ed","webpack:///./src/components/transactions/TransactionBudget.vue","webpack:///./src/components/transactions/TransactionBudget.vue?57d1","webpack:///./src/components/transactions/TransactionAccount.vue","webpack:///./src/components/transactions/TransactionAccount.vue?83d2","webpack:///./src/components/transactions/SwitchAccount.vue","webpack:///./src/components/transactions/SwitchAccount.vue?f57f","webpack:///./src/components/transactions/TransactionAmount.vue","webpack:///./src/components/transactions/TransactionAmount.vue?0b8a","webpack:///./src/components/transactions/TransactionForeignAmount.vue","webpack:///./src/components/transactions/TransactionForeignAmount.vue?bbb7","webpack:///./src/components/transactions/TransactionForeignCurrency.vue","webpack:///./src/components/transactions/TransactionForeignCurrency.vue?a811","webpack:///./src/components/transactions/TransactionCustomDates.vue","webpack:///./src/components/transactions/TransactionCustomDates.vue?fe9f","webpack:///./src/components/transactions/TransactionCategory.vue","webpack:///./src/components/transactions/TransactionCategory.vue?7069","webpack:///./src/components/transactions/TransactionBill.vue","webpack:///./src/components/transactions/TransactionBill.vue?b7a0","webpack:///./src/components/transactions/TransactionTags.vue","webpack:///./src/components/transactions/TransactionTags.vue?d435","webpack:///./src/components/transactions/TransactionTags.vue?9027","webpack:///./src/components/transactions/TransactionPiggyBank.vue","webpack:///./src/components/transactions/TransactionPiggyBank.vue?1e43","webpack:///./src/components/transactions/TransactionInternalReference.vue","webpack:///./src/components/transactions/TransactionInternalReference.vue?6a48","webpack:///./src/components/transactions/TransactionExternalUrl.vue","webpack:///./src/components/transactions/TransactionExternalUrl.vue?c7b6","webpack:///./src/components/transactions/TransactionNotes.vue","webpack:///./src/components/transactions/TransactionNotes.vue?498b","webpack:///./src/components/transactions/TransactionLinks.vue","webpack:///./src/components/transactions/TransactionLinks.vue?0efa","webpack:///./src/components/transactions/TransactionAttachments.vue","webpack:///./src/components/transactions/TransactionAttachments.vue?26e9","webpack:///./src/components/transactions/TransactionLocation.vue","webpack:///./src/components/transactions/TransactionLocation.vue?02ee","webpack:///./src/components/transactions/SplitForm.vue?28e1","webpack:///./src/components/transactions/SplitPills.vue","webpack:///./src/components/transactions/SplitPills.vue?9f08","webpack:///./src/components/transactions/TransactionGroupTitle.vue","webpack:///./src/components/transactions/TransactionGroupTitle.vue?7736"],"names":["window","$","jQuery","require","axios","defaults","headers","common","token","document","head","querySelector","content","console","error","localeToken","localStorage","locale","vuei18n","VueI18n","uiv","Vue","lodashClonedeep","namespaced","state","transactionType","groupTitle","transactions","customDateFields","interest_date","book_date","process_date","due_date","payment_date","invoice_date","defaultTransaction","getDefaultTransaction","defaultErrors","getDefaultErrors","getters","accountToTransaction","sourceAllowedTypes","destinationAllowedTypes","allowedOpposingTypes","actions","mutations","addTransaction","newTransaction","errors","push","resetErrors","payload","index","resetTransactions","setGroupTitle","setCustomDateFields","deleteTransaction","splice","length","setTransactionType","setAllowedOpposingTypes","setAccountToTransaction","updateField","field","value","setTransactionError","setDestinationAllowedTypes","setSourceAllowedTypes","viewRange","start","end","defaultStart","defaultEnd","initialiseStore","context","dispatch","get","then","response","data","attributes","oldViewRange","commit","restoreViewRangeDates","viewRangeStart","Date","viewRangeEnd","viewRangeDefaultStart","viewRangeDefaultEnd","restoreViewRange","getItem","setDatesFromViewRange","today","startOfDay","endOfDay","startOfWeek","weekStartsOn","endOfWeek","startOfMonth","endOfMonth","startOfQuarter","endOfQuarter","getMonth","setMonth","setDate","setStart","setItem","setEnd","setDefaultStart","setDefaultEnd","setViewRange","range","listPageSize","timezone","cacheKey","age","object","JSON","parse","now","parseInt","refreshCacheKey","Array","N","join","Math","random","toString","slice","stringify","setCacheKey","setListPageSize","number","setTimezone","orderMode","activeFilter","setOrderMode","setActiveFilter","Vuex","modules","root","root_store","create","transactions_create","edit","transactions_edit","accounts","accounts_index","dashboard","dashboard_index","strict","process","plugins","currencyPreference","setCurrencyPreference","currencyCode","code","currencyId","id","updateCurrencyPreference","currencyResponse","name","symbol","decimal_places","err","module","exports","documentElement","lang","fallbackLocale","messages","class","for","created","parts","location","pathname","split","this","groupId","getTransactionGroup","getAllowedOpposingTypes","getCustomFields","successMessage","type","String","default","errorMessage","warningMessage","originalTransactions","originalGroupTitle","Number","groupTitleErrors","customFields","Object","returnedGroupId","returnedGroupTitle","date","originalDate","submittedTransaction","Boolean","submittedAttachments","inError","submittedAttCount","enableSubmit","stayHere","forceTransactionSubmission","components","Alert","SplitPills","SplitForm","TransactionGroupTitle","watch","finaliseSubmission","methods","parseTransactionGroup","reverse","i","group_title","description","hasOwnProperty","test","result","parseTransaction","parseLinks","transaction_journal_id","array","charAt","toUpperCase","source_type","destination_type","substring","source_account_id","source_id","source_account_name","source_name","source_account_type","destination_account_id","destination_id","destination_account_name","destination_name","destination_account_type","amount","currency_id","foreign_amount","foreign_currency_id","category","category_name","budget_id","bill_id","tags","substr","internal_reference","external_url","external_uri","external_id","notes","zoom_level","longitude","latitude","journalId","links","parseLink","link","promises","opposingId","inward_id","linkDirection","outward_id","Promise","resolve","direction","link_type_id","all","responses","journals","journal","linkTypeId","transaction_group_id","currency_code","uploadedAttachment","key","keys","storeLocation","zoomLevel","lng","lat","storeAccountValue","storeDate","storeField","removeTransaction","tab","storeGroupTitle","selectedAttachments","event","preventDefault","submitTransaction","submission","shouldSubmit","shouldLinks","shouldUpload","newTransactionCount","currentTransaction","originalTransaction","diff","basicFields","ii","toLowerCase","fieldName","submissionFieldName","currentTag","text","compareLinks","submitUpdate","submitData","url","put","handleSubmissionResponse","submitLinks","deleteAllOriginalLinks","submitNewLinks","submitAttachments","anyAttachments","transaction","hasAttachments","uploadTrigger","$t","ID","title","href","previousURL","clearTrigger","handleSubmissionError","compare","parseErrors","transactionIndex","message","deleteOriginalLinks","newLinks","originalLinks","currentLink","linkObject","post","submitTransactionLinksX","finalizeSubmitX","submittedLinks","autocomplete","count","$event","disabled","i18n","props","store","render","createElement","Edit","beforeCreate","$store","$mount","source","destination","currency","foreign_currency","custom_dates","budget","bill","piggy_bank","source_account_currency_id","source_account_currency_code","source_account_currency_symbol","destination_account_currency_id","destination_account_currency_code","destination_account_currency_symbol","attachments","source_account","name_with_balance","currency_name","currency_decimal_places","destination_account","piggy_bank_id","___CSS_LOADER_EXPORT___","slot","VueTypeaheadBootstrap","descriptions","initialSet","getACURL","clearDescription","query","getElementsByTagName","lookupDescription","debounce","$emit","inputClass","minMatchingChars","placeholder","serializer","item","showOnFocus","autofocus","inputName","tabindex","localTimeZone","Intl","DateTimeFormat","resolvedOptions","timeZone","systemTimeZone","dateStr","timeStr","localDate","computed","ref","budgetList","emitEvent","collectData","getBudgets","parseBudgets","current","active","label","accountTypes","selectedAccount","accountName","selectedAccountTrigger","types","userSelectedAccount","systemReturnedAccount","clearAccount","lookupAccount","createInitialSet","currency_symbol","accountKey","visible","htmlText","required","sourceCurrencySymbol","destinationCurrencySymbol","fractionDigits","transactionAmount","formatNumber","str","parseFloat","toFixed","currencySymbol","srcCurrencySymbol","dstCurrencySymbol","step","sourceCurrencyId","destinationCurrencyId","isVisible","selectedCurrency","allCurrencies","selectableCurrencies","dstCurrencyId","srcCurrencyId","lockedCurrency","lockCurrency","getAllCurrencies","filterCurrencies","dateFields","availableFields","dates","interestDate","bookDate","processDate","dueDate","paymentDate","invoiceDate","isDateField","includes","getFieldValue","setFieldValue","target","enabled","categories","clearCategory","lookupCategory","selectedCategory","set","billList","getBills","parseBills","VueTagsInput","autocompleteItems","updateTags","tagList","shortList","initItems","clearTimeout","setTimeout","map","tag","warn","options","newTags","piggyList","getPiggies","parsePiggies","piggy","reference","showField","style","scope","colspan","searchResults","include","linkTypes","searching","getLinkTypes","removeLink","getTextForLinkType","selectTransaction","selected","addToSelected","removeFromSelected","selectLinkType","updateSelected","find","parseLinkTypes","resetModal","search","linkTypeInward","inward","linkTypeOutward","outward","parseSearch","isJournalSelected","getJournalLinkType","link_type_text","NumberFormat","maxlength","linkType","uploads","uploaded","doUpload","$refs","att","selectedFile","createAttachment","filename","attachable_type","attachable_id","uploadAttachment","attachmentId","uploadUri","countAttachment","files","fileReader","FileReader","theParent","onloadend","evt","readyState","DONE","Blob","readAsArrayBuffer","multiple","iconRetinaUrl","iconUrl","shadowUrl","LMap","LTileLayer","LMarker","zoom","center","hasMarker","bounds","marker","prepMap","myMap","mapObject","on","setObjectLocation","saveZoomLevel","latlng","clearLocation","zoomUpdated","centerUpdated","boundsUpdated","allowSwitch","splitDate","sourceAccount","destinationAccount","hasMetaFields","requiredFields","TransactionLocation","TransactionAttachments","TransactionNotes","TransactionExternalUrl","TransactionInternalReference","TransactionPiggyBank","TransactionTags","TransactionLinks","TransactionBill","TransactionCategory","TransactionCustomDates","TransactionForeignCurrency","TransactionForeignAmount","TransactionAmount","SwitchAccount","TransactionAccount","TransactionBudget","TransactionDescription","TransactionDate"],"mappings":"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","file":"/public/js/transactions/edit.js","sourcesContent":["/*\n * bootstrap.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// // imports\nimport Vue from 'vue';\nimport VueI18n from 'vue-i18n'\nimport * as uiv from 'uiv';\n\n// export jquery for others scripts to use\nwindow.$ = window.jQuery = require('jquery');\n\n// axios\nwindow.axios = require('axios');\nwindow.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n\n// CSRF\nlet token = document.head.querySelector('meta[name=\"csrf-token\"]');\n\nif (token) {\n    window.axios.defaults.headers.common['X-CSRF-TOKEN'] = token.content;\n} else {\n    console.error('CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token');\n}\n\n// locale\nlet localeToken = document.head.querySelector('meta[name=\"locale\"]');\n\nif (localeToken) {\n    localStorage.locale = localeToken.content;\n} else {\n    localStorage.locale = 'en_US';\n}\n\n// admin stuff\nrequire('jquery-ui');\nrequire('bootstrap'); // bootstrap CSS?\n\nrequire('admin-lte/dist/js/adminlte');\nrequire('overlayscrollbars');\n\n\n// vue\nwindow.vuei18n = VueI18n;\nwindow.uiv = uiv;\nVue.use(vuei18n);\nVue.use(uiv);\nwindow.Vue = Vue;","/*\n * create.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nconst lodashClonedeep = require('lodash.clonedeep');\n\nimport {getDefaultTransaction, getDefaultErrors} from '../../../../shared/transactions';\n\n// initial state\nconst state = () => ({\n        transactionType: 'any',\n        groupTitle: '',\n        transactions: [],\n        customDateFields: {\n            interest_date: false,\n            book_date: false,\n            process_date: false,\n            due_date: false,\n            payment_date: false,\n            invoice_date: false,\n        },\n        defaultTransaction: getDefaultTransaction(),\n        defaultErrors: getDefaultErrors()\n    }\n)\n\n\n// getters\nconst getters = {\n    transactions: state => {\n        return state.transactions;\n    },\n    defaultErrors: state => {\n        return state.defaultErrors;\n    },\n    groupTitle: state => {\n        return state.groupTitle;\n    },\n    transactionType: state => {\n        return state.transactionType;\n    },\n    accountToTransaction: state => {\n// See reference nr. 1\n        // possible API point!!\n        return state.accountToTransaction;\n    },\n    defaultTransaction: state => {\n        return state.defaultTransaction;\n    },\n    sourceAllowedTypes: state => {\n        return state.sourceAllowedTypes;\n    },\n    destinationAllowedTypes: state => {\n        return state.destinationAllowedTypes;\n    },\n    allowedOpposingTypes: state => {\n        return state.allowedOpposingTypes;\n    },\n    customDateFields: state => {\n        return state.customDateFields;\n    }\n    // // `getters` is localized to this module's getters\n    // // you can use rootGetters via 4th argument of getters\n    // someGetter (state, getters, rootState, rootGetters) {\n    //     getters.someOtherGetter // -> 'foo/someOtherGetter'\n    //     rootGetters.someOtherGetter // -> 'someOtherGetter'\n    //     rootGetters['bar/someOtherGetter'] // -> 'bar/someOtherGetter'\n    // },\n\n}\n\n// actions\nconst actions = {}\n\n// mutations\nconst mutations = {\n    addTransaction(state) {\n        let newTransaction = lodashClonedeep(state.defaultTransaction);\n        newTransaction.errors = lodashClonedeep(state.defaultErrors);\n        state.transactions.push(newTransaction);\n    },\n    resetErrors(state, payload) {\n        //console.log('resetErrors for index ' + payload.index);\n        state.transactions[payload.index].errors = lodashClonedeep(state.defaultErrors);\n    },\n    resetTransactions(state) {\n        state.transactions = [];\n    },\n    setGroupTitle(state, payload) {\n        state.groupTitle = payload.groupTitle;\n    },\n    setCustomDateFields(state, payload) {\n        state.customDateFields = payload;\n    },\n    deleteTransaction(state, payload) {\n        state.transactions.splice(payload.index, 1);\n        // console.log('Deleted transaction ' + payload.index);\n        // console.log(state.transactions);\n        if (0 === state.transactions.length) {\n            // console.log('array is empty!');\n        }\n    },\n    setTransactionType(state, transactionType) {\n        state.transactionType = transactionType;\n    },\n    setAllowedOpposingTypes(state, allowedOpposingTypes) {\n        state.allowedOpposingTypes = allowedOpposingTypes;\n    },\n    setAccountToTransaction(state, payload) {\n        state.accountToTransaction = payload;\n    },\n    updateField(state, payload) {\n        state.transactions[payload.index][payload.field] = payload.value;\n    },\n    setTransactionError(state, payload) {\n        //console.log('Will set transactions[' + payload.index + '][errors][' + payload.field + '] to ');\n        //console.log(payload.errors);\n        state.transactions[payload.index].errors[payload.field] = payload.errors;\n    },\n    setDestinationAllowedTypes(state, payload) {\n        // console.log('Destination allowed types was changed!');\n        state.destinationAllowedTypes = payload;\n    },\n    setSourceAllowedTypes(state, payload) {\n        state.sourceAllowedTypes = payload;\n    }\n}\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * edit.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// initial state\nconst state = () => ({});\n\n\n// getters\nconst getters = {};\n\n// actions\nconst actions = {};\n\n// mutations\nconst mutations = {};\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * index.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// initial state\nimport startOfDay from \"date-fns/startOfDay\";\nimport endOfDay from 'date-fns/endOfDay'\nimport startOfWeek from 'date-fns/startOfWeek'\nimport endOfWeek from 'date-fns/endOfWeek'\nimport startOfQuarter from 'date-fns/startOfQuarter';\nimport endOfQuarter from 'date-fns/endOfQuarter';\nimport endOfMonth from \"date-fns/endOfMonth\";\nimport startOfMonth from 'date-fns/startOfMonth';\n\nconst state = () => (\n    {\n        viewRange: 'default',\n        start: null,\n        end: null,\n        defaultStart: null,\n        defaultEnd: null,\n    }\n)\n\n\n// getters\nconst getters = {\n    start: state => {\n        return state.start;\n    },\n    end: state => {\n        return state.end;\n    },\n    defaultStart: state => {\n        return state.defaultStart;\n    },\n    defaultEnd: state => {\n        return state.defaultEnd;\n    },\n    viewRange: state => {\n        return state.viewRange;\n    }\n}\n\n// actions\nconst actions = {\n    initialiseStore(context) {\n        // console.log('initialiseStore for dashboard.');\n\n        // restore from local storage:\n        context.dispatch('restoreViewRange');\n\n        axios.get('./api/v1/preferences/viewRange')\n            .then(response => {\n                      let viewRange = response.data.data.attributes.data;\n                      let oldViewRange = context.getters.viewRange;\n                      context.commit('setViewRange', viewRange);\n                      if (viewRange !== oldViewRange) {\n                          // console.log('View range changed from \"' + oldViewRange + '\" to \"' + viewRange + '\"');\n                          context.dispatch('setDatesFromViewRange');\n                      }\n                      if (viewRange === oldViewRange) {\n                          // console.log('Restore view range dates');\n                          context.dispatch('restoreViewRangeDates');\n                      }\n                  }\n            ).catch(() => {\n            context.commit('setViewRange', '1M');\n            context.dispatch('setDatesFromViewRange');\n        });\n\n    },\n    restoreViewRangeDates: function (context) {\n        // check local storage first?\n        if (localStorage.viewRangeStart) {\n            // console.log('view range start set from local storage.');\n            context.commit('setStart', new Date(localStorage.viewRangeStart));\n        }\n        if (localStorage.viewRangeEnd) {\n            // console.log('view range end set from local storage.');\n            context.commit('setEnd', new Date(localStorage.viewRangeEnd));\n        }\n        // also set default:\n        if (localStorage.viewRangeDefaultStart) {\n            // console.log('view range default start set from local storage.');\n            // console.log(localStorage.viewRangeDefaultStart);\n            context.commit('setDefaultStart', new Date(localStorage.viewRangeDefaultStart));\n        }\n        if (localStorage.viewRangeDefaultEnd) {\n            // console.log('view range default end set from local storage.');\n            // console.log(localStorage.viewRangeDefaultEnd);\n            context.commit('setDefaultEnd', new Date(localStorage.viewRangeDefaultEnd));\n        }\n    },\n    restoreViewRange: function (context) {\n        // console.log('restoreViewRange');\n        let viewRange = localStorage.getItem('viewRange');\n        if (null !== viewRange) {\n            // console.log('restored restoreViewRange ' + viewRange );\n            context.commit('setViewRange', viewRange);\n        }\n    },\n    setDatesFromViewRange(context) {\n        let start;\n        let end;\n        let viewRange = context.getters.viewRange;\n        let today = new Date;\n        // console.log('Will recreate view range on ' + viewRange);\n        switch (viewRange) {\n            case '1D':\n                // today:\n                start = startOfDay(today);\n                end = endOfDay(today);\n                break;\n            case '1W':\n                // this week:\n                start = startOfDay(startOfWeek(today, {weekStartsOn: 1}));\n                end = endOfDay(endOfWeek(today, {weekStartsOn: 1}));\n                break;\n            case '1M':\n                // this month:\n                start = startOfDay(startOfMonth(today));\n                end = endOfDay(endOfMonth(today));\n                break;\n            case '3M':\n                // this quarter\n                start = startOfDay(startOfQuarter(today));\n                end = endOfDay(endOfQuarter(today));\n                break;\n            case '6M':\n                // this half-year\n                if (today.getMonth() <= 5) {\n                    start = new Date(today);\n                    start.setMonth(0);\n                    start.setDate(1);\n                    start = startOfDay(start);\n                    end = new Date(today);\n                    end.setMonth(5);\n                    end.setDate(30);\n                    end = endOfDay(start);\n                }\n                if (today.getMonth() > 5) {\n                    start = new Date(today);\n                    start.setMonth(6);\n                    start.setDate(1);\n                    start = startOfDay(start);\n                    end = new Date(today);\n                    end.setMonth(11);\n                    end.setDate(31);\n                    end = endOfDay(start);\n                }\n                break;\n            case '1Y':\n                // this year\n                start = new Date(today);\n                start.setMonth(0);\n                start.setDate(1);\n                start = startOfDay(start);\n\n                end = new Date(today);\n                end.setMonth(11);\n                end.setDate(31);\n                end = endOfDay(end);\n                break;\n        }\n        // console.log('Range is ' + viewRange);\n        // console.log('Start is ' + start);\n        // console.log('End is   ' + end);\n        context.commit('setStart', start);\n        context.commit('setEnd', end);\n        context.commit('setDefaultStart', start);\n        context.commit('setDefaultEnd', end);\n    }\n}\n\n// mutations\nconst mutations = {\n    setStart(state, value) {\n        state.start = value;\n        window.localStorage.setItem('viewRangeStart', value);\n    },\n    setEnd(state, value) {\n        state.end = value;\n        window.localStorage.setItem('viewRangeEnd', value);\n    },\n    setDefaultStart(state, value) {\n        state.defaultStart = value;\n        window.localStorage.setItem('viewRangeDefaultStart', value);\n    },\n    setDefaultEnd(state, value) {\n        state.defaultEnd = value;\n        window.localStorage.setItem('viewRangeDefaultEnd', value);\n    },\n    setViewRange(state, range) {\n        state.viewRange = range;\n        window.localStorage.setItem('viewRange', range);\n    }\n}\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * root.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// initial state\nconst state = () => (\n    {\n        listPageSize: 33,\n        timezone: '',\n        cacheKey: {\n            age: 0,\n            value: 'empty',\n        },\n    }\n)\n\n\n// getters\nconst getters = {\n    listPageSize: state => {\n        return state.listPageSize;\n    },\n    timezone: state => {\n        // console.log('Wil return ' + state.listPageSize);\n        return state.timezone;\n    },\n    cacheKey: state => {\n        return state.cacheKey.value;\n    },\n}\n\n// actions\nconst actions = {\n    initialiseStore(context) {\n        // cache key auto refreshes every day\n        // console.log('Now in initialize store.')\n        if (localStorage.cacheKey) {\n            // console.log('Storage has cache key: ');\n            // console.log(localStorage.cacheKey);\n            let object = JSON.parse(localStorage.cacheKey);\n            if (Date.now() - object.age > 86400000) {\n                // console.log('Key is here but is old.');\n                context.commit('refreshCacheKey');\n            } else {\n                // console.log('Cache key from local storage: ' + object.value);\n                context.commit('setCacheKey', object);\n            }\n        } else {\n            // console.log('No key need new one.');\n            context.commit('refreshCacheKey');\n        }\n        if (localStorage.listPageSize) {\n            state.listPageSize = localStorage.listPageSize;\n            context.commit('setListPageSize', {length: localStorage.listPageSize});\n        }\n        if (!localStorage.listPageSize) {\n            axios.get('./api/v1/preferences/listPageSize')\n                .then(response => {\n                          // console.log('from API: listPageSize is ' + parseInt(response.data.data.attributes.data));\n                          context.commit('setListPageSize', {length: parseInt(response.data.data.attributes.data)});\n                      }\n                );\n        }\n        if (localStorage.timezone) {\n            state.timezone = localStorage.timezone;\n            context.commit('setTimezone', {timezone: localStorage.timezone});\n        }\n        if (!localStorage.timezone) {\n            axios.get('./api/v1/configuration/app.timezone')\n                .then(response => {\n                          context.commit('setTimezone', {timezone: response.data.data.value});\n                      }\n                );\n        }\n    }\n}\n\n// mutations\nconst mutations = {\n    refreshCacheKey(state) {\n        let age = Date.now();\n        let N = 8;\n        let cacheKey = Array(N+1).join((Math.random().toString(36)+'00000000000000000').slice(2, 18)).slice(0, N);\n        let object = {age: age, value: cacheKey};\n        // console.log('Store new key in string JSON');\n        // console.log(JSON.stringify(object));\n        localStorage.cacheKey = JSON.stringify(object);\n        state.cacheKey = {age: age, value: cacheKey};\n        // console.log('Refresh: cachekey is now ' + cacheKey);\n    },\n    setCacheKey(state, payload) {\n        // console.log('Stored cache key in localstorage.');\n        // console.log(payload);\n        // console.log(JSON.stringify(payload));\n        localStorage.cacheKey = JSON.stringify(payload);\n        state.cacheKey = payload;\n    },\n    setListPageSize(state, payload) {\n        // console.log('Got a payload in setListPageSize');\n        // console.log(payload);\n        let number = parseInt(payload.length);\n        if (0 !== number) {\n            state.listPageSize = number;\n            localStorage.listPageSize = number;\n        }\n    },\n    setTimezone(state, payload) {\n\n        if ('' !== payload.timezone) {\n            state.timezone = payload.timezone;\n            localStorage.timezone = payload.timezone;\n        }\n    },\n}\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * index.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// initial state\nconst state = () => (\n    {\n        orderMode: false,\n        activeFilter: 1\n    }\n)\n\n\n// getters\nconst getters = {\n    orderMode: state => {\n        return state.orderMode;\n    },\n    activeFilter: state => {\n        return state.activeFilter;\n    }\n}\n\n// actions\nconst actions = {}\n\n// mutations\nconst mutations = {\n    setOrderMode(state, payload) {\n        state.orderMode = payload;\n    },\n    setActiveFilter(state, payload) {\n        state.activeFilter = payload;\n    }\n}\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * index.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport Vue from 'vue'\nimport Vuex, {createLogger} from 'vuex'\nimport transactions_create from './modules/transactions/create';\nimport transactions_edit from './modules/transactions/edit';\nimport dashboard_index from './modules/dashboard/index';\nimport root_store from './modules/root';\nimport accounts_index from './modules/accounts/index';\n\nVue.use(Vuex)\nconst debug = process.env.NODE_ENV !== 'production'\n\nexport default new Vuex.Store(\n    {\n        namespaced: true,\n        modules: {\n            root: root_store,\n            transactions: {\n                namespaced: true,\n                modules: {\n                    create: transactions_create,\n                    edit: transactions_edit\n                }\n            },\n            accounts: {\n                namespaced: true,\n                modules: {\n                    index: accounts_index\n                },\n            },\n            dashboard: {\n                namespaced: true,\n                modules: {\n                    index: dashboard_index\n                }\n            }\n        },\n        strict: debug,\n        plugins: debug ? [createLogger()] : [],\n        state: {\n            currencyPreference: {},\n            locale: 'en-US',\n            listPageSize: 50\n        },\n        mutations: {\n            setCurrencyPreference(state, payload) {\n                state.currencyPreference = payload.payload;\n            },\n            initialiseStore(state) {\n                // console.log('Now in initialiseStore()')\n                // if locale in local storage:\n                if (localStorage.locale) {\n                    state.locale = localStorage.locale;\n                    return;\n                }\n\n                // set locale from HTML:\n                let localeToken = document.head.querySelector('meta[name=\"locale\"]');\n                if (localeToken) {\n                    state.locale = localeToken.content;\n                    localStorage.locale = localeToken.content;\n                }\n            }\n        },\n        getters: {\n            currencyCode: state => {\n                return state.currencyPreference.code;\n            },\n            currencyPreference: state => {\n                return state.currencyPreference;\n            },\n            currencyId: state => {\n                return state.currencyPreference.id;\n            },\n            locale: state => {\n                return state.locale;\n            }\n            },\n        actions: {\n\n            updateCurrencyPreference(context) {\n                // console.log('Now in updateCurrencyPreference');\n                if (localStorage.currencyPreference) {\n                    context.commit('setCurrencyPreference', {payload: JSON.parse(localStorage.currencyPreference)});\n                    return;\n                }\n                axios.get('./api/v1/currencies/default')\n                    .then(response => {\n                        let currencyResponse = {\n                            id: parseInt(response.data.data.id),\n                            name: response.data.data.attributes.name,\n                            symbol: response.data.data.attributes.symbol,\n                            code: response.data.data.attributes.code,\n                            decimal_places: parseInt(response.data.data.attributes.decimal_places),\n                        };\n                        localStorage.currencyPreference = JSON.stringify(currencyResponse);\n                        //console.log('getCurrencyPreference from server')\n                        //console.log(JSON.stringify(currencyResponse));\n                        context.commit('setCurrencyPreference', {payload: currencyResponse});\n                    }).catch(err => {\n                    // console.log('Got error response.');\n                    console.error(err);\n                    context.commit('setCurrencyPreference', {\n                        payload: {\n                            id: 1,\n                            name: 'Euro',\n                            symbol: '',\n                            code: 'EUR',\n                            decimal_places: 2\n                        }\n                    });\n                });\n\n            }\n        }\n    }\n);","/*\n * i18n.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// Create VueI18n instance with options\nmodule.exports = new vuei18n({\n    locale: document.documentElement.lang, // set locale\n    fallbackLocale: 'en',\n    messages: {\n        'bg': require('./locales/bg.json'),\n        'cs': require('./locales/cs.json'),\n        'de': require('./locales/de.json'),\n        'en': require('./locales/en.json'),\n        'en-us': require('./locales/en.json'),\n        'en-gb': require('./locales/en-gb.json'),\n        'es': require('./locales/es.json'),\n        'el': require('./locales/el.json'),\n        'fr': require('./locales/fr.json'),\n        'hu': require('./locales/hu.json'),\n        //'id': require('./locales/id.json'),\n        'it': require('./locales/it.json'),\n        'nl': require('./locales/nl.json'),\n        'nb': require('./locales/nb.json'),\n        'pl': require('./locales/pl.json'),\n        'fi': require('./locales/fi.json'),\n        'pt-br': require('./locales/pt-br.json'),\n        'pt-pt': require('./locales/pt.json'),\n        'ro': require('./locales/ro.json'),\n        'ru': require('./locales/ru.json'),\n        //'zh': require('./locales/zh.json'),\n        'zh-tw': require('./locales/zh-tw.json'),\n        'zh-cn': require('./locales/zh-cn.json'),\n        'sk': require('./locales/sk.json'),\n        'sv': require('./locales/sv.json'),\n        'vi': require('./locales/vi.json'),\n    }\n});\n","<!--\n  - Edit.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div>\n    <Alert :message=\"errorMessage\" type=\"danger\"/>\n    <Alert :message=\"successMessage\" type=\"success\"/>\n    <Alert :message=\"warningMessage\" type=\"warning\"/>\n\n    <form @submit=\"submitTransaction\" autocomplete=\"off\">\n      <SplitPills\n          :transactions=\"transactions\"\n          :count=\"transactions.length\"\n\n      />\n\n      <div class=\"tab-content\">\n        <SplitForm\n            v-for=\"(transaction, index) in this.transactions\"\n            :index=\"index\"\n            v-bind:key=\"transaction.transaction_journal_id\"\n            :key=\"transaction.transaction_journal_id\"\n            :transaction=\"transaction\"\n            :date=\"date\"\n            :count=\"transactions.length\"\n            :transaction-type=\"transactionType\"\n            :source-allowed-types=\"sourceAllowedTypes\"\n            :allowed-opposing-types=\"allowedOpposingTypes\"\n            :custom-fields=\"customFields\"\n            :destination-allowed-types=\"destinationAllowedTypes\"\n            :allow-switch=\"false\"\n            v-on:uploaded-attachments=\"uploadedAttachment($event)\"\n            v-on:set-marker-location=\"storeLocation($event)\"\n            v-on:set-account=\"storeAccountValue($event)\"\n            v-on:set-date=\"storeDate($event)\"\n            v-on:set-field=\"storeField($event)\"\n            v-on:remove-transaction=\"removeTransaction($event)\"\n            v-on:selected-attachments=\"selectedAttachments($event)\"\n        />\n      </div>\n\n      <!-- bottom buttons etc -->\n      <div class=\"row\">\n        <!-- group title -->\n        <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\">\n          <div v-if=\"transactions.length > 1\" class=\"card\">\n            <div class=\"card-body\">\n              <div class=\"row\">\n                <div class=\"col\">\n                  <TransactionGroupTitle v-model=\"this.groupTitle\" :errors=\"this.groupTitleErrors\" v-on:set-group-title=\"storeGroupTitle($event)\"/>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\">\n          <!-- buttons -->\n          <div class=\"card\">\n            <div class=\"card-body\">\n              <div class=\"row\">\n                <div class=\"col\">\n                  <div class=\"text-xs d-none d-lg-block d-xl-block\">\n                    &nbsp;\n                  </div>\n                  <button type=\"button\" class=\"btn btn-outline-primary btn-block\" @click=\"addTransaction\"><span class=\"far fa-clone\"></span>\n                    {{ $t('firefly.add_another_split') }}\n                  </button>\n                </div>\n                <div class=\"col\">\n                  <div class=\"text-xs d-none d-lg-block d-xl-block\">\n                    &nbsp;\n                  </div>\n                  <button :disabled=\"!enableSubmit\" class=\"btn btn-info btn-block\" @click=\"submitTransaction\">\n                    <span v-if=\"enableSubmit\"><span class=\"far fa-save\"></span> {{ $t('firefly.update_transaction') }}</span>\n                    <span v-if=\"!enableSubmit\"><span class=\"fas fa-spinner fa-spin\"></span></span>\n                  </button>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col\">\n                  &nbsp;\n                </div>\n                <div class=\"col\">\n                  <div class=\"form-check\">\n                    <input id=\"stayHere\" v-model=\"stayHere\" class=\"form-check-input\" type=\"checkbox\">\n                    <label class=\"form-check-label\" for=\"stayHere\">\n                      <span class=\"small\">{{ $t('firefly.after_update_create_another') }}</span>\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport {mapMutations} from \"vuex\";\nimport Alert from '../partials/Alert';\nimport SplitPills from \"./SplitPills\";\nimport SplitForm from \"./SplitForm\";\nimport TransactionGroupTitle from \"./TransactionGroupTitle\";\nimport {getDefaultErrors, getDefaultTransaction} from '../../shared/transactions';\n\nconst lodashClonedeep = require('lodash.clonedeep');\n\nexport default {\n  name: \"Edit\",\n  created() {\n    // console.log('Created');\n    let parts = window.location.pathname.split('/');\n    this.groupId = parseInt(parts[parts.length - 1]);\n    this.transactions = [];\n    this.getTransactionGroup();\n    this.getAllowedOpposingTypes();\n    this.getCustomFields();\n  },\n  data() {\n    return {\n      successMessage: {type: String, default: ''},\n      errorMessage: {type: String, default: ''},\n      warningMessage: {type: String, default: ''},\n\n      // transaction props\n      transactions: {\n        type: Array,\n        default: function () {\n          return [];\n        }\n      },\n      originalTransactions: {\n        type: Array,\n        default: function () {\n          return [];\n        }\n      },\n      groupTitle: {type: String, default: ''},\n      originalGroupTitle: {type: String, default: ''},\n      transactionType: {type: String, default: 'any'},\n      groupId: {type: Number, default: 0},\n\n      // errors in the group title:\n      groupTitleErrors: {\n        type: Array,\n        default: function () {\n          return [];\n        }\n      },\n\n      // which custom fields to show\n      customFields: {\n        type: Object,\n        default: function () {\n          return {};\n        }\n      },\n\n      // group ID + title once submitted:\n      returnedGroupId: {type: Number, default: 0},\n      returnedGroupTitle: {type: String, default: ''},\n\n      // date and time of the transaction,\n      date: {type: String, default: ''},\n      originalDate: {type: String, default: ''},\n\n      // things the process is done working on (3 phases):\n      submittedTransaction: {type: Boolean, default: false},\n      // submittedLinks: false,\n      submittedAttachments: {type: Number, default: -1}, // -1 = no attachments, 0 = uploading, 1 = uploaded\n      inError: {type: Boolean, default: false},\n\n      // number of uploaded attachments\n      // its an object because we count per transaction journal (which can have multiple attachments)\n      // and array doesn't work right.\n      submittedAttCount: {\n        type: Object,\n        default: function () {\n          return {};\n        }\n      },\n\n      // meta data for accounts\n      allowedOpposingTypes: {\n        type: Object,\n        default: function () {\n          return {};\n        }\n      },\n      destinationAllowedTypes: {\n        type: Array,\n        default: function () {\n          return [];\n        }\n      },\n      sourceAllowedTypes: {\n        type: Array,\n        default: function () {\n          return [];\n        }\n      },\n\n      // states for the form (makes sense right)\n      enableSubmit: true,\n      stayHere: false,\n\n      // force the submission (in case of deletes)\n      forceTransactionSubmission: false\n\n    }\n  },\n  components: {\n    Alert,\n    SplitPills,\n    SplitForm,\n    TransactionGroupTitle\n  },\n\n  watch: {\n    submittedAttachments: function () {\n      this.finaliseSubmission();\n    }\n  },\n\n  methods: {\n    ...mapMutations('transactions/create', ['updateField',]),\n    /**\n     * Grab transaction group from URL and submit GET.\n     */\n    getTransactionGroup: function () {\n      // console.log('getTransactionGroup');\n      axios.get('./api/v1/transactions/' + this.groupId)\n          .then(response => {\n                  this.parseTransactionGroup(response.data);\n                }\n          ).catch(error => {\n        //console.log('I failed :(');\n        //console.log(error);\n      });\n    },\n    /**\n     * Parse transaction group. Title is easy, transactions have their own method.\n     * @param response\n     */\n    parseTransactionGroup: function (response) {\n      // console.log('Will now parse');\n      // console.log(response);\n      let attributes = response.data.attributes;\n      let transactions = attributes.transactions.reverse();\n      this.groupTitle = attributes.group_title;\n      this.originalGroupTitle = attributes.group_title;\n\n      this.transactions = [];\n      this.originalTransactions = [];\n\n\n      //this.returnedGroupId = parseInt(response.data.id);\n      this.returnedGroupTitle = null === this.originalGroupTitle ? response.data.attributes.transactions[0].description : this.originalGroupTitle;\n\n      for (let i in transactions) {\n        if (transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          // console.log('Parsing transaction nr ' + i);\n          let result = this.parseTransaction(parseInt(i), transactions[i]);\n          this.transactions.push(result);\n          this.originalTransactions.push(lodashClonedeep(result));\n          // pick up the links of this transaction:\n          this.parseLinks(parseInt(result.transaction_journal_id), parseInt(i));\n        }\n      }\n    },\n    /**\n     * Parse a single transaction.\n     *\n     * @param index\n     * @param array\n     */\n    parseTransaction: function (index, array) {\n      //console.log('index: ' + index);\n      if (0 === index) {\n        this.transactionType = array.type.charAt(0).toUpperCase() + array.type.slice(1);\n\n        // See reference nr. 5\n        this.sourceAllowedTypes = [array.source_type];\n        this.destinationAllowedTypes = [array.destination_type];\n        this.date = array.date.substring(0, 16);\n        this.originalDate = array.date.substring(0, 16);\n      }\n      let result = getDefaultTransaction();\n      // parsing here:\n      result.description = array.description;\n      result.transaction_journal_id = parseInt(array.transaction_journal_id);\n      // accounts:\n      result.source_account_id = array.source_id;\n      result.source_account_name = array.source_name;\n      result.source_account_type = array.source_type;\n\n      result.destination_account_id = array.destination_id;\n      result.destination_account_name = array.destination_name;\n      result.destination_account_type = array.destination_type;\n\n      // amount:\n      result.amount = array.amount;\n      result.currency_id = array.currency_id;\n      result.foreign_amount = array.foreign_amount;\n      result.foreign_currency_id = array.foreign_currency_id;\n\n      // meta data\n      result.category = array.category_name;\n      result.budget_id = array.budget_id;\n      result.bill_id = array.bill_id ?? 0;\n\n      result.tags = array.tags;\n\n      // optional date fields (6x):\n      result.interest_date = array.interest_date ? array.interest_date.substr(0, 10) : '';\n      result.book_date = array.book_date ? array.book_date.substr(0, 10) : '';\n      result.process_date = array.process_date ? array.process_date.substr(0, 10) : '';\n      result.due_date = array.due_date ? array.due_date.substr(0, 10) : '';\n      result.payment_date = array.payment_date ? array.payment_date.substr(0, 10) : '';\n      result.invoice_date = array.invoice_date ? array.invoice_date.substr(0, 10) : '';\n\n      // optional other fields:\n      result.internal_reference = array.internal_reference;\n      result.external_url = array.external_uri;\n      result.external_id = array.external_id;\n      result.notes = array.notes;\n      // location:\n      result.location = {\n        zoom_level: array.zoom_level,\n        longitude: array.longitude,\n        latitude: array.latitude,\n      };\n      result.zoom_level = array.zoom_level;\n      result.longitude = array.longitude;\n      result.latitude = array.latitude;\n      // error handling\n      result.errors = getDefaultErrors();\n      return result;\n    },\n    /**\n     * Get the links of this transaction group from the API.\n     */\n    parseLinks: function (journalId, index) {\n      axios.get('./api/v1/transaction-journals/' + journalId + '/links')\n          .then(response => {\n            let links = response.data.data;\n            for (let i in links) {\n              if (links.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n                this.parseLink(links[i], journalId, index);\n              }\n            }\n          });\n    },\n\n    /**\n     * Process individual link from the API.\n     */\n    parseLink: function (link, journalId, index) {\n      let promises = [];\n      let opposingId = parseInt(link.attributes.inward_id);\n      let linkDirection = 'inward';\n      if (opposingId === journalId) {\n        opposingId = parseInt(link.attributes.outward_id);\n        linkDirection = 'outward';\n      }\n      // add meta data to promise context.\n      promises.push(Promise.resolve(\n          {\n            link: link,\n            journalId: journalId,\n            opposingId: opposingId,\n            index: index,\n            direction: linkDirection\n          }\n      ));\n\n\n      // get stuff from the API:\n      promises.push(axios.get('./api/v1/transaction-journals/' + opposingId));\n      promises.push(axios.get('./api/v1/transaction_links/' + link.attributes.link_type_id));\n\n      Promise.all(promises).then(responses => {\n        let journals = responses[1].data.data.attributes.transactions;\n        let opposingId = responses[0].opposingId;\n        let journal = {};\n        // loop over journals to get the correct one:\n        for (let i in journals) {\n          if (journals.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n            if (journals[i].transaction_journal_id === opposingId) {\n              journal = journals[i];\n            }\n          }\n        }\n        let index = responses[0].index;\n        let direction = responses[0].direction;\n        let linkTypeId = responses[2].data.data.id;\n        let object = {\n          id: link.id,\n          link_type_id: linkTypeId + '-' + direction,\n          transaction_group_id: responses[1].data.data.id,\n          transaction_journal_id: journal.transaction_journal_id,\n          description: journal.description,\n          type: journal.type,\n          currency_code: journal.currency_code,\n          amount: journal.amount\n        };\n        this.transactions[index].links.push(object);\n        this.originalTransactions[index].links.push(object);\n      });\n    },\n    /**\n     * Get API value.\n     */\n    getAllowedOpposingTypes: function () {\n      axios.get('./api/v1/configuration/firefly.allowed_opposing_types')\n          .then(response => {\n            this.allowedOpposingTypes = response.data.data.value;\n          });\n    },\n    /**\n     * Get API value.\n     */\n    getCustomFields: function () {\n      axios.get('./api/v1/preferences/transaction_journal_optional_fields').then(response => {\n        this.customFields = response.data.data.attributes.data;\n      });\n    },\n    uploadedAttachment: function (payload) {\n      //console.log('event: uploadedAttachment');\n      //console.log(payload);\n      this.submittedAttachments = 0;\n      // console.log('Triggered uploadedAttachment(' + journalId + ')');\n      let key = 'str' + payload;\n      this.submittedAttCount[key] = 1;\n      let count = Object.keys(this.submittedAttCount).length;\n      //console.log('Count is now ' + count);\n      //console.log('Length is ' + this.transactions.length);\n      if (count === this.transactions.length) {\n        //console.log('Got them all!');\n        // mark the attachments as stored:\n        this.submittedAttachments = 1;\n      }\n    },\n    storeLocation: function (payload) {\n      this.transactions[payload.index].zoom_level = payload.zoomLevel;\n      this.transactions[payload.index].longitude = payload.lng;\n      this.transactions[payload.index].latitude = payload.lat;\n    },\n    storeAccountValue: function (payload) {\n      let direction = payload.direction;\n      let index = payload.index;\n      this.transactions[index][direction + '_account_id'] = payload.id;\n      this.transactions[index][direction + '_account_type'] = payload.type;\n      this.transactions[index][direction + '_account_name'] = payload.name;\n    },\n    storeDate: function (payload) {\n      this.date = payload.date;\n    },\n    storeField: function (payload) {\n      let field = payload.field;\n      if ('category' === field) {\n        field = 'category_name';\n      }\n      this.transactions[payload.index][field] = payload.value;\n\n    },\n    removeTransaction: function (payload) {\n      // console.log('removeTransaction()');\n      // console.log('length      : ' + this.transactions.length);\n      // console.log('Remove index: ' + payload.index);\n\n      let index = 0;\n      for (let i in this.transactions) {\n        if (this.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          // console.log('Now at index: ' + i);\n          if (index === payload.index) {\n            this.forceTransactionSubmission = true;\n            //console.log('Delete!');\n            this.transactions.splice(index, 1);\n            //console.log(delete this.transactions[i]);\n          }\n          index++;\n        }\n      }\n      $('#transactionTabs li:first-child a').tab('show');\n      // console.log(this.transactions);\n      // this.transactions.splice(payload.index, 1);\n      // console.log('length: ' + this.transactions.length);\n\n      // this.originalTransactions.splice(payload.index, 1);\n      // this kills the original transactions.\n      //this.originalTransactions = [];\n    },\n    storeGroupTitle: function (payload) {\n      this.groupTitle = payload;\n    },\n    selectedAttachments: function (payload) {\n      //console.log('Now in selectedAttachments()');\n      for (let i in this.transactions) {\n        if (this.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          // console.log('Payload is');\n          // console.log(payload);\n          if (parseInt(this.transactions[i].transaction_journal_id) === parseInt(payload.id)) {\n            // console.log('selectedAttachments ' + payload);\n            this.transactions[i].selectedAttachments = true;\n          }\n        }\n      }\n    },\n    addTransaction: function (event) {\n      event.preventDefault();\n      let newTransaction = getDefaultTransaction();\n      newTransaction.errors = getDefaultErrors();\n      this.transactions.push(newTransaction);\n    },\n    submitTransaction: function (event) {\n      // console.log('submitTransaction()');\n      event.preventDefault();\n      this.enableSubmit = false;\n      let submission = {transactions: []};\n\n      // parse data to see if we should submit anything at all:\n      let shouldSubmit = false;\n      let shouldLinks = false;\n      let shouldUpload = false;\n\n      // if the group title has changed, should submit:\n      if (this.groupTitle !== this.originalGroupTitle) {\n        submission.group_title = this.groupTitle;\n        shouldSubmit = true;\n      }\n\n      // if something with the group title:\n      let newTransactionCount = this.transactions.length;\n      if (newTransactionCount > 1 && typeof submission.group_title === 'undefined' && (null === this.originalGroupTitle || '' === this.originalGroupTitle)) {\n        submission.group_title = this.transactions[0].description;\n        shouldSubmit = true;\n      }\n\n      // loop each transaction (edited by the user):\n      // console.log('Start of loop submitTransaction');\n      for (let i in this.transactions) {\n        // console.log('Index ' + i);\n        if (this.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          // console.log('Has index ' + i);\n          // original transaction present:\n          let currentTransaction = this.transactions[i];\n          let originalTransaction = this.originalTransactions.hasOwnProperty(i) ? this.originalTransactions[i] : {};\n          // the difference:\n          let diff = {};\n\n          // compare basic fields:\n          let basicFields = ['description', 'source_account_id', 'source_account_name', 'destination_account_id', 'destination_account_name', 'amount', 'foreign_amount', 'foreign_currency_id', 'category_name', 'budget_id', 'bill_id', 'interest_date', 'book_date', 'due_date', 'payment_date', 'invoice_date', 'external_url', 'internal_reference', 'external_id', 'notes', 'zoom_level', 'longitude', 'latitude'];\n\n          // source and destination are overruled in some cases:\n          if (i > 0) {\n            // console.log('i > 0');\n            diff.type = this.transactionType.toLowerCase();\n            if ('deposit' === this.transactionType.toLowerCase() || 'transfer' === this.transactionType.toLowerCase()) {\n              // set destination to be whatever is in transaction zero:\n              // of the edited transaction\n              currentTransaction.destination_account_name = this.transactions[0].destination_account_name;\n              currentTransaction.destination_account_id = this.transactions[0].destination_account_id;\n              // console.log('Destination is now: #' + currentTransaction.destination_account_id + ': ' + currentTransaction.destination_account_name);\n            }\n\n            if ('withdrawal' === this.transactionType.toLowerCase() || 'transfer' === this.transactionType.toLowerCase()) {\n              // set source to be whatever is in transaction zero:\n              currentTransaction.source_account_name = this.transactions[0].source_account_name;\n              currentTransaction.source_account_id = this.transactions[0].source_account_id;\n              // console.log('Source is now: #' + currentTransaction.source_account_id + ': ' + currentTransaction.source_account_name);\n            }\n          }\n\n          // loop the basic fields and verify\n          for (let ii in basicFields) {\n            if (basicFields.hasOwnProperty(ii) && /^0$|^[1-9]\\d*$/.test(ii) && ii <= 4294967294) {\n              let fieldName = basicFields[ii];\n              // console.log('Now at field ' + fieldName);\n              let submissionFieldName = fieldName;\n\n              // if the original is undefined and the new one is null, just skip it.\n              if (currentTransaction[fieldName] === null && 'undefined' === typeof originalTransaction[fieldName]) {\n                // console.log('Will continue and skip');\n                continue;\n              }\n\n              if (currentTransaction[fieldName] !== originalTransaction[fieldName] || true === this.forceTransactionSubmission) {\n                // console.log('we continue');\n                // some fields are ignored:\n                if ('foreign_amount' === submissionFieldName && '' === currentTransaction[fieldName]) {\n                  // console.log('we skip!');\n                  continue;\n                }\n                if ('foreign_currency_id' === submissionFieldName && 0 === currentTransaction[fieldName]) {\n                  // console.log('we skip!');\n                  continue;\n                }\n                if ('foreign_currency_id' === submissionFieldName && '0' === currentTransaction[fieldName]) {\n                  // console.log('we skip!');\n                  continue;\n                }\n\n                // some field names may need to be different. little basic but it works:\n                if ('source_account_id' === submissionFieldName) {\n                  submissionFieldName = 'source_id';\n                }\n                if ('source_account_name' === submissionFieldName) {\n                  submissionFieldName = 'source_name';\n                }\n                if ('destination_account_id' === submissionFieldName) {\n                  submissionFieldName = 'destination_id';\n                }\n                if ('destination_account_name' === submissionFieldName) {\n                  submissionFieldName = 'destination_name';\n                }\n\n                // otherwise save them and remember them for submission:\n                diff[submissionFieldName] = currentTransaction[fieldName];\n                shouldSubmit = true;\n                //console.log('Should submit is now TRUE');\n              }\n            }\n          }\n\n          // tags different?\n          if (JSON.stringify(currentTransaction.tags) !== JSON.stringify(originalTransaction.tags)) {\n            diff.tags = [];\n            if (0 !== currentTransaction.tags.length) {\n              for (let ii in currentTransaction.tags) {\n                if (currentTransaction.tags.hasOwnProperty(ii) && /^0$|^[1-9]\\d*$/.test(ii) && ii <= 4294967294) {\n                  let currentTag = currentTransaction.tags[ii];\n                  if (typeof currentTag === 'object' && null !== currentTag) {\n                    diff.tags.push(currentTag.text);\n                  }\n                  if (typeof currentTag === 'string') {\n                    diff.tags.push(currentTag);\n                  }\n                }\n              }\n            }\n            shouldSubmit = true;\n          }\n\n          // compare links:\n          let newLinks = this.compareLinks(currentTransaction.links);\n          let originalLinks = this.compareLinks(originalTransaction.links);\n          if (newLinks !== originalLinks) {\n            shouldLinks = true;\n          }\n          if (typeof currentTransaction.selectedAttachments !== 'undefined' && true === currentTransaction.selectedAttachments) {\n            shouldUpload = true;\n          }\n          if (true === shouldSubmit) {\n            // set the date to whatever the date is:\n            diff.date = this.date;\n          }\n\n          if (this.date !== this.originalDate) {\n            shouldSubmit = true;\n            diff.date = this.date;\n          }\n\n          if (Object.keys(diff).length === 0 && newTransactionCount > 1) {\n            // Will submit just the ID!\n            diff.transaction_journal_id = originalTransaction.transaction_journal_id;\n            submission.transactions.push(lodashClonedeep(diff));\n            shouldSubmit = true;\n          } else if (Object.keys(diff).length !== 0) {\n            // will submit all:\n            diff.transaction_journal_id = originalTransaction.transaction_journal_id ?? 0;\n            submission.transactions.push(lodashClonedeep(diff));\n            shouldSubmit = true;\n          }\n          // console.log('Should submit index ' + i + '?');\n          // console.log(shouldSubmit);\n        }\n      }\n      this.submitUpdate(submission, shouldSubmit, shouldLinks, shouldUpload);\n    },\n\n    submitData: function (shouldSubmit, submission) {\n      // console.log('submitData');\n      // console.log(submission);\n      if (!shouldSubmit) {\n        // console.log('No need to submit transaction.');\n        return Promise.resolve({});\n      }\n\n      const url = './api/v1/transactions/' + this.groupId;\n      return axios.put(url, submission);\n\n    },\n    handleSubmissionResponse: function (response) {\n      //console.log('handleSubmissionResponse()');\n      // report the transaction is submitted.\n      this.submittedTransaction = true;\n      let journals = [];\n\n      // meanwhile, store the ID and the title in some easy to access variables.\n      if (typeof response.data !== 'undefined') {\n        this.returnedGroupId = parseInt(response.data.data.id) ?? null;\n        this.returnedGroupTitle = null === response.data.data.attributes.group_title ? response.data.data.attributes.transactions[0].description : response.data.data.attributes.group_title;\n\n        let result = response.data.data.attributes.transactions\n        for (let i in result) {\n          if (result.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n            journals.push(parseInt(result[i].transaction_journal_id));\n          }\n        }\n      } else {\n        for (let i in this.transactions) {\n          if (this.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n            journals.push(this.transactions[i].transaction_journal_id);\n          }\n        }\n      }\n      journals = journals.reverse();\n      return Promise.resolve({journals: journals});\n    },\n    submitLinks: function (shouldSubmit) {\n      //console.log('submitLinks()');\n      if (!shouldSubmit) {\n        //console.log('no need!');\n        return Promise.resolve({});\n      }\n      return this.deleteAllOriginalLinks().then(() => this.submitNewLinks());\n    },\n    submitAttachments: function (shouldSubmit, response) {\n      // console.log('submitAttachments');\n      if (!shouldSubmit) {\n        // console.log('no need!');\n        this.submittedAttachments = 1;\n        return Promise.resolve({});\n      }\n      //console.log('Do upload thing!');\n      //console.log(response);\n      let anyAttachments = false;\n      for (let i in this.transactions) {\n        if (this.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let transaction = this.transactions[i];\n          let journalId = transaction.transaction_journal_id;\n          //console.log(journalId);\n          if (typeof response !== 'undefined') {\n            journalId = response.journals[i]\n          }\n\n          let hasAttachments = transaction.selectedAttachments;\n          this.transactions[i].transaction_journal_id = journalId;\n          this.transactions[i].uploadTrigger = true;\n          //console.log('Decided that ' + journalId);\n          //console.log('upload index ' + i);\n          //console.log(hasAttachments);\n          if (hasAttachments) {\n            anyAttachments = true;\n          }\n        }\n      }\n      if (true === anyAttachments) {\n        this.submittedAttachments = 0;\n      }\n    },\n    finaliseSubmission: function () {\n      // console.log('finaliseSubmission (' + this.submittedAttachments + ')');\n      if (0 === this.submittedAttachments) {\n        return;\n      }\n      // console.log('continue (' + this.submittedAttachments + ')');\n      // console.log(this.stayHere);\n      // console.log(this.inError);\n      if (true === this.stayHere && false === this.inError) {\n        //console.log('no error + no changes + no redirect');\n        // show message:\n        this.errorMessage = '';\n        this.warningMessage = '';\n        this.successMessage = this.$t('firefly.transaction_updated_link', {ID: this.groupId, title: this.returnedGroupTitle});\n\n      }\n      // no error + changes + redirect\n      if (false === this.stayHere && false === this.inError) {\n        //console.log('no error + changes + redirect');\n        window.location.href = (window.previousURL ?? '/') + '?transaction_group_id=' + this.groupId + '&message=updated';\n      }\n\n      this.enableSubmit = true;\n      this.submittedAttachments = -1;\n      this.inError = false;\n\n      for (let i in this.transactions) {\n        if (this.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          if (this.transactions.hasOwnProperty(i)) {\n            this.transactions[i].clearTrigger = true;\n          }\n        }\n      }\n    },\n    submitUpdate: function (submission, shouldSubmit, shouldLinks, shouldUpload) {\n      // console.log('submitUpdate()');\n      this.inError = false;\n\n      this.submitData(shouldSubmit, submission)\n          .then(this.handleSubmissionResponse) // error or OK\n          .then(response => {\n                  return Promise.all([\n                                       this.submitLinks(shouldLinks, response),\n                                       this.submitAttachments(shouldUpload, response)]);\n                }\n          )\n          .then(this.finaliseSubmission)\n          .catch(this.handleSubmissionError);\n\n\n      // if (shouldLinks) {\n      //   promises.push(this.submitTransactionLinks())\n      // }\n      // if (!shouldLinks) {\n      //   promises.push(new Promise((resolve) => {\n      //     resolve({});\n      //   }));\n      // }\n      // if (shouldUpload) {\n      //   console.log('Attachments = Respond to promise from shouldSubmit/!shouldSubmit');\n      //   promises.push(submissionPromise.then(result => this.uploadAttachments(result)));\n      // }\n      // if (!shouldUpload) {\n      //   promises.push(new Promise((resolve) => {\n      //     resolve({});\n      //   }));\n      // }\n\n      // all promises fulfilled:\n      // console.log('All promises done, process results?');\n      // Promise.all(promises).then(function (responses) {\n      //   console.log('I believe all ' + promises.length + ' promises fulfilled!');\n      // }).catch(function (errors) {\n      //   console.log('Somebody errored?');\n      // });\n\n      //\n      //\n      //\n      // if (shouldSubmit) {\n      //   console.log('shouldSubmit');\n      //   // do submission:\n      //   // console.log(JSON.stringify(submission));\n      //   // console.log(submission);\n      //   axios.put(url, submission)\n      //       .then(response => {\n      //               // console.log('Response is OK!');\n      //               // report the transaction is submitted.\n      //               this.submittedTransaction = true;\n      //\n      //               // submit links and attachments (can only be done when the transaction is created)\n      //               if (shouldLinks) {\n      //                 console.log('Submit links using return from server:');\n      //                 this.submitTransactionLinks();\n      //               }\n      //               if (shouldUpload) {\n      //                 // console.log('Need to upload.');\n      //                 this.submitAttachments(response.data.data.attributes.transactions);\n      //               }\n      //               // meanwhile, store the ID and the title in some easy to access variables.\n      //               this.returnedGroupId = parseInt(response.data.data.id);\n      //               this.returnedGroupTitle = null === response.data.data.attributes.group_title ? response.data.data.attributes.transactions[0].description : response.data.data.attributes.group_title;\n      //             }\n      //       )\n      //       .catch(error => {\n      //                console.log('error :(');\n      //                console.log(error.response.data);\n      //                // oh noes Firefly III has something to bitch about.\n      //                this.enableSubmit = true;\n      //                // report the transaction is submitted.\n      //                this.submittedTransaction = true;\n      //                // // also report attachments and links are submitted:\n      //                this.submittedAttachments = true;\n      //                this.submittedLinks = true;\n      //                //\n      //                // but report an error because error:\n      //                this.inError = true;\n      //                this.parseErrors(error.response.data);\n      //              }\n      //       );\n      // }\n      // if (!shouldSubmit && shouldLinks) {\n      //   // update links\n      //   console.log('Submit links using whatever is here:');\n      //   this.submitTransactionLinks();\n      // }\n      // if (!shouldSubmit && shouldUpload) {\n      //   // upload\n      //   // console.log('Need to upload.');\n      //   this.submitAttachments(this.transactions);\n      // }\n    },\n    compareLinks: function (array) {\n      let compare = [];\n      for (let i in array) {\n        if (array.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          compare.push(\n              {\n                amount: array[i].amount,\n                currency_code: array[i].currency_code,\n                description: array[i].description,\n                link_type_id: array[i].link_type_id,\n                transaction_group_id: array[i].transaction_group_id,\n                type: array[i].type,\n              }\n          );\n        }\n      }\n      return JSON.stringify(compare);\n    },\n    // uploadAttachments: function (result) {\n// See reference nr. 6\n    //   if (0 === Object.keys(result).length) {\n    //\n    //     for (let i in this.transactions) {\n    //       if (this.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n    //\n    //         //console.log('updateField(' + i + ', transaction_journal_id, ' + result[i].transaction_journal_id + ')');\n    //         this.updateField({index: i, field: 'transaction_journal_id', value: result[i].transaction_journal_id});\n    //       }\n    //     }\n    //     //console.log('Transactions not changed, use original objects.');\n    //   } else {\n    //     //console.log('Transactions changed!');\n    //   }\n    //   this.submittedAttachments = 0;\n    // },\n\n    parseErrors: function (errors) {\n      for (let i in this.transactions) {\n        if (this.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          this.resetErrors({index: i});\n        }\n      }\n      this.successMessage = '';\n      this.errorMessage = this.$t('firefly.errors_submission');\n      if (typeof errors.errors === 'undefined') {\n        this.successMessage = '';\n        this.errorMessage = errors.message;\n      }\n\n      let payload;\n      let transactionIndex;\n      let fieldName;\n\n      // fairly basic way of exploding the error array.\n      for (const key in errors.errors) {\n        // console.log('Error index: \"' + key + '\"');\n        if (errors.errors.hasOwnProperty(key)) {\n          if (key === 'group_title') {\n            this.groupTitleErrors = errors.errors[key];\n            continue;\n          }\n          if (key !== 'group_title') {\n            // lol dumbest way to explode \"transactions.0.something\" ever.\n            transactionIndex = parseInt(key.split('.')[1]);\n\n            fieldName = key.split('.')[2];\n\n            // set error in this object thing.\n            // console.log('The errors in key \"' + key + '\" are');\n            // console.log(errors.errors[key]);\n            switch (fieldName) {\n              case 'amount':\n              case 'description':\n              case 'date':\n              case 'tags':\n                payload = {index: transactionIndex, field: fieldName, errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'budget_id':\n                payload = {index: transactionIndex, field: 'budget', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'bill_id':\n                payload = {index: transactionIndex, field: 'bill', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'piggy_bank_id':\n                payload = {index: transactionIndex, field: 'piggy_bank', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'category_name':\n                payload = {index: transactionIndex, field: 'category', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'source_name':\n              case 'source_id':\n                payload = {index: transactionIndex, field: 'source', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'destination_name':\n              case 'destination_id':\n                payload = {index: transactionIndex, field: 'destination', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'foreign_amount':\n              case 'foreign_currency':\n                payload = {index: transactionIndex, field: 'foreign_amount', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n            }\n          }\n          // unique some things\n          if (typeof this.transactions[transactionIndex] !== 'undefined') {\n            //this.transactions[transactionIndex].errors.source = Array.from(new Set(this.transactions[transactionIndex].errors.source));\n            //this.transactions[transactionIndex].errors.destination = Array.from(new Set(this.transactions[transactionIndex].errors.destination));\n          }\n\n        }\n      }\n    },\n    setTransactionError: function (payload) {\n      this.transactions[payload.index].errors[payload.field] = payload.errors;\n    },\n    resetErrors(payload) {\n      this.transactions[payload.index].errors = lodashClonedeep(getDefaultErrors());\n    },\n\n    deleteOriginalLinks: function (transaction) {\n      let promises = [];\n      for (let i in transaction.links) {\n        if (transaction.links.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = transaction.links[i];\n          let url = '/api/v1/transaction_links/' + current.id;\n          promises.push(axios.delete(url));\n        }\n      }\n      return Promise.all(promises);\n    },\n\n    deleteAllOriginalLinks: function () {\n      //console.log('deleteAllOriginalLinks()');\n      // loop to delete old transaction links.\n      let promises = [];\n      for (let i in this.transactions) {\n        if (this.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          // original transaction present?\n          let currentTransaction = this.transactions[i];\n          let originalTransaction = this.originalTransactions.hasOwnProperty(i) ? this.originalTransactions[i] : {};\n          let newLinks = this.compareLinks(currentTransaction.links);\n          let originalLinks = this.compareLinks(originalTransaction.links);\n          if (newLinks !== originalLinks) {\n            if ('[]' !== originalLinks) {\n              promises.push(this.deleteOriginalLinks(originalTransaction));\n            }\n          } else {\n            promises.push(Promise.resolve({}));\n          }\n        }\n      }\n      return Promise.all(promises);\n    },\n    submitNewLinks: function () {\n      //console.log('submitNewLinks()');\n      let promises = [];\n      for (let i in this.transactions) {\n        if (this.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let currentTransaction = this.transactions[i];\n          for (let ii in currentTransaction.links) {\n            if (currentTransaction.links.hasOwnProperty(ii) && /^0$|^[1-9]\\d*$/.test(ii) && ii <= 4294967294) {\n              let currentLink = currentTransaction.links[ii];\n              let linkObject = {\n                inward_id: currentTransaction.transaction_journal_id,\n                outward_id: currentTransaction.transaction_journal_id,\n                link_type_id: 'something'\n              };\n\n              let parts = currentLink.link_type_id.split('-');\n              linkObject.link_type_id = parts[0];\n              if ('inward' === parts[1]) {\n                linkObject.inward_id = currentLink.transaction_journal_id;\n              }\n              if ('outward' === parts[1]) {\n                linkObject.outward_id = currentLink.transaction_journal_id;\n              }\n              promises.push(axios.post('./api/v1/transaction_links', linkObject));\n            }\n          }\n        }\n      }\n      return Promise.all(promises);\n    },\n    /**\n     * Submit transaction links.\n     */\n    submitTransactionLinksX: function () {\n      //return this.deleteAllOriginalLinks().then(() => this.submitNewLinks());\n    },\n    finalizeSubmitX: function () {\n      // console.log('now in finalizeSubmit()');\n      // console.log('submittedTransaction : ' + this.submittedTransaction);\n      // console.log('submittedLinks       : ' + this.submittedLinks);\n      // console.log('submittedAttachments : ' + this.submittedAttachments);\n\n      if (this.submittedTransaction && this.submittedAttachments && this.submittedLinks) {\n        // console.log('all true');\n        // console.log('inError         = ' + this.inError);\n        // console.log('stayHere        = ' + this.stayHere);\n        // console.log('returnedGroupId = ' + this.returnedGroupId);\n\n        // no error + no changes + no redirect\n        if (true === this.stayHere && false === this.inError && 0 === this.returnedGroupId) {\n          // console.log('no error + no changes + no redirect');\n          // show message:\n          this.errorMessage = '';\n          this.successMessage = '';\n          // maybe nothing changed in post\n          this.warningMessage = this.$t('firefly.transaction_updated_no_changes', {ID: this.returnedGroupId, title: this.returnedGroupTitle});\n        }\n\n        // no error + no changes + redirect\n        if (false === this.stayHere && false === this.inError && 0 === this.returnedGroupId) {\n          // console.log('no error + no changes + redirect');\n          window.location.href = (window.previousURL ?? '/') + '?transaction_group_id=' + this.groupId + '&message=no_change';\n        }\n        // no error + changes + no redirect\n        if (true === this.stayHere && false === this.inError && 0 !== this.returnedGroupId) {\n          // console.log('no error + changes + redirect');\n          // show message:\n          this.errorMessage = '';\n          this.warningMessage = '';\n          // maybe nothing changed in post\n          this.successMessage = this.$t('firefly.transaction_updated_link', {ID: this.returnedGroupId, title: this.returnedGroupTitle});\n        }\n\n        // no error + changes + redirect\n        if (false === this.stayHere && false === this.inError && 0 !== this.returnedGroupId) {\n          // console.log('no error + changes + redirect');\n          window.location.href = (window.previousURL ?? '/') + '?transaction_group_id=' + this.groupId + '&message=updated';\n        }\n        // console.log('end of the line');\n        // enable flags:\n        this.enableSubmit = true;\n        this.submittedTransaction = false;\n        this.submittedLinks = false;\n        this.submittedAttachments = false;\n        this.inError = false;\n\n        // reset attachments (always do this)\n        for (let i in this.transactions) {\n          if (this.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n            if (this.transactions.hasOwnProperty(i)) {\n// See reference nr. 7\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</script>\n\n","import { render } from \"./Edit.vue?vue&type=template&id=7a75420e\"\nimport script from \"./Edit.vue?vue&type=script&lang=js\"\nexport * from \"./Edit.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","/*\n * edit.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport store from \"../../components/store\";\nimport Edit from \"../../components/transactions/Edit\";\nimport Vue from \"vue\";\n\nrequire('../../bootstrap');\n\nVue.config.productionTip = false;\n// i18n\nlet i18n = require('../../i18n');\n\nlet props = {};\nnew Vue({\n            i18n,\n            store,\n            render(createElement) {\n                return createElement(Edit, {props: props});\n            },\n            beforeCreate() {\n                this.$store.commit('initialiseStore');\n                this.$store.dispatch('updateCurrencyPreference');\n            },\n        }).$mount('#transactions_edit');\n","/*\n * transactions.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport function getDefaultErrors() {\n    return {\n        description: [],\n        amount: [],\n        source: [],\n        destination: [],\n        currency: [],\n        foreign_currency: [],\n        foreign_amount: [],\n        date: [],\n        custom_dates: [],\n        budget: [],\n        category: [],\n        bill: [],\n        tags: [],\n        piggy_bank: [],\n        internal_reference: [],\n        external_url: [],\n        notes: [],\n        location: []\n    };\n}\n\nexport function getDefaultTransaction() {\n    return {\n        // basic\n        description: '',\n        transaction_journal_id: 0,\n        // accounts:\n        source_account_id: null,\n        source_account_name: null,\n        source_account_type: null,\n\n        source_account_currency_id: null,\n        source_account_currency_code: null,\n        source_account_currency_symbol: null,\n\n        destination_account_id: null,\n        destination_account_name: null,\n        destination_account_type: null,\n\n        destination_account_currency_id: null,\n        destination_account_currency_code: null,\n        destination_account_currency_symbol: null,\n        attachments: false,\n        selectedAttachments: false,\n        uploadTrigger: false,\n        clearTrigger: false,\n\n        source_account: {\n            id: 0,\n            name: \"\",\n            name_with_balance: \"\",\n            type: \"\",\n            currency_id: 0,\n            currency_name: '',\n            currency_code: '',\n            currency_decimal_places: 2\n        },\n        destination_account: {\n            id: 0,\n            name: \"\",\n            type: \"\",\n            currency_id: 0,\n            currency_name: '',\n            currency_code: '',\n            currency_decimal_places: 2\n        },\n\n        // amount:\n        amount: '',\n        currency_id: 0,\n        foreign_amount: '',\n        foreign_currency_id: 0,\n\n        // meta data\n        category: null,\n        budget_id: 0,\n        bill_id: 0,\n        piggy_bank_id: 0,\n        tags: [],\n\n        // optional date fields (6x):\n        interest_date: null,\n        book_date: null,\n        process_date: null,\n        due_date: null,\n        payment_date: null,\n        invoice_date: null,\n\n        // optional other fields:\n        internal_reference: null,\n        external_url: null,\n        external_id: null,\n        notes: null,\n\n        // transaction links:\n        links: [],\n        // location:\n        zoom_level: null,\n        longitude: null,\n        latitude: null,\n\n        // error handling\n        errors: {},\n    }\n}\n\nexport function toW3CString(date) {\n    // https://gist.github.com/tristanlins/6585391\n    let year = date.getFullYear();\n    let month = date.getMonth();\n    month++;\n    if (month < 10) {\n        month = '0' + month;\n    }\n    let day = date.getDate();\n    if (day < 10) {\n        day = '0' + day;\n    }\n    let hours = date.getHours();\n    if (hours < 10) {\n        hours = '0' + hours;\n    }\n    let minutes = date.getMinutes();\n    if (minutes < 10) {\n        minutes = '0' + minutes;\n    }\n    let seconds = date.getSeconds();\n    if (seconds < 10) {\n        seconds = '0' + seconds;\n    }\n    let offset = -date.getTimezoneOffset();\n    let offsetHours = Math.abs(Math.floor(offset / 60));\n    let offsetMinutes = Math.abs(offset) - offsetHours * 60;\n    if (offsetHours < 10) {\n        offsetHours = '0' + offsetHours;\n    }\n    if (offsetMinutes < 10) {\n        offsetMinutes = '0' + offsetMinutes;\n    }\n    let offsetSign = '+';\n    if (offset < 0) {\n        offsetSign = '-';\n    }\n    return year + '-' + month + '-' + day +\n           'T' + hours + ':' + minutes + ':' + seconds +\n           offsetSign + offsetHours + ':' + offsetMinutes;\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".vue-tags-input{display:block;max-width:100%!important}.ti-input,.vue-tags-input{border-radius:.25rem;width:100%}.ti-input{max-width:100%}.ti-new-tag-input{font-size:1rem}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/transactions/TransactionTags.vue\"],\"names\":[],\"mappings\":\"AAsHA,gBAGE,aAAc,CADd,wBAGF,CAEA,0BAHE,oBAAsB,CAHtB,UAUF,CAJA,UAEE,cAEF,CAEA,kBACE,cACF\",\"sourcesContent\":[\"<!--\\n  - TransactionTags.vue\\n  - Copyright (c) 2021 james@firefly-iii.org\\n  -\\n  - This file is part of Firefly III (https://github.com/firefly-iii).\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n  <div class=\\\"form-group\\\">\\n    <div class=\\\"text-xs d-none d-lg-block d-xl-block\\\">\\n      {{ $t('firefly.tags') }}\\n    </div>\\n    <div class=\\\"input-group\\\">\\n      <vue-tags-input\\n          v-model=\\\"currentTag\\\"\\n          :add-only-from-autocomplete=\\\"false\\\"\\n          :autocomplete-items=\\\"autocompleteItems\\\"\\n          :tags=\\\"tags\\\"\\n          :title=\\\"$t('firefly.tags')\\\"\\n          v-bind:placeholder=\\\"$t('firefly.tags')\\\"\\n          @tags-changed=\\\"newTags => this.tags = newTags\\\"\\n      />\\n    </div>\\n    <span v-if=\\\"errors.length > 0\\\">\\n      <span v-for=\\\"error in errors\\\" class=\\\"text-danger small\\\">{{ error }}<br/></span>\\n    </span>\\n  </div>\\n</template>\\n\\n<script>\\nimport VueTagsInput from \\\"@johmun/vue-tags-input\\\";\\nimport axios from \\\"axios\\\";\\n\\nexport default {\\n  name: \\\"TransactionTags\\\",\\n  components: {\\n    VueTagsInput\\n  },\\n  props: ['value', 'index', 'errors'],\\n  data() {\\n    return {\\n      autocompleteItems: [],\\n      debounce: null,\\n      tags: [],\\n      currentTag: '',\\n      updateTags: true, // the idea is that this is always true, except when the tags-function sets the value.\\n      tagList: this.value,\\n    };\\n  },\\n  created() {\\n    let tags = [];\\n    for (let i in this.value) {\\n      if (this.value.hasOwnProperty(i) && /^0$|^[1-9]\\\\d*$/.test(i) && i <= 4294967294) {\\n        tags.push({text: this.value[i]});\\n      }\\n    }\\n    this.updateTags = false;\\n    this.tags = tags;\\n  },\\n  watch: {\\n    'currentTag': 'initItems',\\n    value: function (value) {\\n      this.tagList = value;\\n    },\\n    tagList: function (value) {\\n      // console.log('watch tagList');\\n        this.$emit('set-field', {field: 'tags', index: this.index, value: value});\\n      this.updateTags = false;\\n      this.tags = value;\\n    },\\n    tags: function (value) {\\n      if (this.updateTags) {\\n        let shortList = [];\\n        for (let key in value) {\\n          if (value.hasOwnProperty(key)) {\\n            shortList.push({text: value[key].text});\\n          }\\n        }\\n        this.tagList = shortList;\\n      }\\n      this.updateTags = true;\\n    }\\n  },\\n  methods: {\\n    initItems() {\\n      if (this.currentTag.length < 2) {\\n        return;\\n      }\\n      const url = document.getElementsByTagName('base')[0].href + `api/v1/autocomplete/tags?query=${this.currentTag}`;\\n\\n      clearTimeout(this.debounce);\\n      this.debounce = setTimeout(() => {\\n        axios.get(url).then(response => {\\n          this.autocompleteItems = response.data.map(item => {\\n            return {text: item.tag};\\n          });\\n        }).catch(() => console.warn('Oh. Something went wrong loading tags.'));\\n      }, 300);\\n    },\\n  },\\n\\n\\n}\\n</script>\\n<style>\\n.vue-tags-input {\\n  width: 100%;\\n  max-width: 100% !important;\\n  display: block;\\n  border-radius: 0.25rem;\\n}\\n\\n.ti-input {\\n  border-radius: 0.25rem;\\n  max-width: 100%;\\n  width: 100%;\\n}\\n\\n.ti-new-tag-input {\\n  font-size: 1rem;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","<!--\n  - Alert.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n<template>\n  <div v-if=\"message.length > 0\" :class=\"'alert alert-' + type + ' alert-dismissible'\">\n    <button aria-hidden=\"true\" class=\"close\" data-dismiss=\"alert\" type=\"button\"></button>\n    <h5>\n      <span v-if=\"'danger' === type\" class=\"icon fas fa-ban\"></span>\n      <span v-if=\"'success' === type\" class=\"icon fas fa-thumbs-up\"></span>\n      <span v-if=\"'danger' === type\">{{ $t(\"firefly.flash_error\") }}</span>\n      <span v-if=\"'success' === type\">{{ $t(\"firefly.flash_success\") }}</span>\n    </h5>\n    <span v-html=\"message\"></span>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"Alert\",\n  props: ['message', 'type']\n}\n</script>","import { render } from \"./Alert.vue?vue&type=template&id=45eef68c\"\nimport script from \"./Alert.vue?vue&type=script&lang=js\"\nexport * from \"./Alert.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - SplitForm.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div :id=\"'split_' + index\" :class=\"'tab-pane' + (0 === index ? ' active' : '')\">\n    <div class=\"row\">\n      <div class=\"col\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <h3 class=\"card-title\">\n              {{ $t('firefly.basic_journal_information') }}\n              <span v-if=\"count > 1\">({{ index + 1 }} / {{ count }}) </span>\n            </h3>\n            <div v-if=\"count>1\" class=\"card-tools\">\n              <button type=\"button\" class=\"btn btn-danger btn-xs\" @click=\"removeTransaction\"><span class=\"fas fa-trash-alt\"></span></button>\n            </div>\n          </div>\n\n          <div class=\"card-body\">\n            <!-- start of body -->\n            <div class=\"row\">\n              <div class=\"col\">\n                <TransactionDescription\n                    v-model=\"transaction.description\"\n                    v-on=\"$listeners\"\n                    :errors=\"transaction.errors.description\"\n                    :index=\"index\"\n                ></TransactionDescription>\n              </div>\n            </div>\n            <!-- source and destination -->\n            <div class=\"row\">\n              <div class=\"col-xl-5 col-lg-5 col-md-10 col-sm-12 col-xs-12\">\n                <!-- SOURCE -->\n                <TransactionAccount\n                    v-model=\"sourceAccount\"\n                    v-on=\"$listeners\"\n                    :destination-allowed-types=\"destinationAllowedTypes\"\n                    :errors=\"transaction.errors.source\"\n                    :index=\"index\"\n                    :source-allowed-types=\"sourceAllowedTypes\"\n                    :transaction-type=\"transactionType\"\n                    direction=\"source\"\n                />\n              </div>\n              <!-- switcharoo! -->\n              <div class=\"col-xl-2 col-lg-2 col-md-2 col-sm-12 text-center d-none d-sm-block\">\n                <SwitchAccount\n                    v-if=\"0 === index && allowSwitch\"\n                    v-on=\"$listeners\"\n                    :index=\"index\"\n                    :transaction-type=\"transactionType\"\n                />\n              </div>\n\n              <!-- destination -->\n              <div class=\"col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12\">\n                <!-- DESTINATION -->\n                <TransactionAccount\n                    v-model=\"destinationAccount\"\n                    v-on=\"$listeners\"\n                    :destination-allowed-types=\"destinationAllowedTypes\"\n                    :errors=\"transaction.errors.destination\"\n                    :index=\"index\"\n                    :transaction-type=\"transactionType\"\n                    :source-allowed-types=\"sourceAllowedTypes\"\n                    direction=\"destination\"\n                />\n              </div>\n            </div>\n\n\n            <!-- amount  -->\n            <div class=\"row\">\n              <div class=\"col-xl-5 col-lg-5 col-md-10 col-sm-12 col-xs-12\">\n                <!-- AMOUNT -->\n                <TransactionAmount\n                    v-on=\"$listeners\"\n                    :amount=\"transaction.amount\"\n                    :destination-currency-symbol=\"this.transaction.destination_account_currency_symbol\"\n                    :errors=\"transaction.errors.amount\"\n                    :index=\"index\"\n                    :source-currency-symbol=\"this.transaction.source_account_currency_symbol\"\n                    :transaction-type=\"this.transactionType\"\n                />\n              </div>\n              <div class=\"col-xl-2 col-lg-2 col-md-2 col-sm-12 text-center d-none d-sm-block\">\n                <TransactionForeignCurrency\n                    v-model=\"transaction.foreign_currency_id\"\n                    v-on=\"$listeners\"\n                    :destination-currency-id=\"this.transaction.destination_account_currency_id\"\n                    :index=\"index\"\n                    :selected-currency-id=\"this.transaction.foreign_currency_id\"\n                    :source-currency-id=\"this.transaction.source_account_currency_id\"\n                    :transaction-type=\"this.transactionType\"\n                />\n              </div>\n              <div class=\"col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12\">\n                <!--\n                The reason that TransactionAmount gets the symbols and\n                TransactionForeignAmount gets the ID's of the currencies is\n                because ultimately TransactionAmount doesn't decide which\n                currency id is submitted to Firefly III.\n                -->\n                <TransactionForeignAmount\n                    v-model=\"transaction.foreign_amount\"\n                    v-on=\"$listeners\"\n                    :destination-currency-id=\"this.transaction.destination_account_currency_id\"\n                    :errors=\"transaction.errors.foreign_amount\"\n                    :index=\"index\"\n                    :selected-currency-id=\"this.transaction.foreign_currency_id\"\n                    :source-currency-id=\"this.transaction.source_account_currency_id\"\n                    :transaction-type=\"this.transactionType\"\n                />\n              </div>\n            </div>\n\n            <!-- dates -->\n            <div class=\"row\">\n              <div class=\"col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12\">\n                <TransactionDate\n                    v-on=\"$listeners\"\n                    :date=\"splitDate\"\n                    :errors=\"transaction.errors.date\"\n                    :index=\"index\"\n                />\n              </div>\n\n              <div class=\"col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 offset-xl-2 offset-lg-2\">\n                <TransactionCustomDates\n                    v-on=\"$listeners\"\n                    :book-date=\"transaction.book_date\"\n                    :custom-fields.sync=\"customFields\"\n                    :due-date=\"transaction.due_date\"\n                    :errors=\"transaction.errors.custom_dates\"\n                    :index=\"index\"\n                    :interest-date=\"transaction.interest_date\"\n                    :invoice-date=\"transaction.invoice_date\"\n                    :payment-date=\"transaction.payment_date\"\n                    :process-date=\"transaction.process_date\"\n                />\n              </div>\n            </div>\n\n            <!-- end of body -->\n          </div>\n        </div>\n      </div>\n    </div> <!-- end of basic card -->\n\n    <!-- card for meta -->\n    <div class=\"row\">\n      <div class=\"col\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <h3 class=\"card-title\">\n              {{ $t('firefly.transaction_journal_meta') }}\n              <span v-if=\"count > 1\">({{ index + 1 }} / {{ count }}) </span>\n            </h3>\n          </div>\n          <div class=\"card-body\">\n            <!-- start of body -->\n            <!-- meta -->\n            <div class=\"row\">\n              <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\">\n                <TransactionBudget\n                    v-if=\"!('Transfer' === transactionType || 'Deposit' === transactionType)\"\n                    v-model=\"transaction.budget_id\"\n                    v-on=\"$listeners\"\n                    :errors=\"transaction.errors.budget\"\n                    :index=\"index\"\n                />\n                <TransactionCategory\n                    v-model=\"transaction.category\"\n                    v-on=\"$listeners\"\n                    :errors=\"transaction.errors.category\"\n                    :index=\"index\"\n                />\n              </div>\n              <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\">\n                <TransactionBill\n                    v-if=\"!('Transfer' === transactionType || 'Deposit' === transactionType)\"\n                    v-model=\"transaction.bill_id\"\n                    v-on=\"$listeners\"\n                    :errors=\"transaction.errors.bill\"\n                    :index=\"index\"\n                />\n                <TransactionTags\n                    v-model=\"transaction.tags\"\n                    v-on=\"$listeners\"\n                    :errors=\"transaction.errors.tags\"\n                    :index=\"index\"\n                />\n                <TransactionPiggyBank\n                    v-if=\"!('Withdrawal' === transactionType || 'Deposit' === transactionType)\"\n                    v-model=\"transaction.piggy_bank_id\"\n                    v-on=\"$listeners\"\n                    :errors=\"transaction.errors.piggy_bank\"\n                    :index=\"index\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- end card for meta -->\n    <!-- card for extra -->\n    <div v-if=\"hasMetaFields\" class=\"row\">\n      <div class=\"col\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <h3 class=\"card-title\">\n              {{ $t('firefly.transaction_journal_extra') }}\n              <span v-if=\"count > 1\">({{ index + 1 }} / {{ count }}) </span>\n            </h3>\n          </div>\n          <div class=\"card-body\">\n            <!-- start of body -->\n            <div class=\"row\">\n              <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\">\n\n                <TransactionInternalReference\n                    v-model=\"transaction.internal_reference\"\n                    v-on=\"$listeners\"\n                    :custom-fields.sync=\"customFields\"\n                    :errors=\"transaction.errors.internal_reference\"\n                    :index=\"index\"\n                />\n\n                <TransactionExternalUrl\n                    v-model=\"transaction.external_url\"\n                    v-on=\"$listeners\"\n                    :custom-fields.sync=\"customFields\"\n                    :errors=\"transaction.errors.external_url\"\n                    :index=\"index\"\n                />\n                <TransactionNotes\n                    v-model=\"transaction.notes\"\n                    v-on=\"$listeners\"\n                    :custom-fields.sync=\"customFields\"\n                    :errors=\"transaction.errors.notes\"\n                    :index=\"index\"\n                />\n              </div>\n              <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\">\n\n                <TransactionAttachments\n                    ref=\"attachments\"\n                    v-model=\"transaction.attachments\"\n                    v-on=\"$listeners\"\n                    :custom-fields.sync=\"customFields\"\n                    :index=\"index\"\n                    :transaction_journal_id=\"transaction.transaction_journal_id\"\n                    :upload-trigger=\"transaction.uploadTrigger\"\n                    :clear-trigger=\"transaction.clearTrigger\"\n                />\n                <TransactionLocation\n                    v-model=\"transaction.location\"\n                    v-on=\"$listeners\"\n                    :custom-fields.sync=\"customFields\"\n                    :errors=\"transaction.errors.location\"\n                    :index=\"index\"\n                />\n\n                <TransactionLinks\n                    v-model=\"transaction.links\"\n                    v-on=\"$listeners\"\n                    :custom-fields.sync=\"customFields\"\n                    :index=\"index\"\n                />\n              </div>\n\n            </div>\n            <!-- end of body -->\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- end card for extra -->\n    <!-- end of card -->\n  </div>\n</template>\n\n<script>\n\nimport TransactionDescription from \"./TransactionDescription\";\nimport TransactionDate from \"./TransactionDate\";\nimport TransactionBudget from \"./TransactionBudget\";\nimport TransactionAccount from \"./TransactionAccount\";\nimport SwitchAccount from \"./SwitchAccount\";\nimport TransactionAmount from \"./TransactionAmount\";\nimport TransactionForeignAmount from \"./TransactionForeignAmount\";\nimport TransactionForeignCurrency from \"./TransactionForeignCurrency\";\nimport TransactionCustomDates from \"./TransactionCustomDates\";\nimport TransactionCategory from \"./TransactionCategory\";\nimport TransactionBill from \"./TransactionBill\";\nimport TransactionTags from \"./TransactionTags\";\nimport TransactionPiggyBank from \"./TransactionPiggyBank\";\nimport TransactionInternalReference from \"./TransactionInternalReference\";\nimport TransactionExternalUrl from \"./TransactionExternalUrl\";\nimport TransactionNotes from \"./TransactionNotes\";\nimport TransactionLinks from \"./TransactionLinks\";\nimport TransactionAttachments from \"./TransactionAttachments\";\nimport SplitPills from \"./SplitPills\";\nimport TransactionLocation from \"./TransactionLocation\";\n\nexport default {\n  name: \"SplitForm\",\n  props: {\n    transaction: {\n      type: Object,\n      required: true\n    },\n    count: {\n      type: Number,\n      required: true\n    },\n    customFields: {\n      type: Object,\n      required: false\n    },\n    index: {\n      type: Number,\n      required: true\n    },\n    date: {\n      type: String,\n      required: true\n    },\n    transactionType: {\n      type: String,\n      required: true\n    },\n    sourceAllowedTypes: {\n      type: Array,\n      required: false,\n      default: function () {\n        return [];\n      }\n    }, // allowed source account types.\n    destinationAllowedTypes: {\n      type: Array,\n      required: false,\n      default: function () {\n        return [];\n      }\n    },\n    // allow switch?\n    allowSwitch: {\n      type: Boolean,\n      required: false,\n      default: false\n    }\n\n  },\n  created() {\n    // console.log('SplitForm(' + this.index + ')');\n  },\n  methods: {\n    removeTransaction: function () {\n      // console.log('Will remove transaction ' + this.index);\n      this.$emit('remove-transaction', {index: this.index});\n    },\n  },\n  computed: {\n    splitDate: function () {\n      return this.date;\n    },\n    sourceAccount: function () {\n      //console.log('computed::sourceAccount(' + this.index + ')');\n      return {\n        id: this.transaction.source_account_id,\n        name: this.transaction.source_account_name,\n        type: this.transaction.source_account_type,\n      };\n      //console.log(JSON.stringify(value));\n      //return value;\n    },\n    destinationAccount: function () {\n      //console.log('computed::destinationAccount(' + this.index + ')');\n      return {\n        id: this.transaction.destination_account_id,\n        name: this.transaction.destination_account_name,\n        type: this.transaction.destination_account_type,\n      };\n      //console.log(JSON.stringify(value));\n      //return value;\n    },\n    hasMetaFields: function () {\n      let requiredFields = [\n        'internal_reference',\n        'notes',\n        'attachments',\n        'external_uri',\n        'location',\n        'links',\n      ];\n      for (let field in this.customFields) {\n        if (this.customFields.hasOwnProperty(field)) {\n          if (requiredFields.includes(field)) {\n            if (true === this.customFields[field]) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    }\n  },\n  components: {\n    TransactionLocation,\n    SplitPills,\n    TransactionAttachments,\n    TransactionNotes,\n    TransactionExternalUrl,\n    TransactionInternalReference,\n    TransactionPiggyBank,\n    TransactionTags,\n    TransactionLinks,\n    TransactionBill,\n    TransactionCategory,\n    TransactionCustomDates,\n    TransactionForeignCurrency,\n    TransactionForeignAmount,\n    TransactionAmount,\n    SwitchAccount,\n    TransactionAccount,\n    TransactionBudget,\n    TransactionDescription,\n    TransactionDate\n  },\n}\n</script>\n","<!--\n  - TransactionDescription.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <vue-typeahead-bootstrap\n        v-model=\"description\"\n        :data=\"descriptions\"\n        :inputClass=\"errors.length > 0 ? 'is-invalid' : ''\"\n        :minMatchingChars=\"3\"\n        :placeholder=\"$t('firefly.description')\"\n        :serializer=\"item => item.description\"\n        :showOnFocus=true\n        autofocus\n        inputName=\"description[]\"\n        @input=\"lookupDescription\"\n    >\n      <template slot=\"append\">\n        <div class=\"input-group-append\">\n          <button class=\"btn btn-outline-secondary\" tabindex=\"-1\" type=\"button\" v-on:click=\"clearDescription\"><span class=\"far fa-trash-alt\"></span></button>\n        </div>\n      </template>\n    </vue-typeahead-bootstrap>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\n\nimport VueTypeaheadBootstrap from 'vue-typeahead-bootstrap';\nimport {debounce} from \"lodash\";\n\nexport default {\n  props: ['index', 'value', 'errors'],\n  components: {VueTypeaheadBootstrap},\n  name: \"TransactionDescription\",\n  data() {\n    return {\n      descriptions: [],\n      initialSet: [],\n      description: this.value,\n    }\n  },\n  created() {\n    axios.get(this.getACURL(''))\n        .then(response => {\n          this.descriptions = response.data;\n          this.initialSet = response.data;\n        });\n  },\n\n  methods: {\n    clearDescription: function () {\n      this.description = '';\n    },\n    getACURL: function (query) {\n      // update autocomplete URL:\n      return document.getElementsByTagName('base')[0].href + 'api/v1/autocomplete/transactions?query=' + query;\n    },\n    lookupDescription: debounce(function () {\n      // update autocomplete URL:\n      axios.get(this.getACURL(this.value))\n          .then(response => {\n            this.descriptions = response.data;\n          })\n    }, 300)\n  },\n  watch: {\n    value: function (value) {\n      this.description = value;\n    },\n    description: function (value) {\n      this.$emit('set-field', {field: 'description', index: this.index, value: value});\n    }\n  },\n}\n</script>\n","import { render } from \"./TransactionDescription.vue?vue&type=template&id=375a57e5\"\nimport script from \"./TransactionDescription.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionDescription.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionDate.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\" v-if=\"0===index\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.date_and_time') }}\n    </div>\n    <div class=\"input-group\">\n      <input\n          ref=\"date\"\n          v-model=\"dateStr\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"dateStr\"\n          :title=\"$t('firefly.date')\"\n          autocomplete=\"off\"\n          name=\"date[]\"\n          type=\"date\"\n      >\n      <input\n          ref=\"time\"\n          v-model=\"timeStr\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"timeStr\"\n          :title=\"$t('firefly.time')\"\n          autocomplete=\"off\"\n          name=\"time[]\"\n          type=\"time\"\n      >\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n    <span class=\"text-muted small\">{{ localTimeZone }}:{{ systemTimeZone }}</span>\n  </div>\n</template>\n\n<script>\n\nimport {mapGetters} from \"vuex\";\n\nexport default {\n  props: ['index', 'errors', 'date'],\n  name: \"TransactionDate\",\n  created() {\n    this.localTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    this.systemTimeZone = this.timezone;\n    // console.log('TransactionDate: ' + this.date);\n    // split date and time:\n    let parts = this.date.split('T');\n    this.dateStr = parts[0];\n    this.timeStr = parts[1];\n\n  },\n  data() {\n    return {\n      localDate: this.date,\n      localTimeZone: '',\n      systemTimeZone: '',\n      timeStr: '',\n      dateStr: '',\n    }\n  },\n  watch: {\n    dateStr: function (value) {\n      this.$emit('set-date', {date: value + 'T' + this.timeStr});\n    },\n    timeStr: function (value) {\n      this.$emit('set-date', {date: this.dateStr + 'T' + value});\n    }\n  },\n  methods: {},\n  computed: {\n    ...mapGetters('root', ['timezone']),\n  }\n}\n</script>\n","import { render } from \"./TransactionDate.vue?vue&type=template&id=67a4f77b\"\nimport script from \"./TransactionDate.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionDate.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionBudget.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.budget') }}\n    </div>\n    <div class=\"input-group\">\n      <select\n          ref=\"budget\"\n          v-model=\"budget\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :title=\"$t('firefly.budget')\"\n          autocomplete=\"off\"\n          name=\"budget_id[]\"\n      >\n        <option v-for=\"budget in this.budgetList\" :label=\"budget.name\" :value=\"budget.id\">{{ budget.name }}</option>\n      </select>\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['index', 'value', 'errors'],\n  name: \"TransactionBudget\",\n  data() {\n    return {\n      budgetList: [],\n      budget: this.value,\n      emitEvent: true\n    }\n  },\n  created() {\n    this.collectData();\n  },\n  methods: {\n    collectData() {\n      this.budgetList.push(\n          {\n            id: 0,\n            name: this.$t('firefly.no_budget'),\n          }\n      );\n      this.getBudgets();\n    },\n    getBudgets() {\n      axios.get('./api/v1/budgets')\n          .then(response => {\n                  this.parseBudgets(response.data);\n                }\n          );\n    },\n    parseBudgets(data) {\n      for (let key in data.data) {\n        if (data.data.hasOwnProperty(key) && /^0$|^[1-9]\\d*$/.test(key) && key <= 4294967294) {\n          let current = data.data[key];\n          if(!current.attributes.active) {\n            continue;\n          }\n          this.budgetList.push(\n              {\n                id: parseInt(current.id),\n                name: current.attributes.name\n              }\n          );\n        }\n      }\n    },\n  },\n  watch: {\n    value: function (value) {\n      this.emitEvent = false;\n      this.budget = value;\n    },\n    budget: function (value) {\n      this.$emit('set-field', {field: 'budget_id', index: this.index, value: value});\n    }\n  },\n}\n</script>\n","import { render } from \"./TransactionBudget.vue?vue&type=template&id=54257463\"\nimport script from \"./TransactionBudget.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionBudget.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionAccount.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div v-if=\"visible\" class=\"text-xs d-none d-lg-block d-xl-block\">\n      <span v-if=\"0 === this.index\">{{ $t('firefly.' + this.direction + '_account') }}</span>\n      <span v-if=\"this.index > 0\" class=\"text-warning\">{{ $t('firefly.first_split_overrules_' + this.direction) }}</span>\n    </div>\n    <div v-if=\"!visible\" class=\"text-xs d-none d-lg-block d-xl-block\">\n      &nbsp;\n    </div>\n    <vue-typeahead-bootstrap\n        v-if=\"visible\"\n        v-model=\"accountName\"\n        :data=\"accounts\"\n        :inputClass=\"errors.length > 0 ? 'is-invalid' : ''\"\n        :inputName=\"direction + '[]'\"\n        :minMatchingChars=\"3\"\n        :placeholder=\"$t('firefly.' + direction + '_account')\"\n        :serializer=\"item => item.name_with_balance\"\n        :showOnFocus=true\n        aria-autocomplete=\"none\"\n        autocomplete=\"off\"\n        @hit=\"userSelectedAccount\"\n        @input=\"lookupAccount\"\n    >\n\n      <template slot=\"suggestion\" slot-scope=\"{ data, htmlText }\">\n        <div :title=\"data.type\" class=\"d-flex\">\n          <span v-html=\"htmlText\"></span><br>\n        </div>\n      </template>\n      <template slot=\"append\">\n        <div class=\"input-group-append\">\n          <button class=\"btn btn-outline-secondary\" tabindex=\"-1\" type=\"button\" v-on:click=\"clearAccount\"><span class=\"far fa-trash-alt\"></span></button>\n        </div>\n      </template>\n    </vue-typeahead-bootstrap>\n    <div v-if=\"!visible\" class=\"form-control-static\">\n      <span class=\"small text-muted\"><em>{{ $t('firefly.first_split_decides') }}</em></span>\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n      </span>\n  </div>\n</template>\n\n<script>\n\nimport VueTypeaheadBootstrap from 'vue-typeahead-bootstrap';\nimport {debounce} from 'lodash';\n\nexport default {\n  name: \"TransactionAccount\",\n  components: {VueTypeaheadBootstrap},\n  props: {\n    index: {\n      type: Number,\n    },\n    direction: {\n      type: String,\n    },\n    value: {\n      type: Object,\n      default: () => ({})\n    },\n    errors: {\n      type: Array,\n      default: () => ([])\n    },\n    sourceAllowedTypes: {\n      type: Array,\n      default: () => ([])\n    },\n    destinationAllowedTypes: {\n      type: Array,\n      default: () => ([])\n    },\n    transactionType: {\n      type: String,\n      default: 'any'\n    },\n  },\n  data() {\n    return {\n      query: '',\n      accounts: [],\n      accountTypes: [],\n      initialSet: [],\n      selectedAccount: {},\n      accountName: '',\n      selectedAccountTrigger: false,\n    }\n  },\n  created() {\n    this.accountName = this.value.name ?? '';\n    // console.log('TransactionAccount::created() direction=' + this.direction + ', type=' + this.transactionType + ' , name=\"' + this.accountName + '\"');\n    this.selectedAccountTrigger = true;\n  },\n  methods: {\n    getACURL: function (types, query) {\n      return './api/v1/autocomplete/accounts?types=' + types.join(',') + '&query=' + query;\n    },\n    userSelectedAccount: function (event) {\n      // console.log('userSelectedAccount!');\n      // console.log('To prevent invalid propogation, set selectedAccountTrigger = true');\n      this.selectedAccountTrigger = true;\n      this.selectedAccount = event;\n    },\n    systemReturnedAccount: function (event) {\n      //console.log('systemReturnedAccount!');\n      //console.log('To prevent invalid propogation, set selectedAccountTrigger = false');\n      this.selectedAccountTrigger = false;\n      this.selectedAccount = event;\n    },\n    clearAccount: function () {\n      //// console.log('TransactionAccount::clearAccount()');\n      this.accounts = this.initialSet;\n      //this.account = {name: '', type: 'no_type', id: null, currency_id: null, currency_code: null, currency_symbol: null};\n      this.accountName = '';\n    },\n    lookupAccount: debounce(function () {\n      //// console.log('TransactionAccount::lookupAccount()');\n      //// console.log('In lookupAccount()');\n      if (0 === this.accountTypes.length) {\n        // set the types from the default types for this direction:\n        this.accountTypes = 'source' === this.direction ? this.sourceAllowedTypes : this.destinationAllowedTypes;\n      }\n      // // console.log(this.direction + ': Will search for types:');\n      // // console.log(this.accountTypes);\n\n      // update autocomplete URL:\n      axios.get(this.getACURL(this.accountTypes, this.accountName))\n          .then(response => {\n            //// console.log('Got a response!');\n            this.accounts = response.data;\n            //// console.log(response.data);\n          })\n    }, 300),\n\n    createInitialSet: function () {\n      //// console.log('TransactionAccount::createInitialSet()');\n      let types = this.sourceAllowedTypes;\n      if ('destination' === this.direction) {\n        types = this.destinationAllowedTypes;\n      }\n      // // console.log('createInitialSet() direction=' + this.direction + ' resets to these types:');\n      // // console.log(types);\n\n      axios.get(this.getACURL(types, ''))\n          .then(response => {\n            this.accounts = response.data;\n            this.initialSet = response.data;\n          });\n    }\n  },\n  watch: {\n    sourceAllowedTypes: function (value) {\n      //// console.log('TransactionAccount::sourceAllowedTypes()');\n      // // console.log(this.direction + ' account noticed change in sourceAllowedTypes');\n      // // console.log(value);\n      this.createInitialSet();\n    },\n    destinationAllowedTypes: function (value) {\n      //// console.log('TransactionAccount::destinationAllowedTypes()');\n      // // console.log(this.direction + ' account noticed change in destinationAllowedTypes');\n      // // console.log(value);\n      this.createInitialSet();\n    },\n    /**\n     * Triggered when the user selects an account from the auto-complete.\n     *\n     * @param value\n     */\n    selectedAccount: function (value) {\n      //console.log('TransactionAccount::watch selectedAccount()');\n      // console.log(value);\n      if (true === this.selectedAccountTrigger) {\n        // console.log('$emit alles!');\n        this.$emit('set-account',\n                   {\n                     index: this.index,\n                     direction: this.direction,\n                     id: value.id,\n                     type: value.type,\n                     name: value.name,\n                     currency_id: value.currency_id,\n                     currency_code: value.currency_code,\n                     currency_symbol: value.currency_symbol,\n                   }\n        );\n        //console.log('watch::selectedAccount() will now set accountName because selectedAccountTrigger = true');\n        this.accountName = value.name;\n      }\n      if (false === this.selectedAccountTrigger) {\n        //console.log('watch::selectedAccount() will NOT set accountName because selectedAccountTrigger = false');\n      }\n      if (false === this.selectedAccountTrigger && this.accountName !== value.name && null !== value.name) {\n        //console.log('watch::selectedAccount() will set accountName. selectedAccountTrigger = false but name is different (\"' + this.accountName + '\" > \"' + value.name + '\")');\n        this.selectedAccountTrigger = true;\n        this.accountName = value.name;\n      }\n\n    },\n    accountName: function (value) {\n      // console.log('now at watch accountName(\"' + value + '\")');\n      // console.log(this.selectedAccountTrigger);\n      if (true === this.selectedAccountTrigger) {\n        // console.log('Do nothing because selectedAccountTrigger = true');\n      }\n      if (false === this.selectedAccountTrigger) {\n        // console.log('$emit name from watch::accountName() because selectedAccountTrigger = false');\n        this.$emit('set-account',\n                   {\n                     index: this.index,\n                     direction: this.direction,\n                     id: null,\n                     type: null,\n                     name: value,\n                     currency_id: null,\n                     currency_code: null,\n                     currency_symbol: null,\n                   }\n        );\n        // this.account = {name: value, type: null, id: null, currency_id: null, currency_code: null, currency_symbol: null};\n      }\n      // console.log('set selectedAccountTrigger to be FALSE');\n      this.selectedAccountTrigger = false;\n    },\n    value: function (value) {\n      //console.log('TransactionAccount(' + this.index + ')::watch value(' + JSON.stringify(value) + ')');\n      this.systemReturnedAccount(value);\n\n      // // console.log('Index ' + this.index + ' nwAct: ', value);\n      // // console.log(this.direction + ' account overruled by external forces.');\n      // // console.log(value);\n      //this.account = value;\n      //this.selectedAccountTrigger = true;\n      // this.accountName = value.name ?? '';\n      // if(null !== value.id) {\n      // return;\n      // }\n      // this.selectedAccountTrigger = true;\n      //\n      // // console.log('Set selectedAccountTrigger = true');\n      // this.selectedAccount = value;\n    }\n  },\n  computed: {\n    accountKey: {\n      get() {\n        return 'source' === this.direction ? 'source_account' : 'destination_account';\n      }\n    },\n    visible: {\n      get() {\n        // index  0 is always visible:\n        if (0 === this.index) {\n          return true;\n        }\n        // // console.log('Direction of account ' + this.index + ' is ' + this.direction + '(' + this.transactionType + ')');\n        // // console.log(this.transactionType);\n        if ('source' === this.direction) {\n          return 'any' === this.transactionType || 'Deposit' === this.transactionType || typeof this.transactionType === 'undefined';\n        }\n        if ('destination' === this.direction) {\n          return 'any' === this.transactionType || 'Withdrawal' === this.transactionType || typeof this.transactionType === 'undefined';\n        }\n        return false;\n      }\n    }\n  }\n}\n</script>\n","import { render } from \"./TransactionAccount.vue?vue&type=template&id=49893d47\"\nimport script from \"./TransactionAccount.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionAccount.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - SwitchAccount.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      <span v-if=\"'any' !== this.transactionType\" class=\"text-muted\">\n        {{ $t('firefly.' + this.transactionType) }}\n      </span>\n      <span v-if=\"'any' === this.transactionType\" class=\"text-muted\">&nbsp;</span>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"SwitchAccount\",\n  props: ['index', 'transactionType'],\n  methods: {\n    // switchAccounts() {\n    //   this.$emit('switch-accounts', this.index);\n    // }\n  }\n}\n</script>\n\n","import { render } from \"./SwitchAccount.vue?vue&type=template&id=7ccf55e2\"\nimport script from \"./SwitchAccount.vue?vue&type=script&lang=js\"\nexport * from \"./SwitchAccount.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionAmount.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs\">{{ $t('firefly.amount') }}</div>\n    <div class=\"input-group\">\n      <div v-if=\"currencySymbol\" class=\"input-group-prepend\">\n        <div class=\"input-group-text\">{{ currencySymbol }}</div>\n      </div>\n      <input\n          v-model=\"transactionAmount\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"$t('firefly.amount')\"\n          :title=\"$t('firefly.amount')\"\n          autocomplete=\"off\"\n          name=\"amount[]\"\n          type=\"number\"\n          step=\"any\"\n      >\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: \"TransactionAmount\",\n  props: {\n    index: {\n      type: Number,\n      default: 0,\n      required: true\n    },\n    errors: {},\n    amount: {},\n    transactionType: {},\n    sourceCurrencySymbol: {},\n    destinationCurrencySymbol: {},\n    fractionDigits: {\n      default: 2,\n      required: false\n    },\n  },\n  created() {\n    if ('' !== this.amount) {\n      this.emitEvent = false;\n      this.transactionAmount = this.formatNumber(this.amount);\n    }\n  },\n  methods: {\n    formatNumber(str) {\n      return parseFloat(str).toFixed(this.fractionDigits);\n    }\n  },\n  data() {\n    return {\n      transactionAmount: this.amount,\n      currencySymbol: null,\n      srcCurrencySymbol: this.sourceCurrencySymbol,\n      dstCurrencySymbol: this.destinationCurrencySymbol,\n      emitEvent: true\n    }\n  },\n  watch: {\n    transactionAmount: function (value) {\n      if (true === this.emitEvent) {\n        this.$emit('set-field', {field: 'amount', index: this.index, value: value});\n      }\n      this.emitEvent = true;\n    },\n    amount: function (value) {\n      this.transactionAmount = value;\n    },\n    sourceCurrencySymbol: function (value) {\n      this.srcCurrencySymbol = value;\n    },\n    destinationCurrencySymbol: function (value) {\n      this.dstCurrencySymbol = value;\n    },\n    transactionType: function (value) {\n      switch (value) {\n        case 'Transfer':\n        case 'Withdrawal':\n          this.currencySymbol = this.srcCurrencySymbol;\n          break;\n        case 'Deposit':\n          this.currencySymbol = this.dstCurrencySymbol;\n      }\n    },\n  },\n}\n</script>\n\n","import { render } from \"./TransactionAmount.vue?vue&type=template&id=0b4c09d0\"\nimport script from \"./TransactionAmount.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionAmount.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionForeignAmount.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <!-- FOREIGN AMOUNT -->\n  <div v-if=\"isVisible\" class=\"form-group\">\n    <div class=\"text-xs\">{{ $t('form.foreign_amount') }}</div>\n    <div class=\"input-group\">\n      <input\n          v-model=\"amount\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"$t('form.foreign_amount')\"\n          :title=\"$t('form.foreign_amount')\"\n          autocomplete=\"off\"\n          name=\"foreign_amount[]\"\n          type=\"number\"\n      >\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"TransactionForeignAmount\",\n  props: {\n    index: {},\n    errors: {},\n    value: {},\n    transactionType: {},\n    sourceCurrencyId: {},\n    destinationCurrencyId: {},\n    fractionDigits: {\n      type: Number,\n      default: 2\n    }\n  },\n  data() {\n    return {\n      amount: this.value,\n      emitEvent: true\n    }\n  },\n  created() {\n    if ('' !== this.amount) {\n      this.emitEvent = false;\n      this.amount = this.formatNumber(this.amount);\n    }\n  },\n  methods: {\n    formatNumber(str) {\n      return parseFloat(str).toFixed(this.fractionDigits);\n    }\n  },\n  watch: {\n    amount: function (value) {\n      if (true === this.emitEvent) {\n        this.$emit('set-field', {field: 'foreign_amount', index: this.index, value: value});\n      }\n      this.emitEvent = true;\n    },\n    value: function (value) {\n      this.amount = value;\n\n\n    }\n  },\n  computed: {\n    isVisible: {\n      get() {\n        return !('transfer' === this.transactionType.toLowerCase() && parseInt(this.sourceCurrencyId) === parseInt(this.destinationCurrencyId));\n      }\n    },\n  }\n}\n</script>\n\n","import { render } from \"./TransactionForeignAmount.vue?vue&type=template&id=c2e81206\"\nimport script from \"./TransactionForeignAmount.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionForeignAmount.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionForeignCurrency.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <!-- FOREIGN Currency -->\n  <div v-if=\"isVisible\" class=\"form-group\">\n    <div class=\"text-xs\">&nbsp;</div>\n    <div class=\"input-group\">\n      <select v-model=\"selectedCurrency\" class=\"form-control\" name=\"foreign_currency_id[]\">\n        <option v-for=\"currency in selectableCurrencies\" :label=\"currency.name\" :value=\"currency.id\">{{ currency.name }}</option>\n      </select>\n    </div>\n  </div>\n</template>\n<script>\n\nexport default {\n  name: \"TransactionForeignCurrency\",\n  props: [\n    'index',\n    'transactionType',\n    'sourceCurrencyId',\n    'destinationCurrencyId',\n    'selectedCurrencyId',\n    'value'\n  ],\n  data() {\n    return {\n      selectedCurrency: this.value,\n      allCurrencies: [],\n      selectableCurrencies: [],\n      dstCurrencyId: this.destinationCurrencyId,\n      srcCurrencyId: this.sourceCurrencyId,\n      lockedCurrency: 0,\n      emitEvent: true\n    }\n  },\n  watch: {\n    value: function (value) {\n      this.selectedCurrency = value;\n    },\n    sourceCurrencyId: function (value) {\n      // console.log('Watch sourceCurrencyId');\n      this.srcCurrencyId = value;\n      this.lockCurrency();\n    },\n    destinationCurrencyId: function (value) {\n      // console.log('Watch destinationCurrencyId');\n      this.dstCurrencyId = value;\n      this.lockCurrency();\n    },\n    selectedCurrency: function (value) {\n      this.$emit('set-field', {field: 'foreign_currency_id', index: this.index, value: value});\n    },\n    transactionType: function (value) {\n      this.lockCurrency();\n    },\n  },\n  created: function () {\n    // console.log('Created TransactionForeignCurrency');\n    this.getAllCurrencies();\n  },\n  methods: {\n    lockCurrency: function () {\n      // console.log('Lock currency (' + this.transactionType + ')');\n      this.lockedCurrency = 0;\n      if ('transfer' === this.transactionType.toLowerCase()) {\n        // console.log('IS a transfer!');\n        this.lockedCurrency = parseInt(this.dstCurrencyId);\n        this.selectedCurrency = parseInt(this.dstCurrencyId);\n      }\n      this.filterCurrencies();\n    },\n    getAllCurrencies: function () {\n      axios.get('./api/v1/autocomplete/currencies')\n          .then(response => {\n                  this.allCurrencies = response.data;\n                  this.filterCurrencies();\n                }\n          );\n\n    },\n    filterCurrencies() {\n      // console.log('filterCurrencies');\n      // console.log(this.lockedCurrency);\n      // if a currency is locked only that currency can (and must) be selected:\n      if (0 !== this.lockedCurrency) {\n        // console.log('Here we are');\n        for (let key in this.allCurrencies) {\n          if (this.allCurrencies.hasOwnProperty(key) && /^0$|^[1-9]\\d*$/.test(key) && key <= 4294967294) {\n            let current = this.allCurrencies[key];\n            if (parseInt(current.id) === this.lockedCurrency) {\n              this.selectableCurrencies = [current];\n              this.selectedCurrency = current.id;\n            }\n          }\n        }\n        // if source + dest ID are the same, skip the whole field.\n\n        return;\n      }\n\n      this.selectableCurrencies = [\n        {\n          \"id\": 0,\n          \"name\": this.$t('firefly.no_currency')\n        }\n      ];\n      for (let key in this.allCurrencies) {\n        if (this.allCurrencies.hasOwnProperty(key) && /^0$|^[1-9]\\d*$/.test(key) && key <= 4294967294) {\n          let current = this.allCurrencies[key];\n          this.selectableCurrencies.push(current);\n        }\n      }\n    }\n  },\n  computed: {\n    isVisible: function () {\n      return !('transfer' === this.transactionType.toLowerCase() && parseInt(this.srcCurrencyId) === parseInt(this.dstCurrencyId));\n    }\n  }\n}\n</script>\n\n","import { render } from \"./TransactionForeignCurrency.vue?vue&type=template&id=7826af29\"\nimport script from \"./TransactionForeignCurrency.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionForeignCurrency.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionCustomDates.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div>\n    <div v-for=\"(enabled, name) in availableFields\" class=\"form-group\">\n      <div v-if=\"enabled && isDateField(name)\" class=\"text-xs d-none d-lg-block d-xl-block\">\n        {{ $t('form.' + name) }}\n      </div>\n      <div v-if=\"enabled && isDateField(name)\" class=\"input-group\">\n        <input\n            :ref=\"name\"\n            :name=\"name + '[]'\"\n            :placeholder=\"$t('form.' + name)\"\n            :title=\"$t('form.' + name)\"\n            :value=\"getFieldValue(name)\"\n            autocomplete=\"off\"\n            class=\"form-control\"\n            type=\"date\"\n            @change=\"setFieldValue($event, name)\"\n        >\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"TransactionCustomDates\",\n  props: [\n    'index',\n    'errors',\n    'customFields',\n    'interestDate',\n    'bookDate',\n    'processDate',\n    'dueDate',\n    'paymentDate',\n    'invoiceDate'\n  ],\n  data() {\n    return {\n      dateFields: ['interest_date', 'book_date', 'process_date', 'due_date', 'payment_date', 'invoice_date'],\n      availableFields: this.customFields,\n      dates: {\n        interest_date: this.interestDate,\n        book_date: this.bookDate,\n        process_date: this.processDate,\n        due_date: this.dueDate,\n        payment_date: this.paymentDate,\n        invoice_date: this.invoiceDate,\n      }\n      ,\n    }\n  },\n  watch: {\n    customFields: function (value) {\n      this.availableFields = value;\n    },\n    interestDate: function (value) {\n      this.dates.interest_date = value;\n    },\n    bookDate: function (value) {\n      this.dates.book_date = value;\n    },\n    processDate: function (value) {\n      this.dates.process_date = value;\n    },\n    dueDate: function (value) {\n      this.dates.due_date = value;\n    },\n    paymentDate: function (value) {\n      this.dates.payment_date = value;\n    },\n    invoiceDate: function (value) {\n      this.dates.invoice_date = value;\n    },\n  },\n  methods: {\n    isDateField: function (name) {\n      return this.dateFields.includes(name)\n    },\n    getFieldValue(field) {\n      return this.dates[field] ?? '';\n    },\n    setFieldValue(event, field) {\n      this.$emit('set-field', {field: field, index: this.index, value: event.target.value});\n    },\n  }\n}\n</script>\n","import { render } from \"./TransactionCustomDates.vue?vue&type=template&id=728c6420\"\nimport script from \"./TransactionCustomDates.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionCustomDates.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionCategory.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.category') }}\n    </div>\n\n    <vue-typeahead-bootstrap\n        v-model=\"category\"\n        :data=\"categories\"\n        :inputClass=\"errors.length > 0 ? 'is-invalid' : ''\"\n        :minMatchingChars=\"3\"\n        :placeholder=\"$t('firefly.category')\"\n        :serializer=\"item => item.name\"\n        :showOnFocus=true\n        inputName=\"category[]\"\n        @hit=\"selectedCategory = $event\"\n        @input=\"lookupCategory\"\n    >\n      <template slot=\"append\">\n        <div class=\"input-group-append\">\n          <button class=\"btn btn-outline-secondary\" tabindex=\"-1\" type=\"button\" v-on:click=\"clearCategory\"><span class=\"far fa-trash-alt\"></span></button>\n        </div>\n      </template>\n    </vue-typeahead-bootstrap>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\n\nimport VueTypeaheadBootstrap from 'vue-typeahead-bootstrap';\nimport {debounce} from \"lodash\";\n\nexport default {\n  props: ['value', 'index', 'errors'],\n  components: {VueTypeaheadBootstrap},\n  name: \"TransactionCategory\",\n  data() {\n    return {\n      categories: [],\n      initialSet: [],\n      category: this.value\n    }\n  },\n\n  created() {\n    //console.log('Created category(' + this.index + ') \"' + this.value + '\"');\n    // initial list of accounts:\n    axios.get(this.getACURL(''))\n        .then(response => {\n          this.categories = response.data;\n          this.initialSet = response.data;\n        });\n  },\n\n  methods: {\n    clearCategory: function () {\n      this.category = '';\n    },\n    getACURL: function (query) {\n      // update autocomplete URL:\n      // console.log('getACURL(\"' + query + '\")');\n      return document.getElementsByTagName('base')[0].href + 'api/v1/autocomplete/categories?query=' + query;\n    },\n    lookupCategory: debounce(function () {\n      // update autocomplete URL:\n      //console.log('Do a search for \"'+this.category+'\"');\n      axios.get(this.getACURL(this.category))\n          .then(response => {\n            this.categories = response.data;\n          })\n    }, 300)\n  },\n  watch: {\n    value: function (value) {\n      this.category = value ?? '';\n    },\n    category: function (value) {\n      this.$emit('set-field', {field: 'category', index: this.index, value: value});\n    }\n  },\n  computed: {\n    selectedCategory: {\n      get() {\n        return this.categories[this.index].name;\n      },\n      set(value) {\n        this.category = value.name;\n      }\n    }\n  }\n}\n</script>","import { render } from \"./TransactionCategory.vue?vue&type=template&id=7b821709\"\nimport script from \"./TransactionCategory.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionCategory.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionBill.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.bill') }}\n    </div>\n    <div class=\"input-group\">\n      <select\n          ref=\"bill\"\n          v-model=\"bill\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :title=\"$t('firefly.bill')\"\n          autocomplete=\"off\"\n          name=\"bill_id[]\"\n      >\n        <option v-for=\"bill in this.billList\" :label=\"bill.name\" :value=\"bill.id\">{{ bill.name }}</option>\n\n      </select>\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['value', 'index', 'errors'],\n  name: \"TransactionBill\",\n  data() {\n    return {\n      billList: [],\n      bill: this.value,\n    }\n  },\n  created() {\n    this.collectData();\n  },\n  methods: {\n    collectData() {\n      this.billList.push(\n          {\n            id: 0,\n            name: this.$t('firefly.no_bill'),\n          }\n      );\n      this.getBills();\n    },\n    getBills() {\n      axios.get('./api/v1/bills')\n          .then(response => {\n                  this.parseBills(response.data);\n                }\n          );\n    },\n    parseBills(data) {\n      for (let key in data.data) {\n        if (data.data.hasOwnProperty(key) && /^0$|^[1-9]\\d*$/.test(key) && key <= 4294967294) {\n          let current = data.data[key];\n          this.billList.push(\n              {\n                id: parseInt(current.id),\n                name: current.attributes.name\n              }\n          );\n        }\n      }\n    },\n  },\n  watch: {\n    value: function (value) {\n      this.emitEvent = false;\n      this.bill = value;\n    },\n    bill: function (value) {\n        this.$emit('set-field', {field: 'bill_id', index: this.index, value: value});\n    }\n  },\n}\n</script>\n\n","import { render } from \"./TransactionBill.vue?vue&type=template&id=e612fb9c\"\nimport script from \"./TransactionBill.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionBill.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionTags.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.tags') }}\n    </div>\n    <div class=\"input-group\">\n      <vue-tags-input\n          v-model=\"currentTag\"\n          :add-only-from-autocomplete=\"false\"\n          :autocomplete-items=\"autocompleteItems\"\n          :tags=\"tags\"\n          :title=\"$t('firefly.tags')\"\n          v-bind:placeholder=\"$t('firefly.tags')\"\n          @tags-changed=\"newTags => this.tags = newTags\"\n      />\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\nimport VueTagsInput from \"@johmun/vue-tags-input\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"TransactionTags\",\n  components: {\n    VueTagsInput\n  },\n  props: ['value', 'index', 'errors'],\n  data() {\n    return {\n      autocompleteItems: [],\n      debounce: null,\n      tags: [],\n      currentTag: '',\n      updateTags: true, // the idea is that this is always true, except when the tags-function sets the value.\n      tagList: this.value,\n    };\n  },\n  created() {\n    let tags = [];\n    for (let i in this.value) {\n      if (this.value.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n        tags.push({text: this.value[i]});\n      }\n    }\n    this.updateTags = false;\n    this.tags = tags;\n  },\n  watch: {\n    'currentTag': 'initItems',\n    value: function (value) {\n      this.tagList = value;\n    },\n    tagList: function (value) {\n      // console.log('watch tagList');\n        this.$emit('set-field', {field: 'tags', index: this.index, value: value});\n      this.updateTags = false;\n      this.tags = value;\n    },\n    tags: function (value) {\n      if (this.updateTags) {\n        let shortList = [];\n        for (let key in value) {\n          if (value.hasOwnProperty(key)) {\n            shortList.push({text: value[key].text});\n          }\n        }\n        this.tagList = shortList;\n      }\n      this.updateTags = true;\n    }\n  },\n  methods: {\n    initItems() {\n      if (this.currentTag.length < 2) {\n        return;\n      }\n      const url = document.getElementsByTagName('base')[0].href + `api/v1/autocomplete/tags?query=${this.currentTag}`;\n\n      clearTimeout(this.debounce);\n      this.debounce = setTimeout(() => {\n        axios.get(url).then(response => {\n          this.autocompleteItems = response.data.map(item => {\n            return {text: item.tag};\n          });\n        }).catch(() => console.warn('Oh. Something went wrong loading tags.'));\n      }, 300);\n    },\n  },\n\n\n}\n</script>\n<style>\n.vue-tags-input {\n  width: 100%;\n  max-width: 100% !important;\n  display: block;\n  border-radius: 0.25rem;\n}\n\n.ti-input {\n  border-radius: 0.25rem;\n  max-width: 100%;\n  width: 100%;\n}\n\n.ti-new-tag-input {\n  font-size: 1rem;\n}\n</style>\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-9.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-9.use[2]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./TransactionTags.vue?vue&type=style&index=0&id=dbf814e6&lang=css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render } from \"./TransactionTags.vue?vue&type=template&id=dbf814e6\"\nimport script from \"./TransactionTags.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionTags.vue?vue&type=script&lang=js\"\n\nimport \"./TransactionTags.vue?vue&type=style&index=0&id=dbf814e6&lang=css\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionPiggyBank.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.piggy_bank') }}\n    </div>\n    <div class=\"input-group\">\n      <select\n          ref=\"piggy_bank_id\"\n          v-model=\"piggy_bank_id\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :title=\"$t('firefly.piggy_bank')\"\n          autocomplete=\"off\"\n          name=\"piggy_bank_id[]\"\n      >\n        <option v-for=\"piggy in this.piggyList\" :label=\"piggy.name_with_balance\" :value=\"piggy.id\">{{ piggy.name_with_balance }}</option>\n\n      </select>\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  props: ['index', 'value', 'errors'],\n  name: \"TransactionPiggyBank\",\n  data() {\n    return {\n      piggyList: [],\n      piggy_bank_id: this.value,\n    }\n  },\n  created() {\n    this.collectData();\n  },\n  methods: {\n    collectData() {\n      this.piggyList.push(\n          {\n            id: 0,\n            name_with_balance: this.$t('firefly.no_piggy_bank'),\n          }\n      );\n      this.getPiggies();\n    },\n    getPiggies() {\n      axios.get('./api/v1/autocomplete/piggy-banks-with-balance')\n          .then(response => {\n                  this.parsePiggies(response.data);\n                }\n          );\n    },\n    parsePiggies(data) {\n      for (let key in data) {\n        if (data.hasOwnProperty(key) && /^0$|^[1-9]\\d*$/.test(key) && key <= 4294967294) {\n          let current = data[key];\n          this.piggyList.push(\n              {\n                id: parseInt(current.id),\n                name_with_balance: current.name_with_balance\n              }\n          );\n        }\n      }\n    },\n  },\n  watch: {\n    value: function (value) {\n      this.piggy_bank_id = value;\n    },\n    piggy_bank_id: function (value) {\n      this.$emit('set-field', {field: 'piggy_bank_id', index: this.index, value: value});\n      this.emitEvent = true;\n    }\n  }\n}\n</script>\n","import { render } from \"./TransactionPiggyBank.vue?vue&type=template&id=18aafbc0\"\nimport script from \"./TransactionPiggyBank.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionPiggyBank.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionInternalReference.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div v-if=\"showField\" class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.internal_reference') }}\n    </div>\n    <div class=\"input-group\">\n      <input\n          v-model=\"reference\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"$t('firefly.internal_reference')\"\n          name=\"internal_reference[]\"\n          type=\"text\"\n      />\n      <div class=\"input-group-append\">\n        <button class=\"btn btn-outline-secondary\" tabindex=\"-1\" type=\"button\"><span class=\"far fa-trash-alt\"></span></button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['index', 'value', 'errors', 'customFields'],\n  name: \"TransactionInternalReference\",\n  data() {\n    return {\n      reference: this.value,\n      availableFields: this.customFields,\n      emitEvent: true\n    }\n  },\n  computed: {\n    showField: function () {\n      if ('internal_reference' in this.availableFields) {\n        return this.availableFields.internal_reference;\n      }\n      return false;\n    }\n  },\n  methods: {},\n  watch: {\n    customFields: function (value) {\n      this.availableFields = value;\n    },\n    value: function (value) {\n      this.emitEvent = false;\n      this.reference = value;\n    },\n    reference: function (value) {\n      this.$emit('set-field', {field: 'internal_reference', index: this.index, value: value});\n    }\n  }\n}\n</script>\n","import { render } from \"./TransactionInternalReference.vue?vue&type=template&id=94f353c2\"\nimport script from \"./TransactionInternalReference.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionInternalReference.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionInternalReference.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div v-if=\"showField\" class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.external_url') }}\n    </div>\n    <div class=\"input-group\">\n      <input\n          v-model=\"url\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"$t('firefly.external_url')\"\n          name=\"external_url[]\"\n          type=\"url\"\n      />\n      <div class=\"input-group-append\">\n        <button class=\"btn btn-outline-secondary\" tabindex=\"-1\" type=\"button\"><span class=\"far fa-trash-alt\"></span></button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['index', 'value', 'errors', 'customFields'],\n  name: \"TransactionExternalUrl\",\n  data() {\n    return {\n      url: this.value,\n      availableFields: this.customFields,\n    }\n  },\n  computed: {\n    showField: function () {\n      if ('external_uri' in this.availableFields) {\n        return this.availableFields.external_uri;\n      }\n      return false;\n    }\n  },\n  methods: {},\n  watch: {\n    customFields: function (value) {\n      this.availableFields = value;\n    },\n    value: function (value) {\n      this.url = value;\n    },\n    url: function (value) {\n      this.$emit('set-field', {field: 'external_url', index: this.index, value: value});\n    }\n  }\n}\n</script>\n\n","import { render } from \"./TransactionExternalUrl.vue?vue&type=template&id=7a5ee5e8\"\nimport script from \"./TransactionExternalUrl.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionExternalUrl.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionNotes.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\n  <div v-if=\"showField\" class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.notes') }}\n    </div>\n    <div class=\"input-group\">\n      <textarea\n          v-model=\"notes\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"$t('firefly.notes')\"\n      ></textarea>\n    </div>\n  </div>\n\n</template>\n\n<script>\nexport default {\n  props: ['index', 'value', 'errors', 'customFields'],\n  name: \"TransactionNotes\",\n  data() {\n    return {\n      notes: this.value,\n      availableFields: this.customFields,\n    }\n  },\n  computed: {\n    showField: function () {\n      if ('notes' in this.availableFields) {\n        return this.availableFields.notes;\n      }\n      return false;\n    }\n  },\n  watch: {\n    value: function (value) {\n      this.notes = value;\n    },\n    customFields: function (value) {\n      this.availableFields = value;\n    },\n    notes: function (value) {\n      this.$emit('set-field', {field: 'notes', index: this.index, value: value});\n    }\n  }\n}\n</script>\n\n","import { render } from \"./TransactionNotes.vue?vue&type=template&id=606fd0df\"\nimport script from \"./TransactionNotes.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionNotes.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionLinks.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div v-if=\"showField\">\n    <div class=\"form-group\">\n      <div class=\"text-xs d-none d-lg-block d-xl-block\">\n        {{ $t('firefly.journal_links') }}\n      </div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <p v-if=\"links.length === 0\">\n            <button type=\"button\" class=\"btn btn-default btn-xs\" data-target=\"#linkModal\" @click=\"resetModal\" data-toggle=\"modal\"><span class=\"fas fa-plus\"></span> Add transaction link</button>\n          </p>\n          <ul v-if=\"links.length > 0\" class=\"list-group\">\n            <li v-for=\"(transaction, index) in links\" class=\"list-group-item\" v-bind:key=\"index\">\n              <em>{{ getTextForLinkType(transaction.link_type_id) }}</em>\n              <a :href='\"./transaction/show/\" + transaction.transaction_group_id'>{{ transaction.description }}</a>\n\n              <span v-if=\"transaction.type === 'withdrawal'\">\n                          (<span class=\"text-danger\">{{\n                  Intl.NumberFormat(locale, {\n                    style: 'currency',\n                    currency: transaction.currency_code\n                  }).format(parseFloat(transaction.amount) * -1)\n                }}</span>)\n                        </span>\n              <span v-if=\"transaction.type === 'deposit'\">\n                          (<span class=\"text-success\">{{\n                  Intl.NumberFormat(locale, {\n                    style: 'currency',\n                    currency: transaction.currency_code\n                  }).format(parseFloat(transaction.amount))\n                }}</span>)\n                        </span>\n              <span v-if=\"transaction.type === 'transfer'\">\n                          (<span class=\"text-info\">{{\n                  Intl.NumberFormat(locale, {\n                    style: 'currency',\n                    currency: transaction.currency_code\n                  }).format(parseFloat(transaction.amount))\n                }}</span>)\n                        </span>\n              <div class=\"btn-group btn-group-xs float-right\">\n                <button type=\"button\" class=\"btn btn-xs btn-danger\" @click=\"removeLink(index)\" tabindex=\"-1\"><span class=\"far fa-trash-alt\"></span></button>\n              </div>\n            </li>\n          </ul>\n          <div v-if=\"links.length > 0\" class=\"form-text\">\n            <button type=\"button\" class=\"btn btn-default\" @click=\"resetModal\" data-target=\"#linkModal\" data-toggle=\"modal\"><span class=\"fas fa-plus\"></span></button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- modal -->\n    <div id=\"linkModal\" class=\"modal\" tabindex=\"-1\" ref=\"linkModal\">\n      <div class=\"modal-dialog modal-lg\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Transaction thing dialog.</h5>\n            <button aria-label=\"Close\" class=\"close\" data-dismiss=\"modal\" type=\"button\">\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"container-fluid\">\n              <div class=\"row\">\n                <div class=\"col\">\n                  <p>\n                    Use this form to search for transactions you wish to link to this one. When in doubt, use <code>id:*</code> where the ID is the number from\n                    the URL.\n                  </p>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col\">\n                  <form v-on:submit.prevent=\"search\" autocomplete=\"off\">\n                    <div class=\"input-group\">\n                      <input id=\"query\" v-model=\"query\" autocomplete=\"off\" class=\"form-control\" maxlength=\"255\" name=\"search\"\n                             placeholder=\"Search query\" type=\"text\">\n                      <div class=\"input-group-append\">\n                        <button class=\"btn btn-default\" type=\"submit\"><span class=\"fas fa-search\"></span> Search</button>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col\">\n                  <span v-if=\"searching\"><span class=\"fas fa-spinner fa-spin\"></span></span>\n                  <h4 v-if=\"searchResults.length > 0\">{{ $t('firefly.search_results') }}</h4>\n                  <table v-if=\"searchResults.length > 0\" class=\"table table-sm\">\n                    <caption style=\"display:none;\">{{ $t('firefly.search_results') }}</caption>\n                    <thead>\n                    <tr>\n                      <th scope=\"col\" colspan=\"2\" style=\"width:33%\">{{ $t('firefly.include') }}</th>\n                      <th scope=\"col\">{{ $t('firefly.transaction') }}</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr v-for=\"result in searchResults\">\n                      <td>\n                        <input v-model=\"result.selected\" class=\"form-control\"\n                               type=\"checkbox\"\n                               @change=\"selectTransaction($event)\"\n                        />\n                      </td>\n                      <td>\n                        <select\n                            v-model=\"result.link_type_id\"\n                            class=\"form-control\"\n                            @change=\"selectLinkType($event)\"\n                        >\n                          <option v-for=\"linkType in linkTypes\" :label=\"linkType.type\" :value=\"linkType.id + '-' + linkType.direction\">{{\n                              linkType.type\n                            }}\n                          </option>\n                        </select>\n                      </td>\n                      <td>\n                        <a :href=\"'./transactions/show/' + result.transaction_group_id\">{{ result.description }}</a>\n                        <span v-if=\"result.type === 'withdrawal'\">\n                          (<span class=\"text-danger\">{{\n                            Intl.NumberFormat(locale, {\n                              style: 'currency',\n                              currency: result.currency_code\n                            }).format(parseFloat(result.amount) * -1)\n                          }}</span>)\n                        </span>\n                        <span v-if=\"result.type === 'deposit'\">\n                          (<span class=\"text-success\">{{\n                            Intl.NumberFormat(locale, {\n                              style: 'currency',\n                              currency: result.currency_code\n                            }).format(parseFloat(result.amount))\n                          }}</span>)\n                        </span>\n                        <span v-if=\"result.type === 'transfer'\">\n                          (<span class=\"text-info\">{{\n                            Intl.NumberFormat(locale, {\n                              style: 'currency',\n                              currency: result.currency_code\n                            }).format(parseFloat(result.amount))\n                          }}</span>)\n                        </span>\n                        <br/>\n                        <em>\n                          <a :href=\"'./accounts/show/' + result.source_id\">{{ result.source_name }}</a>\n                          &rarr;\n                          <a :href=\"'./accounts/show/' + result.destination_id\">{{ result.destination_name }}</a>\n                        </em>\n                      </td>\n                    </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-secondary\" data-dismiss=\"modal\" type=\"button\">Close</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst lodashClonedeep = require('lodash.clonedeep');\n// See reference nr. 3\nexport default {\n  props: ['index', 'value', 'errors', 'customFields'],\n  name: \"TransactionLinks\",\n  data() {\n    return {\n      searchResults: [],\n      include: [],\n      locale: 'en-US',\n      linkTypes: [],\n      query: '',\n      searching: false,\n      links: this.value,\n      availableFields: this.customFields,\n      emitEvent: true\n    }\n  },\n  created() {\n    this.locale = localStorage.locale ?? 'en-US';\n    this.emitEvent = false;\n    this.links = lodashClonedeep(this.value);\n    this.getLinkTypes();\n\n  },\n  computed: {\n    showField: function () {\n      if ('links' in this.availableFields) {\n        return this.availableFields.links;\n      }\n      return false;\n    }\n  },\n  watch: {\n    value: function (value) {\n      if (null !== value) {\n        this.emitEvent = false;\n        this.links = lodashClonedeep(value);\n      }\n    },\n    links: function (value) {\n      if (true === this.emitEvent) {\n        this.$emit('set-field', {index: this.index, field: 'links', value: lodashClonedeep(value)});\n      }\n      this.emitEvent = true;\n    },\n    customFields: function (value) {\n      this.availableFields = value;\n    }\n  },\n  methods: {\n    removeLink: function (index) {\n      this.links.splice(index, 1);\n    },\n    getTextForLinkType: function (linkTypeId) {\n      let parts = linkTypeId.split('-');\n      for (let i in this.linkTypes) {\n        if (this.linkTypes.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.linkTypes[i];\n          if (parts[0] === current.id && parts[1] === current.direction) {\n            return current.type;\n          }\n        }\n      }\n      return 'text for #' + linkTypeId;\n    },\n    selectTransaction: function (event) {\n      for (let i in this.searchResults) {\n        if (this.searchResults.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.searchResults[i];\n          if (current.selected) {\n            this.addToSelected(current);\n          }\n          if (!current.selected) {\n            // remove from\n            this.removeFromSelected(current);\n          }\n        }\n      }\n    },\n    selectLinkType: function (event) {\n      for (let i in this.searchResults) {\n        if (this.searchResults.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.searchResults[i];\n          this.updateSelected(current.transaction_journal_id, current.link_type_id);\n        }\n      }\n    },\n    updateSelected(journalId, linkTypeId) {\n      for (let i in this.links) {\n        if (this.links.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.links[i];\n          if (parseInt(current.transaction_journal_id) === journalId) {\n            this.links[i].link_type_id = linkTypeId;\n          }\n        }\n      }\n    },\n    addToSelected(journal) {\n      let result = this.links.find(({transaction_journal_id}) => transaction_journal_id === journal.transaction_journal_id);\n      if (typeof result === 'undefined') {\n        this.links.push(journal);\n      }\n    },\n    removeFromSelected(journal) {\n      for (let i in this.links) {\n        if (this.links.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.links[i];\n          if (current.transaction_journal_id === journal.transaction_journal_id) {\n            this.links.splice(parseInt(i), 1);\n          }\n        }\n      }\n    },\n    getLinkTypes: function () {\n      let url = './api/v1/link_types';\n      axios.get(url)\n          .then(response => {\n                  this.parseLinkTypes(response.data);\n                }\n          );\n    },\n    resetModal: function() {\n      this.search();\n    },\n    parseLinkTypes: function (data) {\n      for (let i in data.data) {\n        if (data.data.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = data.data[i];\n          let linkTypeInward = {\n            id: current.id,\n            type: current.attributes.inward,\n            direction: 'inward'\n          };\n          let linkTypeOutward = {\n            id: current.id,\n            type: current.attributes.outward,\n            direction: 'outward'\n          };\n          if (linkTypeInward.type === linkTypeOutward.type) {\n            linkTypeInward.type = linkTypeInward.type + ' ()';\n            linkTypeOutward.type = linkTypeOutward.type + ' ()';\n          }\n          this.linkTypes.push(linkTypeInward);\n          this.linkTypes.push(linkTypeOutward);\n        }\n      }\n    },\n    search: function () {\n      if('' === this.query) {\n        this.searchResults = [];\n        return;\n      }\n      this.searching = true;\n      this.searchResults = [];\n      let url = './api/v1/search/transactions?limit=10&query=' + this.query;\n      axios.get(url)\n          .then(response => {\n                  this.parseSearch(response.data);\n                }\n          );\n    },\n    parseSearch: function (data) {\n      for (let i in data.data) {\n        if (data.data.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          for (let ii in data.data[i].attributes.transactions) {\n            if (data.data[i].attributes.transactions.hasOwnProperty(ii) && /^0$|^[1-9]\\d*$/.test(ii) && ii <= 4294967294) {\n              let current = data.data[i].attributes.transactions[ii];\n              current.transaction_group_id = parseInt(data.data[i].id);\n              current.selected = this.isJournalSelected(current.transaction_journal_id);\n              current.link_type_id = this.getJournalLinkType(current.transaction_journal_id);\n              current.link_type_text = '';\n              this.searchResults.push(current);\n            }\n          }\n        }\n      }\n      this.searching = false;\n    },\n    getJournalLinkType: function (journalId) {\n      for (let i in this.links) {\n        if (this.links.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.links[i];\n          if (current.transaction_journal_id === journalId) {\n            return current.link_type_id;\n          }\n        }\n      }\n      return '1-inward';\n    },\n    isJournalSelected: function (journalId) {\n      for (let i in this.links) {\n        if (this.links.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.links[i];\n          if (current.transaction_journal_id === journalId) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n  }\n}\n</script>\n","import { render } from \"./TransactionLinks.vue?vue&type=template&id=7826e6c4\"\nimport script from \"./TransactionLinks.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionLinks.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionAttachments.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div v-if=\"showField\" class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.attachments') }}\n    </div>\n    <div class=\"input-group\">\n      <input\n          ref=\"att\"\n          class=\"form-control\"\n          multiple\n          @change=\"selectedFile\"\n          name=\"attachments[]\"\n          type=\"file\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"TransactionAttachments\",\n  props: ['transaction_journal_id', 'customFields', 'index', 'uploadTrigger', 'clearTrigger'],\n  data() {\n    return {\n      availableFields: this.customFields,\n      uploads: 0,\n      created: 0,\n      uploaded: 0,\n    }\n  },\n  watch: {\n    customFields: function (value) {\n      this.availableFields = value;\n    },\n    uploadTrigger: function () {\n      // console.log('uploadTrigger(' + this.transaction_journal_id + ',' + this.index + ')');\n      this.doUpload();\n    },\n    clearTrigger: function () {\n      // console.log('clearTrigger(' + this.transaction_journal_id + ',' + this.index + ')');\n      this.$refs.att.value = null;\n    },\n    transaction_journal_id: function (value) {\n      // console.log('watch transaction_journal_id: ' + value + ' (index ' + this.index + ')');\n    }\n  },\n  computed: {\n    showField: function () {\n      if ('attachments' in this.availableFields) {\n        return this.availableFields.attachments;\n      }\n      return false;\n    }\n  },\n  methods: {\n    selectedFile: function () {\n      this.$emit('selected-attachments', {index: this.index, id: this.transaction_journal_id});\n    },\n    createAttachment: function (name) {\n      // console.log('Now in createAttachment()');\n      const uri = './api/v1/attachments';\n      const data = {\n        filename: name,\n        attachable_type: 'TransactionJournal',\n        attachable_id: this.transaction_journal_id,\n      };\n      // create new attachment:\n      return axios.post(uri, data);\n    },\n    uploadAttachment: function (attachmentId, data) {\n      this.created++;\n      // console.log('Now in uploadAttachment()');\n      const uploadUri = './api/v1/attachments/' + attachmentId + '/upload';\n      return axios.post(uploadUri, data)\n    },\n    countAttachment: function () {\n      this.uploaded++;\n      // console.log('Uploaded ' + this.uploaded + ' / ' + this.uploads);\n      if (this.uploaded >= this.uploads) {\n        // console.log('All files uploaded. Emit event for ' + this.transaction_journal_id + '(' + this.index + ')');\n        this.$emit('uploaded-attachments', this.transaction_journal_id);\n      }\n    },\n    doUpload: function () {\n      let files = this.$refs.att.files;\n      this.uploads = files.length;\n      // loop all files and create attachments.\n      for (let i in files) {\n        if (files.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          // console.log('Now at file ' + (parseInt(i) + 1) + ' / ' + files.length);\n          // read file into file reader:\n          let current = files[i];\n          let fileReader = new FileReader();\n          let theParent = this; // dont ask me why i need to do this.\n          fileReader.onloadend = evt => {\n            if (evt.target.readyState === FileReader.DONE) {\n              // console.log('I am done reading file ' + (parseInt(i) + 1));\n              this.createAttachment(current.name).then(response => {\n                // console.log('Created attachment. Now upload (1)');\n                return theParent.uploadAttachment(response.data.data.id, new Blob([evt.target.result]));\n              }).then(theParent.countAttachment);\n            }\n          }\n          fileReader.readAsArrayBuffer(current);\n        }\n      }\n      if (0 === files.length) {\n        //console.log('No files to upload. Emit event!');\n        this.$emit('uploaded-attachments', this.transaction_journal_id);\n      }\n      // Promise.all(promises).then(response => {\n      //   console.log('All files uploaded. Emit event!');\n      //   this.$emit('uploaded-attachments', this.transaction_journal_id);\n      // });\n    }\n  }\n\n}\n</script>\n\n","import { render } from \"./TransactionAttachments.vue?vue&type=template&id=0364e752\"\nimport script from \"./TransactionAttachments.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionAttachments.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionLocation.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div v-if=\"showField\" class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.location') }}\n    </div>\n    <div style=\"width:100%;height:300px;\">\n      <l-map\n          ref=\"myMap\"\n          :center=\"center\"\n          :zoom=\"zoom\" style=\"width:100%;height:300px;\"\n          @ready=\"prepMap()\"\n          @update:zoom=\"zoomUpdated\"\n          @update:center=\"centerUpdated\"\n          @update:bounds=\"boundsUpdated\"\n      >\n        <l-tile-layer :url=\"url\"></l-tile-layer>\n        <l-marker :lat-lng=\"marker\" :visible=\"hasMarker\"></l-marker>\n      </l-map>\n      <span>\n        <button class=\"btn btn-default btn-xs\" @click=\"clearLocation\">{{ $t('firefly.clear_location') }}</button>\n      </span>\n    </div>\n    <p>&nbsp;</p>\n  </div>\n</template>\n\n<script>\n\n// If you need to reference 'L', such as in 'L.icon', then be sure to\n// explicitly import 'leaflet' into your component\n// import L from 'leaflet';\nimport {LMap, LMarker, LTileLayer} from 'vue2-leaflet';\nimport 'leaflet/dist/leaflet.css';\n\nimport L from 'leaflet';\n\ndelete L.Icon.Default.prototype._getIconUrl;\n\nL.Icon.Default.mergeOptions({\n                              iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n                              iconUrl: require('leaflet/dist/images/marker-icon.png'),\n                              shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n                            });\n\nexport default {\n  name: \"TransactionLocation\",\n  props: {\n    index: {},\n    value: {\n      type: Object,\n      required: false\n    },\n    errors: {},\n    customFields: {},\n  },\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker,\n  },\n  created() {\n    if (null === this.value || typeof this.value === 'undefined') {\n      axios.get('./api/v1/configuration/firefly.default_location').then(response => {\n        this.zoom = parseInt(response.data.data.value.zoom_level);\n        this.center =\n            [\n              parseFloat(response.data.data.value.latitude),\n              parseFloat(response.data.data.value.longitude),\n            ]\n        ;\n      });\n      return;\n    }\n    if (null !== this.value.zoom_level && null !== this.value.latitude && null !== this.value.longitude) {\n      this.zoom = this.value.zoom_level;\n      this.center = [\n        parseFloat(this.value.latitude),\n        parseFloat(this.value.longitude),\n      ];\n      this.hasMarker = true;\n    }\n  },\n  data() {\n    return {\n      availableFields: this.customFields,\n      url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n      zoom: 3,\n      center: [0, 0],\n      bounds: null,\n      map: null,\n      hasMarker: false,\n      marker: [0, 0],\n    }\n  },\n  methods: {\n    prepMap: function () {\n      this.map = this.$refs.myMap.mapObject;\n      this.map.on('contextmenu', this.setObjectLocation);\n      this.map.on('zoomend', this.saveZoomLevel);\n    },\n    setObjectLocation: function (event) {\n      this.marker = [event.latlng.lat, event.latlng.lng];\n      this.hasMarker = true;\n      this.emitEvent();\n    },\n    saveZoomLevel: function () {\n      this.emitEvent();\n    },\n    clearLocation: function () {\n      this.hasMarker = false;\n      this.emitEvent();\n    },\n    emitEvent() {\n      this.$emit('set-marker-location', {\n                   index: this.index,\n                   zoomLevel: this.zoom,\n                   lat: this.marker[0],\n                   lng: this.marker[1],\n                   hasMarker: this.hasMarker\n                 }\n      );\n    },\n    zoomUpdated(zoom) {\n      this.zoom = zoom;\n    },\n    centerUpdated(center) {\n      this.center = center;\n    },\n    boundsUpdated(bounds) {\n      this.bounds = bounds;\n    }\n  },\n  computed: {\n    showField: function () {\n      if ('location' in this.availableFields) {\n        return this.availableFields.location;\n      }\n      return false;\n    }\n  },\n  watch: {\n    customFields: function (value) {\n      this.availableFields = value;\n    },\n  }\n}\n</script>\n\n","import { render } from \"./TransactionLocation.vue?vue&type=template&id=26d78234\"\nimport script from \"./TransactionLocation.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionLocation.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./SplitForm.vue?vue&type=template&id=8d9e74a0\"\nimport script from \"./SplitForm.vue?vue&type=script&lang=js\"\nexport * from \"./SplitForm.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - SplitPills.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div v-if=\"transactions.length > 1\" class=\"row\">\n    <div class=\"col\">\n      <!-- tabs -->\n      <ul class=\"nav nav-pills ml-auto p-2\" id=\"transactionTabs\">\n        <li v-for=\"(transaction, index) in this.transactions\" class=\"nav-item\"><a :class=\"'nav-link' + (0 === index ? ' active' : '')\"\n                                                                                  :href=\"'#split_' + index\"\n                                                                                  data-toggle=\"pill\">\n          <span v-if=\"'' !== transaction.description\">{{ transaction.description }}</span>\n          <span v-if=\"'' === transaction.description\">Split {{ index + 1 }}</span>\n        </a></li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"SplitPills\",\n  props: {\n    transactions: {\n      type: Array,\n      required: true,\n      default: function() {\n        return [];\n      }\n    },\n    count: {\n      type: Number,\n      required: true\n    },\n  }\n}\n</script>\n","import { render } from \"./SplitPills.vue?vue&type=template&id=6bee3f8d\"\nimport script from \"./SplitPills.vue?vue&type=script&lang=js\"\nexport * from \"./SplitPills.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionGroupTitle.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.split_transaction_title') }}\n    </div>\n    <vue-typeahead-bootstrap\n        v-model=\"title\"\n        :data=\"descriptions\"\n        :inputClass=\"errors.length > 0 ? 'is-invalid' : ''\"\n        :minMatchingChars=\"3\"\n        :placeholder=\"$t('firefly.split_transaction_title')\"\n        :serializer=\"item => item.description\"\n        :showOnFocus=true\n        inputName=\"group_title\"\n        @input=\"lookupDescription\"\n    >\n      <template slot=\"append\">\n        <div class=\"input-group-append\">\n          <button class=\"btn btn-outline-secondary\" tabindex=\"-1\" type=\"button\" v-on:click=\"clearDescription\"><span class=\"far fa-trash-alt\"></span></button>\n        </div>\n      </template>\n    </vue-typeahead-bootstrap>\n\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n\n  </div>\n</template>\n\n<script>\nimport VueTypeaheadBootstrap from 'vue-typeahead-bootstrap';\nimport {debounce} from \"lodash\";\n\nexport default {\n  props: ['value', 'errors'],\n  name: \"TransactionGroupTitle\",\n  components: {VueTypeaheadBootstrap},\n  data() {\n    return {\n      descriptions: [],\n      initialSet: [],\n      title: this.value,\n      emitEvent: true\n    }\n  },\n\n  created() {\n    axios.get(this.getACURL(''))\n        .then(response => {\n          this.descriptions = response.data;\n          this.initialSet = response.data;\n        });\n  },\n  watch: {\n    value: function (value) {\n      this.title = value;\n    },\n    title: function (value) {\n      this.$emit('set-group-title', value);\n    }\n  },\n  methods: {\n    clearDescription: function () {\n      this.title = '';\n    },\n    getACURL: function (query) {\n      // update autocomplete URL:\n      return document.getElementsByTagName('base')[0].href + 'api/v1/autocomplete/transactions?query=' + query;\n    },\n    lookupDescription: debounce(function () {\n      // update autocomplete URL:\n      axios.get(this.getACURL(this.title))\n          .then(response => {\n            this.descriptions = response.data;\n          })\n    }, 300)\n  }\n}\n</script>\n\n","import { render } from \"./TransactionGroupTitle.vue?vue&type=template&id=4bdb785a\"\nimport script from \"./TransactionGroupTitle.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionGroupTitle.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}