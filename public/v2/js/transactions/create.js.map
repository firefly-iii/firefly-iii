{"version":3,"sources":["webpack:///./src/bootstrap.js","webpack:///./src/components/store/modules/transactions/create.js","webpack:///./src/components/store/modules/transactions/edit.js","webpack:///./src/components/store/modules/dashboard/index.js","webpack:///./src/components/store/modules/root.js","webpack:///./src/components/store/modules/accounts/index.js","webpack:///./src/components/store/index.js","webpack:///./src/i18n.js","webpack:///./src/components/transactions/Create.vue","webpack:///./src/components/transactions/Create.vue?0394","webpack:///./src/pages/transactions/create.js","webpack:///./src/shared/transactions.js","webpack:///./src/components/transactions/TransactionTags.vue?b406","webpack:///./src/components/partials/Alert.vue","webpack:///./src/components/partials/Alert.vue?532e","webpack:///./src/components/transactions/SplitForm.vue","webpack:///./src/components/transactions/TransactionDescription.vue","webpack:///./src/components/transactions/TransactionDescription.vue?b847","webpack:///./src/components/transactions/TransactionDate.vue","webpack:///./src/components/transactions/TransactionDate.vue?a5ed","webpack:///./src/components/transactions/TransactionBudget.vue","webpack:///./src/components/transactions/TransactionBudget.vue?57d1","webpack:///./src/components/transactions/TransactionAccount.vue","webpack:///./src/components/transactions/TransactionAccount.vue?83d2","webpack:///./src/components/transactions/SwitchAccount.vue","webpack:///./src/components/transactions/SwitchAccount.vue?f57f","webpack:///./src/components/transactions/TransactionAmount.vue","webpack:///./src/components/transactions/TransactionAmount.vue?0b8a","webpack:///./src/components/transactions/TransactionForeignAmount.vue","webpack:///./src/components/transactions/TransactionForeignAmount.vue?bbb7","webpack:///./src/components/transactions/TransactionForeignCurrency.vue","webpack:///./src/components/transactions/TransactionForeignCurrency.vue?a811","webpack:///./src/components/transactions/TransactionCustomDates.vue","webpack:///./src/components/transactions/TransactionCustomDates.vue?fe9f","webpack:///./src/components/transactions/TransactionCategory.vue","webpack:///./src/components/transactions/TransactionCategory.vue?7069","webpack:///./src/components/transactions/TransactionBill.vue","webpack:///./src/components/transactions/TransactionBill.vue?b7a0","webpack:///./src/components/transactions/TransactionTags.vue","webpack:///./src/components/transactions/TransactionTags.vue?d435","webpack:///./src/components/transactions/TransactionTags.vue?9027","webpack:///./src/components/transactions/TransactionPiggyBank.vue","webpack:///./src/components/transactions/TransactionPiggyBank.vue?1e43","webpack:///./src/components/transactions/TransactionInternalReference.vue","webpack:///./src/components/transactions/TransactionInternalReference.vue?6a48","webpack:///./src/components/transactions/TransactionExternalUrl.vue","webpack:///./src/components/transactions/TransactionExternalUrl.vue?c7b6","webpack:///./src/components/transactions/TransactionNotes.vue","webpack:///./src/components/transactions/TransactionNotes.vue?498b","webpack:///./src/components/transactions/TransactionLinks.vue","webpack:///./src/components/transactions/TransactionLinks.vue?0efa","webpack:///./src/components/transactions/TransactionAttachments.vue","webpack:///./src/components/transactions/TransactionAttachments.vue?26e9","webpack:///./src/components/transactions/TransactionLocation.vue","webpack:///./src/components/transactions/TransactionLocation.vue?02ee","webpack:///./src/components/transactions/SplitForm.vue?28e1","webpack:///./src/components/transactions/SplitPills.vue","webpack:///./src/components/transactions/SplitPills.vue?9f08","webpack:///./src/components/transactions/TransactionGroupTitle.vue","webpack:///./src/components/transactions/TransactionGroupTitle.vue?7736"],"names":["window","$","jQuery","require","axios","defaults","headers","common","token","document","head","querySelector","content","console","error","localeToken","localStorage","locale","vuei18n","VueI18n","uiv","Vue","lodashClonedeep","namespaced","state","transactionType","groupTitle","transactions","customDateFields","interest_date","book_date","process_date","due_date","payment_date","invoice_date","defaultTransaction","getDefaultTransaction","defaultErrors","getDefaultErrors","getters","accountToTransaction","sourceAllowedTypes","destinationAllowedTypes","allowedOpposingTypes","actions","mutations","addTransaction","newTransaction","errors","push","resetErrors","payload","index","resetTransactions","setGroupTitle","setCustomDateFields","deleteTransaction","splice","length","setTransactionType","setAllowedOpposingTypes","setAccountToTransaction","updateField","field","value","setTransactionError","setDestinationAllowedTypes","setSourceAllowedTypes","viewRange","start","end","defaultStart","defaultEnd","initialiseStore","context","dispatch","get","then","response","data","attributes","oldViewRange","commit","restoreViewRangeDates","viewRangeStart","Date","viewRangeEnd","viewRangeDefaultStart","viewRangeDefaultEnd","restoreViewRange","getItem","setDatesFromViewRange","today","startOfDay","endOfDay","startOfWeek","weekStartsOn","endOfWeek","startOfMonth","endOfMonth","startOfQuarter","endOfQuarter","getMonth","setMonth","setDate","setStart","setItem","setEnd","setDefaultStart","setDefaultEnd","setViewRange","range","listPageSize","timezone","cacheKey","age","object","JSON","parse","now","parseInt","refreshCacheKey","Array","N","join","Math","random","toString","slice","stringify","setCacheKey","setListPageSize","number","setTimezone","orderMode","activeFilter","setOrderMode","setActiveFilter","Vuex","modules","root","root_store","create","transactions_create","edit","transactions_edit","accounts","accounts_index","dashboard","dashboard_index","strict","process","plugins","currencyPreference","setCurrencyPreference","currencyCode","code","currencyId","id","updateCurrencyPreference","currencyResponse","name","symbol","decimal_places","err","module","exports","documentElement","lang","fallbackLocale","messages","class","for","components","SplitForm","Alert","SplitPills","TransactionGroupTitle","created","parts","location","pathname","split","type","date","this","getFullYear","getDate","toUpperCase","substring","getExpectedSourceTypes","getAccountToTransaction","getCustomFields","errorMessage","successMessage","customFields","enableSubmit","createAnother","resetFormAfter","submittedTransaction","submittedLinks","submittedAttachments","inError","submittedAttCount","groupTitleErrors","returnedGroupId","returnedGroupTitle","computed","watch","finaliseSubmission","methods","addTransactionArray","event","preventDefault","removeTransaction","$store","submitData","url","post","handleSubmissionResponse","group_title","description","journals","result","i","hasOwnProperty","test","transaction_journal_id","Promise","resolve","submitLinks","submission","promises","journalId","links","ii","currentLink","outward_id","inward_id","all","submitAttachments","anyAttachments","attachments","selectedAttachment","$t","ID","title","href","previousURL","handleSubmissionError","parseErrors","submitTransaction","convertData","uploadedAttachment","key","Object","keys","storeLocation","zoomLevel","hasMarker","lat","lng","storeAccountValue","direction","currency_id","currency_code","currency_symbol","storeField","storeDate","storeGroupTitle","submitTransactionLinks","total","submitted","received","transactionIndex","fieldName","message","convertSplit","synchronizeAccounts","source_name","destination_name","source_id","destination_id","array","destination_account_name","destination_account_id","source_account_name","source_account_id","currentSplit","toLowerCase","amount","budget_id","category_name","category","internal_reference","external_url","notes","external_id","zoom_level","longitude","latitude","tags","order","reconciled","current","text","piggy_bank_id","bill_id","foreign_currency_id","foreign_amount","source_account_currency_id","destination_account_currency_id","linkTypeParts","link_type_id","inwardId","outwardId","newLink","getAllowedOpposingTypes","source","destination","defaultDestinationAllowedTypes","defaultSourceAllowedTypes","autocomplete","count","transaction","$event","disabled","i18n","props","store","render","createElement","Create","beforeCreate","$mount","currency","foreign_currency","custom_dates","budget","bill","piggy_bank","source_account_type","source_account_currency_code","source_account_currency_symbol","destination_account_type","destination_account_currency_code","destination_account_currency_symbol","selectedAttachments","uploadTrigger","clearTrigger","source_account","name_with_balance","currency_name","currency_decimal_places","destination_account","___CSS_LOADER_EXPORT___","slot","VueTypeaheadBootstrap","descriptions","initialSet","getACURL","clearDescription","query","getElementsByTagName","lookupDescription","debounce","$emit","inputClass","minMatchingChars","placeholder","serializer","item","showOnFocus","autofocus","inputName","tabindex","localTimeZone","Intl","DateTimeFormat","resolvedOptions","timeZone","systemTimeZone","dateStr","timeStr","localDate","ref","budgetList","emitEvent","collectData","getBudgets","parseBudgets","active","label","Number","String","default","accountTypes","selectedAccount","accountName","selectedAccountTrigger","types","userSelectedAccount","systemReturnedAccount","clearAccount","lookupAccount","createInitialSet","accountKey","visible","htmlText","required","sourceCurrencySymbol","destinationCurrencySymbol","fractionDigits","transactionAmount","formatNumber","str","parseFloat","toFixed","currencySymbol","srcCurrencySymbol","dstCurrencySymbol","step","sourceCurrencyId","destinationCurrencyId","isVisible","selectedCurrency","allCurrencies","selectableCurrencies","dstCurrencyId","srcCurrencyId","lockedCurrency","lockCurrency","getAllCurrencies","filterCurrencies","dateFields","availableFields","dates","interestDate","bookDate","processDate","dueDate","paymentDate","invoiceDate","isDateField","includes","getFieldValue","setFieldValue","target","enabled","categories","clearCategory","lookupCategory","selectedCategory","set","billList","getBills","parseBills","VueTagsInput","autocompleteItems","currentTag","updateTags","tagList","shortList","initItems","clearTimeout","setTimeout","map","tag","warn","options","newTags","piggyList","getPiggies","parsePiggies","piggy","reference","showField","external_uri","style","scope","colspan","searchResults","include","linkTypes","searching","getLinkTypes","removeLink","getTextForLinkType","linkTypeId","selectTransaction","selected","addToSelected","removeFromSelected","selectLinkType","updateSelected","journal","find","parseLinkTypes","resetModal","search","linkTypeInward","inward","linkTypeOutward","outward","parseSearch","transaction_group_id","isJournalSelected","getJournalLinkType","link_type_text","NumberFormat","maxlength","linkType","uploads","uploaded","doUpload","$refs","att","selectedFile","createAttachment","filename","attachable_type","attachable_id","uploadAttachment","attachmentId","uploadUri","countAttachment","files","fileReader","FileReader","theParent","onloadend","evt","readyState","DONE","Blob","readAsArrayBuffer","multiple","iconRetinaUrl","iconUrl","shadowUrl","LMap","LTileLayer","LMarker","zoom","center","bounds","marker","prepMap","myMap","mapObject","on","setObjectLocation","saveZoomLevel","latlng","clearLocation","zoomUpdated","centerUpdated","boundsUpdated","allowSwitch","Boolean","splitDate","sourceAccount","destinationAccount","hasMetaFields","requiredFields","TransactionLocation","TransactionAttachments","TransactionNotes","TransactionExternalUrl","TransactionInternalReference","TransactionPiggyBank","TransactionTags","TransactionLinks","TransactionBill","TransactionCategory","TransactionCustomDates","TransactionForeignCurrency","TransactionForeignAmount","TransactionAmount","SwitchAccount","TransactionAccount","TransactionBudget","TransactionDescription","TransactionDate"],"mappings":"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","file":"/public/js/transactions/create.js","sourcesContent":["/*\n * bootstrap.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// // imports\nimport Vue from 'vue';\nimport VueI18n from 'vue-i18n'\nimport * as uiv from 'uiv';\n\n// export jquery for others scripts to use\nwindow.$ = window.jQuery = require('jquery');\n\n// axios\nwindow.axios = require('axios');\nwindow.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n\n// CSRF\nlet token = document.head.querySelector('meta[name=\"csrf-token\"]');\n\nif (token) {\n    window.axios.defaults.headers.common['X-CSRF-TOKEN'] = token.content;\n} else {\n    console.error('CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token');\n}\n\n// locale\nlet localeToken = document.head.querySelector('meta[name=\"locale\"]');\n\nif (localeToken) {\n    localStorage.locale = localeToken.content;\n} else {\n    localStorage.locale = 'en_US';\n}\n\n// admin stuff\nrequire('jquery-ui');\nrequire('bootstrap'); // bootstrap CSS?\n\nrequire('admin-lte/dist/js/adminlte');\nrequire('overlayscrollbars');\n\n\n// vue\nwindow.vuei18n = VueI18n;\nwindow.uiv = uiv;\nVue.use(vuei18n);\nVue.use(uiv);\nwindow.Vue = Vue;","/*\n * create.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nconst lodashClonedeep = require('lodash.clonedeep');\n\nimport {getDefaultTransaction, getDefaultErrors} from '../../../../shared/transactions';\n\n// initial state\nconst state = () => ({\n        transactionType: 'any',\n        groupTitle: '',\n        transactions: [],\n        customDateFields: {\n            interest_date: false,\n            book_date: false,\n            process_date: false,\n            due_date: false,\n            payment_date: false,\n            invoice_date: false,\n        },\n        defaultTransaction: getDefaultTransaction(),\n        defaultErrors: getDefaultErrors()\n    }\n)\n\n\n// getters\nconst getters = {\n    transactions: state => {\n        return state.transactions;\n    },\n    defaultErrors: state => {\n        return state.defaultErrors;\n    },\n    groupTitle: state => {\n        return state.groupTitle;\n    },\n    transactionType: state => {\n        return state.transactionType;\n    },\n    accountToTransaction: state => {\n// See reference nr. 1\n        // possible API point!!\n        return state.accountToTransaction;\n    },\n    defaultTransaction: state => {\n        return state.defaultTransaction;\n    },\n    sourceAllowedTypes: state => {\n        return state.sourceAllowedTypes;\n    },\n    destinationAllowedTypes: state => {\n        return state.destinationAllowedTypes;\n    },\n    allowedOpposingTypes: state => {\n        return state.allowedOpposingTypes;\n    },\n    customDateFields: state => {\n        return state.customDateFields;\n    }\n    // // `getters` is localized to this module's getters\n    // // you can use rootGetters via 4th argument of getters\n    // someGetter (state, getters, rootState, rootGetters) {\n    //     getters.someOtherGetter // -> 'foo/someOtherGetter'\n    //     rootGetters.someOtherGetter // -> 'someOtherGetter'\n    //     rootGetters['bar/someOtherGetter'] // -> 'bar/someOtherGetter'\n    // },\n\n}\n\n// actions\nconst actions = {}\n\n// mutations\nconst mutations = {\n    addTransaction(state) {\n        let newTransaction = lodashClonedeep(state.defaultTransaction);\n        newTransaction.errors = lodashClonedeep(state.defaultErrors);\n        state.transactions.push(newTransaction);\n    },\n    resetErrors(state, payload) {\n        //console.log('resetErrors for index ' + payload.index);\n        state.transactions[payload.index].errors = lodashClonedeep(state.defaultErrors);\n    },\n    resetTransactions(state) {\n        state.transactions = [];\n    },\n    setGroupTitle(state, payload) {\n        state.groupTitle = payload.groupTitle;\n    },\n    setCustomDateFields(state, payload) {\n        state.customDateFields = payload;\n    },\n    deleteTransaction(state, payload) {\n        state.transactions.splice(payload.index, 1);\n        // console.log('Deleted transaction ' + payload.index);\n        // console.log(state.transactions);\n        if (0 === state.transactions.length) {\n            // console.log('array is empty!');\n        }\n    },\n    setTransactionType(state, transactionType) {\n        state.transactionType = transactionType;\n    },\n    setAllowedOpposingTypes(state, allowedOpposingTypes) {\n        state.allowedOpposingTypes = allowedOpposingTypes;\n    },\n    setAccountToTransaction(state, payload) {\n        state.accountToTransaction = payload;\n    },\n    updateField(state, payload) {\n        state.transactions[payload.index][payload.field] = payload.value;\n    },\n    setTransactionError(state, payload) {\n        //console.log('Will set transactions[' + payload.index + '][errors][' + payload.field + '] to ');\n        //console.log(payload.errors);\n        state.transactions[payload.index].errors[payload.field] = payload.errors;\n    },\n    setDestinationAllowedTypes(state, payload) {\n        // console.log('Destination allowed types was changed!');\n        state.destinationAllowedTypes = payload;\n    },\n    setSourceAllowedTypes(state, payload) {\n        state.sourceAllowedTypes = payload;\n    }\n}\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * edit.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// initial state\nconst state = () => ({});\n\n\n// getters\nconst getters = {};\n\n// actions\nconst actions = {};\n\n// mutations\nconst mutations = {};\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * index.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// initial state\nimport startOfDay from \"date-fns/startOfDay\";\nimport endOfDay from 'date-fns/endOfDay'\nimport startOfWeek from 'date-fns/startOfWeek'\nimport endOfWeek from 'date-fns/endOfWeek'\nimport startOfQuarter from 'date-fns/startOfQuarter';\nimport endOfQuarter from 'date-fns/endOfQuarter';\nimport endOfMonth from \"date-fns/endOfMonth\";\nimport startOfMonth from 'date-fns/startOfMonth';\n\nconst state = () => (\n    {\n        viewRange: 'default',\n        start: null,\n        end: null,\n        defaultStart: null,\n        defaultEnd: null,\n    }\n)\n\n\n// getters\nconst getters = {\n    start: state => {\n        return state.start;\n    },\n    end: state => {\n        return state.end;\n    },\n    defaultStart: state => {\n        return state.defaultStart;\n    },\n    defaultEnd: state => {\n        return state.defaultEnd;\n    },\n    viewRange: state => {\n        return state.viewRange;\n    }\n}\n\n// actions\nconst actions = {\n    initialiseStore(context) {\n        // console.log('initialiseStore for dashboard.');\n\n        // restore from local storage:\n        context.dispatch('restoreViewRange');\n\n        axios.get('./api/v1/preferences/viewRange')\n            .then(response => {\n                      let viewRange = response.data.data.attributes.data;\n                      let oldViewRange = context.getters.viewRange;\n                      context.commit('setViewRange', viewRange);\n                      if (viewRange !== oldViewRange) {\n                          // console.log('View range changed from \"' + oldViewRange + '\" to \"' + viewRange + '\"');\n                          context.dispatch('setDatesFromViewRange');\n                      }\n                      if (viewRange === oldViewRange) {\n                          // console.log('Restore view range dates');\n                          context.dispatch('restoreViewRangeDates');\n                      }\n                  }\n            ).catch(() => {\n            context.commit('setViewRange', '1M');\n            context.dispatch('setDatesFromViewRange');\n        });\n\n    },\n    restoreViewRangeDates: function (context) {\n        // check local storage first?\n        if (localStorage.viewRangeStart) {\n            // console.log('view range start set from local storage.');\n            context.commit('setStart', new Date(localStorage.viewRangeStart));\n        }\n        if (localStorage.viewRangeEnd) {\n            // console.log('view range end set from local storage.');\n            context.commit('setEnd', new Date(localStorage.viewRangeEnd));\n        }\n        // also set default:\n        if (localStorage.viewRangeDefaultStart) {\n            // console.log('view range default start set from local storage.');\n            // console.log(localStorage.viewRangeDefaultStart);\n            context.commit('setDefaultStart', new Date(localStorage.viewRangeDefaultStart));\n        }\n        if (localStorage.viewRangeDefaultEnd) {\n            // console.log('view range default end set from local storage.');\n            // console.log(localStorage.viewRangeDefaultEnd);\n            context.commit('setDefaultEnd', new Date(localStorage.viewRangeDefaultEnd));\n        }\n    },\n    restoreViewRange: function (context) {\n        // console.log('restoreViewRange');\n        let viewRange = localStorage.getItem('viewRange');\n        if (null !== viewRange) {\n            // console.log('restored restoreViewRange ' + viewRange );\n            context.commit('setViewRange', viewRange);\n        }\n    },\n    setDatesFromViewRange(context) {\n        let start;\n        let end;\n        let viewRange = context.getters.viewRange;\n        let today = new Date;\n        // console.log('Will recreate view range on ' + viewRange);\n        switch (viewRange) {\n            case '1D':\n                // today:\n                start = startOfDay(today);\n                end = endOfDay(today);\n                break;\n            case '1W':\n                // this week:\n                start = startOfDay(startOfWeek(today, {weekStartsOn: 1}));\n                end = endOfDay(endOfWeek(today, {weekStartsOn: 1}));\n                break;\n            case '1M':\n                // this month:\n                start = startOfDay(startOfMonth(today));\n                end = endOfDay(endOfMonth(today));\n                break;\n            case '3M':\n                // this quarter\n                start = startOfDay(startOfQuarter(today));\n                end = endOfDay(endOfQuarter(today));\n                break;\n            case '6M':\n                // this half-year\n                if (today.getMonth() <= 5) {\n                    start = new Date(today);\n                    start.setMonth(0);\n                    start.setDate(1);\n                    start = startOfDay(start);\n                    end = new Date(today);\n                    end.setMonth(5);\n                    end.setDate(30);\n                    end = endOfDay(start);\n                }\n                if (today.getMonth() > 5) {\n                    start = new Date(today);\n                    start.setMonth(6);\n                    start.setDate(1);\n                    start = startOfDay(start);\n                    end = new Date(today);\n                    end.setMonth(11);\n                    end.setDate(31);\n                    end = endOfDay(start);\n                }\n                break;\n            case '1Y':\n                // this year\n                start = new Date(today);\n                start.setMonth(0);\n                start.setDate(1);\n                start = startOfDay(start);\n\n                end = new Date(today);\n                end.setMonth(11);\n                end.setDate(31);\n                end = endOfDay(end);\n                break;\n        }\n        // console.log('Range is ' + viewRange);\n        // console.log('Start is ' + start);\n        // console.log('End is   ' + end);\n        context.commit('setStart', start);\n        context.commit('setEnd', end);\n        context.commit('setDefaultStart', start);\n        context.commit('setDefaultEnd', end);\n    }\n}\n\n// mutations\nconst mutations = {\n    setStart(state, value) {\n        state.start = value;\n        window.localStorage.setItem('viewRangeStart', value);\n    },\n    setEnd(state, value) {\n        state.end = value;\n        window.localStorage.setItem('viewRangeEnd', value);\n    },\n    setDefaultStart(state, value) {\n        state.defaultStart = value;\n        window.localStorage.setItem('viewRangeDefaultStart', value);\n    },\n    setDefaultEnd(state, value) {\n        state.defaultEnd = value;\n        window.localStorage.setItem('viewRangeDefaultEnd', value);\n    },\n    setViewRange(state, range) {\n        state.viewRange = range;\n        window.localStorage.setItem('viewRange', range);\n    }\n}\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * root.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// initial state\nconst state = () => (\n    {\n        listPageSize: 33,\n        timezone: '',\n        cacheKey: {\n            age: 0,\n            value: 'empty',\n        },\n    }\n)\n\n\n// getters\nconst getters = {\n    listPageSize: state => {\n        return state.listPageSize;\n    },\n    timezone: state => {\n        // console.log('Wil return ' + state.listPageSize);\n        return state.timezone;\n    },\n    cacheKey: state => {\n        return state.cacheKey.value;\n    },\n}\n\n// actions\nconst actions = {\n    initialiseStore(context) {\n        // cache key auto refreshes every day\n        // console.log('Now in initialize store.')\n        if (localStorage.cacheKey) {\n            // console.log('Storage has cache key: ');\n            // console.log(localStorage.cacheKey);\n            let object = JSON.parse(localStorage.cacheKey);\n            if (Date.now() - object.age > 86400000) {\n                // console.log('Key is here but is old.');\n                context.commit('refreshCacheKey');\n            } else {\n                // console.log('Cache key from local storage: ' + object.value);\n                context.commit('setCacheKey', object);\n            }\n        } else {\n            // console.log('No key need new one.');\n            context.commit('refreshCacheKey');\n        }\n        if (localStorage.listPageSize) {\n            state.listPageSize = localStorage.listPageSize;\n            context.commit('setListPageSize', {length: localStorage.listPageSize});\n        }\n        if (!localStorage.listPageSize) {\n            axios.get('./api/v1/preferences/listPageSize')\n                .then(response => {\n                          // console.log('from API: listPageSize is ' + parseInt(response.data.data.attributes.data));\n                          context.commit('setListPageSize', {length: parseInt(response.data.data.attributes.data)});\n                      }\n                );\n        }\n        if (localStorage.timezone) {\n            state.timezone = localStorage.timezone;\n            context.commit('setTimezone', {timezone: localStorage.timezone});\n        }\n        if (!localStorage.timezone) {\n            axios.get('./api/v1/configuration/app.timezone')\n                .then(response => {\n                          context.commit('setTimezone', {timezone: response.data.data.value});\n                      }\n                );\n        }\n    }\n}\n\n// mutations\nconst mutations = {\n    refreshCacheKey(state) {\n        let age = Date.now();\n        let N = 8;\n        let cacheKey = Array(N+1).join((Math.random().toString(36)+'00000000000000000').slice(2, 18)).slice(0, N);\n        let object = {age: age, value: cacheKey};\n        // console.log('Store new key in string JSON');\n        // console.log(JSON.stringify(object));\n        localStorage.cacheKey = JSON.stringify(object);\n        state.cacheKey = {age: age, value: cacheKey};\n        // console.log('Refresh: cachekey is now ' + cacheKey);\n    },\n    setCacheKey(state, payload) {\n        // console.log('Stored cache key in localstorage.');\n        // console.log(payload);\n        // console.log(JSON.stringify(payload));\n        localStorage.cacheKey = JSON.stringify(payload);\n        state.cacheKey = payload;\n    },\n    setListPageSize(state, payload) {\n        // console.log('Got a payload in setListPageSize');\n        // console.log(payload);\n        let number = parseInt(payload.length);\n        if (0 !== number) {\n            state.listPageSize = number;\n            localStorage.listPageSize = number;\n        }\n    },\n    setTimezone(state, payload) {\n\n        if ('' !== payload.timezone) {\n            state.timezone = payload.timezone;\n            localStorage.timezone = payload.timezone;\n        }\n    },\n}\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * index.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// initial state\nconst state = () => (\n    {\n        orderMode: false,\n        activeFilter: 1\n    }\n)\n\n\n// getters\nconst getters = {\n    orderMode: state => {\n        return state.orderMode;\n    },\n    activeFilter: state => {\n        return state.activeFilter;\n    }\n}\n\n// actions\nconst actions = {}\n\n// mutations\nconst mutations = {\n    setOrderMode(state, payload) {\n        state.orderMode = payload;\n    },\n    setActiveFilter(state, payload) {\n        state.activeFilter = payload;\n    }\n}\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * index.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport Vue from 'vue'\nimport Vuex, {createLogger} from 'vuex'\nimport transactions_create from './modules/transactions/create';\nimport transactions_edit from './modules/transactions/edit';\nimport dashboard_index from './modules/dashboard/index';\nimport root_store from './modules/root';\nimport accounts_index from './modules/accounts/index';\n\nVue.use(Vuex)\nconst debug = process.env.NODE_ENV !== 'production'\n\nexport default new Vuex.Store(\n    {\n        namespaced: true,\n        modules: {\n            root: root_store,\n            transactions: {\n                namespaced: true,\n                modules: {\n                    create: transactions_create,\n                    edit: transactions_edit\n                }\n            },\n            accounts: {\n                namespaced: true,\n                modules: {\n                    index: accounts_index\n                },\n            },\n            dashboard: {\n                namespaced: true,\n                modules: {\n                    index: dashboard_index\n                }\n            }\n        },\n        strict: debug,\n        plugins: debug ? [createLogger()] : [],\n        state: {\n            currencyPreference: {},\n            locale: 'en-US',\n            listPageSize: 50\n        },\n        mutations: {\n            setCurrencyPreference(state, payload) {\n                state.currencyPreference = payload.payload;\n            },\n            initialiseStore(state) {\n                // console.log('Now in initialiseStore()')\n                // if locale in local storage:\n                if (localStorage.locale) {\n                    state.locale = localStorage.locale;\n                    return;\n                }\n\n                // set locale from HTML:\n                let localeToken = document.head.querySelector('meta[name=\"locale\"]');\n                if (localeToken) {\n                    state.locale = localeToken.content;\n                    localStorage.locale = localeToken.content;\n                }\n            }\n        },\n        getters: {\n            currencyCode: state => {\n                return state.currencyPreference.code;\n            },\n            currencyPreference: state => {\n                return state.currencyPreference;\n            },\n            currencyId: state => {\n                return state.currencyPreference.id;\n            },\n            locale: state => {\n                return state.locale;\n            }\n            },\n        actions: {\n\n            updateCurrencyPreference(context) {\n                // console.log('Now in updateCurrencyPreference');\n                if (localStorage.currencyPreference) {\n                    context.commit('setCurrencyPreference', {payload: JSON.parse(localStorage.currencyPreference)});\n                    return;\n                }\n                axios.get('./api/v1/currencies/default')\n                    .then(response => {\n                        let currencyResponse = {\n                            id: parseInt(response.data.data.id),\n                            name: response.data.data.attributes.name,\n                            symbol: response.data.data.attributes.symbol,\n                            code: response.data.data.attributes.code,\n                            decimal_places: parseInt(response.data.data.attributes.decimal_places),\n                        };\n                        localStorage.currencyPreference = JSON.stringify(currencyResponse);\n                        //console.log('getCurrencyPreference from server')\n                        //console.log(JSON.stringify(currencyResponse));\n                        context.commit('setCurrencyPreference', {payload: currencyResponse});\n                    }).catch(err => {\n                    // console.log('Got error response.');\n                    console.error(err);\n                    context.commit('setCurrencyPreference', {\n                        payload: {\n                            id: 1,\n                            name: 'Euro',\n                            symbol: '',\n                            code: 'EUR',\n                            decimal_places: 2\n                        }\n                    });\n                });\n\n            }\n        }\n    }\n);","/*\n * i18n.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// Create VueI18n instance with options\nmodule.exports = new vuei18n({\n    locale: document.documentElement.lang, // set locale\n    fallbackLocale: 'en',\n    messages: {\n        'bg': require('./locales/bg.json'),\n        'cs': require('./locales/cs.json'),\n        'de': require('./locales/de.json'),\n        'en': require('./locales/en.json'),\n        'en-us': require('./locales/en.json'),\n        'en-gb': require('./locales/en-gb.json'),\n        'es': require('./locales/es.json'),\n        'el': require('./locales/el.json'),\n        'fr': require('./locales/fr.json'),\n        'hu': require('./locales/hu.json'),\n        //'id': require('./locales/id.json'),\n        'it': require('./locales/it.json'),\n        'nl': require('./locales/nl.json'),\n        'nb': require('./locales/nb.json'),\n        'pl': require('./locales/pl.json'),\n        'fi': require('./locales/fi.json'),\n        'pt-br': require('./locales/pt-br.json'),\n        'pt-pt': require('./locales/pt.json'),\n        'ro': require('./locales/ro.json'),\n        'ru': require('./locales/ru.json'),\n        //'zh': require('./locales/zh.json'),\n        'zh-tw': require('./locales/zh-tw.json'),\n        'zh-cn': require('./locales/zh-cn.json'),\n        'sk': require('./locales/sk.json'),\n        'sv': require('./locales/sv.json'),\n        'vi': require('./locales/vi.json'),\n    }\n});\n","<!--\n  - Create.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div>\n    <alert :message=\"errorMessage\" type=\"danger\"/>\n    <alert :message=\"successMessage\" type=\"success\"/>\n    <form @submit=\"submitTransaction\" autocomplete=\"off\">\n      <SplitPills :transactions=\"transactions\" :count=\"transactions.length\"/>\n      <div class=\"tab-content\">\n        <SplitForm\n            v-for=\"(transaction, index) in this.transactions\"\n            v-bind:key=\"index\"\n            :count=\"transactions.length\"\n            :custom-fields=\"customFields\"\n            :date=\"date\"\n            :destination-allowed-types=\"destinationAllowedTypes\"\n            :index=\"index\"\n            :source-allowed-types=\"sourceAllowedTypes\"\n            :submitted-transaction=\"submittedTransaction\"\n            :transaction=\"transaction\"\n            :transaction-type=\"transactionType\"\n            v-on:uploaded-attachments=\"uploadedAttachment($event)\"\n            v-on:selected-attachments=\"selectedAttachment($event)\"\n            v-on:set-marker-location=\"storeLocation($event)\"\n            v-on:set-account=\"storeAccountValue($event)\"\n            v-on:set-date=\"storeDate($event)\"\n            v-on:set-field=\"storeField($event)\"\n            v-on:remove-transaction=\"removeTransaction($event)\"\n        />\n      </div>\n\n      <div class=\"row\">\n        <!-- group title -->\n        <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\">\n          <div v-if=\"transactions.length > 1\" class=\"card\">\n            <div class=\"card-body\">\n              <div class=\"row\">\n                <div class=\"col\">\n                  <TransactionGroupTitle v-model=\"this.groupTitle\" :errors=\"this.groupTitleErrors\" v-on:set-group-title=\"storeGroupTitle($event)\"/>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\">\n          <!-- buttons -->\n          <div class=\"card card-primary\">\n            <div class=\"card-body\">\n              <div class=\"row\">\n                <div class=\"col\">\n                  <div class=\"text-xs d-none d-lg-block d-xl-block\">\n                    &nbsp;\n                  </div>\n                  <button type=\"button\" class=\"btn btn-outline-primary btn-block\" @click=\"addTransactionArray\"><span class=\"far fa-clone\"></span> {{\n                      $t('firefly.add_another_split')\n                    }}\n                  </button>\n                </div>\n                <div class=\"col\">\n                  <div class=\"text-xs d-none d-lg-block d-xl-block\">\n                    &nbsp;\n                  </div>\n                  <button :disabled=\"!enableSubmit\" class=\"btn btn-success btn-block\" @click=\"submitTransaction\">\n                    <span v-if=\"enableSubmit\"><span class=\"far fa-save\"></span> {{ $t('firefly.store_transaction') }}</span>\n                    <span v-if=\"!enableSubmit\"><span class=\"fas fa-spinner fa-spin\"></span></span>\n                  </button>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col\">\n                  &nbsp;\n                </div>\n                <div class=\"col\">\n                  <div class=\"form-check\">\n                    <input id=\"createAnother\" v-model=\"createAnother\" class=\"form-check-input\" type=\"checkbox\">\n                    <label class=\"form-check-label\" for=\"createAnother\">\n                      <span class=\"small\">{{ $t('firefly.create_another') }}</span>\n                    </label>\n                  </div>\n                  <div class=\"form-check\">\n                    <input id=\"resetFormAfter\" v-model=\"resetFormAfter\" :disabled=\"!createAnother\" class=\"form-check-input\" type=\"checkbox\">\n                    <label class=\"form-check-label\" for=\"resetFormAfter\">\n                      <span class=\"small\">{{ $t('firefly.reset_after') }}</span>\n                    </label>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport Alert from '../partials/Alert';\nimport SplitPills from \"./SplitPills\";\nimport TransactionGroupTitle from \"./TransactionGroupTitle\";\nimport SplitForm from \"./SplitForm\";\nimport {mapGetters, mapMutations} from \"vuex\";\n\nexport default {\n  name: \"Create\",\n  components: {\n    SplitForm,\n    Alert,\n    SplitPills,\n    TransactionGroupTitle,\n  },\n  /**\n   * Grab some stuff from the API, add the first transaction.\n   */\n  created() {\n    // set transaction type:\n    let pathName = window.location.pathname;\n    let parts = pathName.split('/');\n    let type = parts[parts.length - 1];\n\n    // set a basic date-time string:\n    let date = new Date;\n    this.date = [date.getFullYear(), ('0' + (date.getMonth() + 1)).slice(-2), ('0' + date.getDate()).slice(-2)].join('-') + 'T00:00';\n\n    //console.log('Date is set to \"' + this.date + '\"');\n\n    this.setTransactionType(type[0].toUpperCase() + type.substring(1));\n    this.getExpectedSourceTypes();\n    this.getAccountToTransaction();\n    this.getCustomFields();\n    this.addTransaction();\n  },\n  data() {\n    return {\n      // error or success message\n      errorMessage: '',\n      successMessage: '',\n\n      // custom fields to show, useful for components:\n      customFields: {},\n\n      // states for the form (makes sense right)\n      enableSubmit: true,\n      createAnother: false,\n      resetFormAfter: false,\n\n      // things the process is done working on (3 phases):\n      submittedTransaction: false,\n      submittedLinks: false,\n      submittedAttachments: -1, // -1 (no attachments), 0 = uploading, 1 = uploaded\n\n      // transaction was actually submitted?\n      inError: false,\n\n      // number of uploaded attachments\n      // its an object because we count per transaction journal (which can have multiple attachments)\n      // and array doesn't work right.\n      submittedAttCount: {},\n\n      // errors in the group title:\n      groupTitleErrors: [],\n\n      // group ID + title once submitted:\n      returnedGroupId: 0,\n      returnedGroupTitle: '',\n\n      // meta data for accounts\n      accountToTransaction: {},\n      allowedOpposingTypes: {},\n      sourceAllowedTypes: ['Asset account', 'Loan', 'Debt', 'Mortgage', 'Revenue account'],\n      destinationAllowedTypes: ['Asset account', 'Loan', 'Debt', 'Mortgage', 'Expense account'],\n\n      // date not in the store because it was buggy\n      date: ''\n    }\n  },\n  computed: {\n    /**\n     * Grabbed from the store.\n     */\n    ...mapGetters('transactions/create', ['transactionType', 'transactions', 'groupTitle', 'defaultErrors']),\n    ...mapGetters('root', ['listPageSize'])\n  },\n  watch: {\n    submittedAttachments: function () {\n      this.finaliseSubmission();\n    }\n  },\n  methods: {\n    /**\n     * Store related mutators used by this component.\n     */\n    ...mapMutations('transactions/create',\n                    [\n                      'setGroupTitle',\n                      'addTransaction',\n                      'deleteTransaction',\n                      'setTransactionError',\n                      'setTransactionType',\n                      'resetErrors',\n                      'updateField',\n                      'resetTransactions',\n                    ]\n    ),\n    addTransactionArray: function (event) {\n      event.preventDefault();\n      this.addTransaction();\n    },\n    /**\n     * Removes a split from the array.\n     */\n    removeTransaction: function (payload) {\n      // console.log('Triggered to remove transaction ' + payload.index);\n      this.$store.commit('transactions/create/deleteTransaction', payload);\n    },\n    submitData: function (url, data) {\n      return axios.post(url, data);\n    },\n    handleSubmissionResponse: function (response) {\n      // console.log('In handleSubmissionResponse()');\n      // save some meta data:\n      this.returnedGroupId = parseInt(response.data.data.id);\n      this.returnedGroupTitle = null === response.data.data.attributes.group_title ? response.data.data.attributes.transactions[0].description : response.data.data.attributes.group_title;\n      let journals = [];\n\n      // save separate journal ID's (useful ahead in the process):\n      let result = response.data.data.attributes.transactions\n      for (let i in result) {\n        if (result.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          journals.push(parseInt(result[i].transaction_journal_id));\n        }\n      }\n\n      return Promise.resolve({journals: journals});\n    },\n    submitLinks: function (response, submission) {\n      let promises = [];\n      // for\n      for (let i in response.journals) {\n        if (response.journals.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let journalId = response.journals[i];\n          let links = submission.transactions[i].links;\n          for (let ii in links) {\n            if (links.hasOwnProperty(ii) && /^0$|^[1-9]\\d*$/.test(ii) && ii <= 4294967294) {\n              let currentLink = links[ii];\n              if (0 === currentLink.outward_id) {\n                currentLink.outward_id = journalId;\n              }\n              if (0 === currentLink.inward_id) {\n                currentLink.inward_id = journalId;\n              }\n              promises.push(axios.post('./api/v1/transaction_links', currentLink));\n            }\n          }\n        }\n      }\n      if (0 === promises.length) {\n        return Promise.resolve({response: 'from submitLinks'});\n      }\n      return Promise.all(promises);\n    },\n    submitAttachments: function (response, submission) {\n      let anyAttachments = false;\n      for (let i in response.journals) {\n        if (response.journals.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let journalId = response.journals[i];\n          let hasAttachments = submission.transactions[i].attachments;\n          // console.log('Decided that ' + journalId);\n          // console.log(hasAttachments);\n          if (hasAttachments) {\n            // console.log('upload!');\n            this.updateField({index: i, field: 'transaction_journal_id', value: journalId});\n            // set upload trigger?\n            this.updateField({index: i, field: 'uploadTrigger', value: true});\n            //this.transactions[i].uploadTrigger = true;\n            anyAttachments = true;\n          }\n        }\n      }\n\n      if (true === anyAttachments) {\n        this.submittedAttachments = 0;\n      }\n\n      return Promise.resolve({response: 'from submitAttachments'});\n    },\n    selectedAttachment: function (payload) {\n      this.updateField({index: payload.index, field: 'attachments', value: true});\n    },\n    finaliseSubmission: function () {\n      // console.log('finaliseSubmission');\n      if (0 === this.submittedAttachments) {\n        // console.log('submittedAttachments = ' + this.submittedAttachments);\n        return;\n      }\n      // console.log('In finaliseSubmission');\n      if (false === this.createAnother) {\n        window.location.href = (window.previousURL ?? '/') + '?transaction_group_id=' + this.returnedGroupId + '&message=created';\n        return;\n      }\n      //console.log('Is in error?');\n      //console.log(this.inError);\n      if (false === this.inError) {\n        // show message:\n        this.errorMessage = '';\n        this.successMessage = this.$t('firefly.transaction_stored_link', {ID: this.returnedGroupId, title: this.returnedGroupTitle});\n      }\n      // console.log('here we are');\n      // enable flags:\n      this.enableSubmit = true;\n      this.submittedTransaction = false;\n      this.submittedAttachments = -1;\n\n      // reset attachments + errors\n      if (!this.resetFormAfter) {\n        for (let i in this.transactions) {\n          if (this.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n            if (this.transactions.hasOwnProperty(i)) {\n              //this.\n              // console.log('Reset attachment #' + i);\n              this.updateField({index: i, field: 'transaction_journal_id', value: 0});\n              this.updateField({index: i, field: 'errors', value: this.defaultErrors})\n            }\n          }\n        }\n      }\n      // reset the form:\n      if (this.resetFormAfter) {\n        this.resetTransactions();\n        this.addTransaction();\n      }\n      return Promise.resolve({response: 'from finaliseSubmission'});\n    },\n    handleSubmissionError: function (error) {\n      //console.log('in handleSubmissionError');\n      // oh noes Firefly III has something to bitch about.\n      this.enableSubmit = true;\n\n      // but report an error because error:\n      this.inError = true;\n      this.parseErrors(error.response.data);\n    },\n    /**\n     * Actually submit the transaction to Firefly III. This is a fairly complex beast of a thing because multiple things\n     * need to happen in the right order.\n     */\n    submitTransaction: function (event) {\n      event.preventDefault();\n      // console.log('submitTransaction()');\n      // disable the submit button:\n      this.enableSubmit = false;\n\n      // assume nothing breaks\n      this.inError = false;\n\n      // remove old warnings etc.\n      this.successMessage = '';\n      this.errorMessage = '';\n\n      // convert the data so its ready to be submitted:\n      const url = './api/v1/transactions';\n      const data = this.convertData();\n\n      this.submitData(url, data)\n          .then(this.handleSubmissionResponse)\n          .then(response => {\n                  return Promise.all([this.submitLinks(response, data), this.submitAttachments(response, data)]);\n                }\n          )\n          .then(this.finaliseSubmission)\n          .catch(this.handleSubmissionError);\n\n    },\n    /**\n     * When a attachment component is done uploading it ends up here. We create an object where we count how many\n     * attachment components have reported back they're done uploading. Of course if they have nothing to upload\n     * they will be pretty fast in reporting they're done.\n     *\n     * Once the number of components matches the number of splits we know all attachments have been uploaded.\n     */\n    uploadedAttachment: function (journalId) {\n      this.submittedAttachments = 0;\n      // console.log('Triggered uploadedAttachment(' + journalId + ')');\n      let key = 'str' + journalId;\n      this.submittedAttCount[key] = 1;\n      let count = Object.keys(this.submittedAttCount).length;\n      // console.log('Count is now ' + count);\n      // console.log('Length is ' + this.transactions.length);\n      if (count === this.transactions.length) {\n        // console.log('Got them all!');\n        // mark the attachments as stored:\n        this.submittedAttachments = 1;\n      }\n    },\n    /**\n     * Responds to changed location.\n     */\n    storeLocation: function (payload) {\n      let zoomLevel = payload.hasMarker ? payload.zoomLevel : null;\n      let lat = payload.hasMarker ? payload.lat : null;\n      let lng = payload.hasMarker ? payload.lng : null;\n      this.updateField({index: payload.index, field: 'zoom_level', value: zoomLevel});\n      this.updateField({index: payload.index, field: 'latitude', value: lat});\n      this.updateField({index: payload.index, field: 'longitude', value: lng});\n    },\n    /**\n     * Responds to changed account.\n     */\n    storeAccountValue: function (payload) {\n      this.updateField({index: payload.index, field: payload.direction + '_account_id', value: payload.id});\n      this.updateField({index: payload.index, field: payload.direction + '_account_type', value: payload.type});\n      this.updateField({index: payload.index, field: payload.direction + '_account_name', value: payload.name});\n\n      this.updateField({index: payload.index, field: payload.direction + '_account_currency_id', value: payload.currency_id});\n      this.updateField({index: payload.index, field: payload.direction + '_account_currency_code', value: payload.currency_code});\n      this.updateField({index: payload.index, field: payload.direction + '_account_currency_symbol', value: payload.currency_symbol});\n\n      //this.calculateTransactionType(payload.index);\n    },\n    storeField: function (payload) {\n      this.updateField(payload);\n    },\n    storeDate: function (payload) {\n      this.date = payload.date;\n    },\n    storeGroupTitle: function (value) {\n      // console.log('set group title: ' + value);\n      this.setGroupTitle({groupTitle: value});\n    },\n\n    /**\n     * Submit transaction links.\n     */\n    submitTransactionLinks(data, response) {\n      //console.log('submitTransactionLinks()');\n      let promises = [];\n      let result = response.data.data.attributes.transactions;\n      let total = 0;\n      for (let i in data.transactions) {\n        if (data.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let submitted = data.transactions[i];\n          if (result.hasOwnProperty(i)) {\n            // found matching created transaction.\n            let received = result[i];\n            // grab ID from received, loop \"submitted\" transaction links\n            for (let ii in submitted.links) {\n              if (submitted.links.hasOwnProperty(ii) && /^0$|^[1-9]\\d*$/.test(ii) && ii <= 4294967294) {\n                let currentLink = submitted.links[ii];\n                total++;\n                if (0 === currentLink.outward_id) {\n                  currentLink.outward_id = received.transaction_journal_id;\n                }\n                if (0 === currentLink.inward_id) {\n                  currentLink.inward_id = received.transaction_journal_id;\n                }\n                // submit transaction link:\n                promises.push(axios.post('./api/v1/transaction_links', currentLink).then(response => {\n// See reference nr. 4\n                }));\n              }\n            }\n          }\n        }\n      }\n      if (0 === total) {\n        this.submittedLinks = true;\n        return;\n      }\n      Promise.all(promises).then(function () {\n        this.submittedLinks = true;\n      });\n    },\n    parseErrors: function (errors) {\n      for (let i in this.transactions) {\n        if (this.transactions.hasOwnProperty(i)) {\n          this.resetErrors({index: i});\n        }\n      }\n\n      this.successMessage = '';\n      this.errorMessage = this.$t('firefly.errors_submission');\n      if (typeof errors.errors === 'undefined') {\n        this.successMessage = '';\n        this.errorMessage = errors.message;\n      }\n\n      let payload;\n      let transactionIndex;\n      let fieldName;\n\n      // fairly basic way of exploding the error array.\n      for (const key in errors.errors) {\n        // console.log('Error index: \"' + key + '\"');\n        if (errors.errors.hasOwnProperty(key)) {\n          if (key === 'group_title') {\n            this.groupTitleErrors = errors.errors[key];\n            continue;\n          }\n          if (key !== 'group_title') {\n            // lol dumbest way to explode \"transactions.0.something\" ever.\n            transactionIndex = parseInt(key.split('.')[1]);\n\n            fieldName = key.split('.')[2];\n\n            // set error in this object thing.\n            // console.log('The errors in key \"' + key + '\" are');\n            // console.log(errors.errors[key]);\n            switch (fieldName) {\n              case 'amount':\n              case 'description':\n              case 'date':\n              case 'tags':\n                payload = {index: transactionIndex, field: fieldName, errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'budget_id':\n                payload = {index: transactionIndex, field: 'budget', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'bill_id':\n                payload = {index: transactionIndex, field: 'bill', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'piggy_bank_id':\n                payload = {index: transactionIndex, field: 'piggy_bank', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'category_name':\n                payload = {index: transactionIndex, field: 'category', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'source_name':\n              case 'source_id':\n                payload = {index: transactionIndex, field: 'source', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'destination_name':\n              case 'destination_id':\n                payload = {index: transactionIndex, field: 'destination', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n              case 'foreign_amount':\n              case 'foreign_currency':\n                payload = {index: transactionIndex, field: 'foreign_amount', errors: errors.errors[key]};\n                this.setTransactionError(payload);\n                break;\n            }\n          }\n          // unique some things\n          if (typeof this.transactions[transactionIndex] !== 'undefined') {\n            //this.transactions[transactionIndex].errors.source = Array.from(new Set(this.transactions[transactionIndex].errors.source));\n            //this.transactions[transactionIndex].errors.destination = Array.from(new Set(this.transactions[transactionIndex].errors.destination));\n          }\n\n        }\n      }\n    },\n\n    /**\n     *\n     */\n    convertData: function () {\n      //console.log('now in convertData');\n      let data = {\n        'transactions': []\n      };\n      //console.log('Group title is: \"' + this.groupTitle + '\"');\n      if (this.groupTitle.length > 0) {\n        data.group_title = this.groupTitle;\n        //console.log('1) data.group_title is now \"'+data.group_title+'\"');\n      }\n\n      for (let i in this.transactions) {\n        if (this.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          data.transactions.push(this.convertSplit(i, this.transactions[i]));\n        }\n      }\n      if (data.transactions.length > 1 && '' !== data.transactions[0].description && (null === data.group_title || '' === data.group_title)) {\n        data.group_title = data.transactions[0].description;\n        //console.log('2) data.group_title is now \"'+data.group_title+'\"');\n      }\n\n      // depending on the transaction type for this thing, we need to\n      // make sure other splits match the data we submit.\n      if (data.transactions.length > 1) {\n        // console.log('This is a split!');\n        data = this.synchronizeAccounts(data);\n      }\n\n      return data;\n    },\n    synchronizeAccounts: function (data) {\n      // console.log('synchronizeAccounts: ' + this.transactionType);\n      // make sure all splits have whatever is in split 0.\n      // since its a transfer we can drop the name and use ID's only.\n      for (let i in data.transactions) {\n        if (data.transactions.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          // console.log('now at ' + i);\n\n          // for transfers, overrule both the source and the destination:\n          if ('Transfer' === this.transactionType) {\n            data.transactions[i].source_name = null;\n            data.transactions[i].destination_name = null;\n            if (i > 0) {\n              data.transactions[i].source_id = data.transactions[0].source_id;\n              data.transactions[i].destination_id = data.transactions[0].destination_id;\n            }\n          }\n          // for deposits, overrule the destination and ignore the rest.\n          if ('Deposit' === this.transactionType) {\n            data.transactions[i].destination_name = null;\n            if (i > 0) {\n              data.transactions[i].destination_id = data.transactions[0].destination_id;\n            }\n          }\n\n          // for withdrawals, overrule the source and ignore the rest.\n          if ('Withdrawal' === this.transactionType) {\n            data.transactions[i].source_name = null;\n            if (i > 0) {\n              data.transactions[i].source_id = data.transactions[0].source_id;\n            }\n          }\n        }\n      }\n      return data;\n\n    },\n\n    /**\n     *\n     * @param key\n     * @param array\n     */\n    convertSplit: function (key, array) {\n      if ('' === array.destination_account_name) {\n        array.destination_account_name = null;\n      }\n      if (0 === array.destination_account_id) {\n        array.destination_account_name = null;\n      }\n\n      if ('' === array.source_account_name) {\n        array.source_account_name = null;\n      }\n      if (0 === array.source_account_id) {\n        array.source_account_id = null;\n      }\n\n      let currentSplit = {\n        // basic\n        description: array.description,\n        date: this.date,\n        type: this.transactionType.toLowerCase(),\n\n        // account\n        source_id: array.source_account_id ?? null,\n        source_name: array.source_account_name ?? null,\n        destination_id: array.destination_account_id ?? null,\n        destination_name: array.destination_account_name ?? null,\n\n        // amount:\n        currency_id: array.currency_id,\n        amount: array.amount,\n\n        // meta data\n        budget_id: array.budget_id,\n        category_name: array.category,\n\n        // optional date fields (6x):\n        interest_date: array.interest_date,\n        book_date: array.book_date,\n        process_date: array.process_date,\n        due_date: array.due_date,\n        payment_date: array.payment_date,\n        invoice_date: array.invoice_date,\n\n        // other optional fields:\n        internal_reference: array.internal_reference,\n        external_url: array.external_url,\n        notes: array.notes,\n        external_id: array.external_id,\n\n        // location:\n        zoom_level: array.zoom_level,\n        longitude: array.longitude,\n        latitude: array.latitude,\n        tags: [],\n\n        // from thing:\n        order: 0,\n        reconciled: false,\n        attachments: array.attachments,\n      };\n\n      if (0 !== array.tags.length) {\n        for (let i in array.tags) {\n          if (array.tags.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n            // array.tags\n            let current = array.tags[i];\n            if (typeof current === 'object' && null !== current) {\n              currentSplit.tags.push(current.text);\n              // console.log('Add tag \"' + current.text + '\" from object.');\n              continue;\n            }\n            if (typeof current === 'string') {\n              currentSplit.tags.push(current);\n              // console.log('Add tag \"' + current + '\" from string.');\n              continue;\n            }\n            // console.log('Is neither.');\n          }\n        }\n      }\n      // console.log('Current split tags is now: ');\n      // console.log(currentSplit.tags);\n\n      // bills and piggy banks\n      if (0 !== array.piggy_bank_id) {\n        currentSplit.piggy_bank_id = array.piggy_bank_id;\n      }\n      if (0 !== array.bill_id) {\n        currentSplit.bill_id = array.bill_id;\n      }\n\n      // foreign amount:\n      if (0 !== array.foreign_currency_id && '' !== array.foreign_amount) {\n        currentSplit.foreign_currency_id = array.foreign_currency_id;\n      }\n      if ('' !== array.foreign_amount) {\n        currentSplit.foreign_amount = array.foreign_amount;\n      }\n\n      // do transaction type\n      // let transactionType;\n      // let firstSource;\n      // let firstDestination;\n\n      // get transaction type from first transaction\n      //transactionType = this.transactionType ? this.transactionType.toLowerCase() : 'any';\n      //console.log('Transaction type is now ' + transactionType);\n      // if the transaction type is invalid, might just be that we can deduce it from\n      // the presence of a source or destination account\n      //firstSource = this.transactions[0].source_account_type;\n      //firstDestination = this.transactions[0].destination_account_type;\n      //console.log(this.transactions[0].source_account);\n      //console.log(this.transactions[0].destination_account);\n      //console.log('Type of first source is  ' + firstSource);\n      //console.log('Type of first destination is  ' + firstDestination);\n\n      // default to source:\n      currentSplit.currency_id = array.source_account_currency_id;\n      // if ('any' === transactionType && ['asset', 'Asset account', 'Loan', 'Debt', 'Mortgage'].includes(firstSource)) {\n      //   transactionType = 'withdrawal';\n      // }\n\n      if ('Deposit' === this.transactionType) {\n        //   transactionType = 'deposit';\n        currentSplit.currency_id = array.destination_account_currency_id;\n      }\n      //currentSplit.type = transactionType;\n      //console.log('Final type is ' + transactionType);\n\n      let links = [];\n      for (let i in array.links) {\n        if (array.links.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = array.links[i];\n          let linkTypeParts = current.link_type_id.split('-');\n          let inwardId = 'outward' === linkTypeParts[1] ? 0 : parseInt(current.transaction_journal_id);\n          let outwardId = 'inward' === linkTypeParts[1] ? 0 : parseInt(current.transaction_journal_id);\n          let newLink = {\n            link_type_id: parseInt(linkTypeParts[0]),\n            inward_id: inwardId,\n            outward_id: outwardId,\n          };\n          links.push(newLink);\n        }\n      }\n      currentSplit.links = links;\n      if (null === currentSplit.source_id) {\n        delete currentSplit.source_id;\n      }\n      if (null === currentSplit.source_name) {\n        delete currentSplit.source_name;\n      }\n      if (null === currentSplit.destination_id) {\n        delete currentSplit.destination_id;\n      }\n      if (null === currentSplit.destination_name) {\n        delete currentSplit.destination_name;\n      }\n\n      // console.log('Current split is: ');\n      // console.log(currentSplit);\n\n      // return it.\n      return currentSplit;\n    },\n    /**\n     * Get API value.\n     */\n    getAllowedOpposingTypes: function () {\n      axios.get('./api/v1/configuration/firefly.allowed_opposing_types')\n          .then(response => {\n            // console.log('opposing types things.');\n            // console.log(response.data.data.value);\n            this.allowedOpposingTypes = response.data.data.value;\n          });\n    },\n    getExpectedSourceTypes: function () {\n      axios.get('./api/v1/configuration/firefly.expected_source_types')\n          .then(response => {\n            //console.log('getExpectedSourceTypes.');\n            this.sourceAllowedTypes = response.data.data.value.source[this.transactionType];\n            this.destinationAllowedTypes = response.data.data.value.destination[this.transactionType];\n            // console.log('Source allowed types for ' + this.transactionType + ' is: ');\n            // console.log(this.sourceAllowedTypes);\n\n            // console.log('Destination allowed types for ' + this.transactionType + ' is: ');\n            // console.log(this.destinationAllowedTypes);\n\n            //this.allowedOpposingTypes = response.data.data.value;\n          });\n    },\n    /**\n     * Get API value.\n     */\n    getAccountToTransaction: function () {\n      axios.get('./api/v1/configuration/firefly.account_to_transaction')\n          .then(response => {\n            this.accountToTransaction = response.data.data.value;\n          });\n    },\n    /**\n     * This method grabs the users preferred custom transaction fields. It's used when configuring the\n     * custom date selects that will be available. It could be something the component does by itself,\n     * thereby separating concerns. This is on my list. If it changes to a per-component thing, then\n     * it should be done via the create.js Vue store because multiple components are interested in the\n     * user's custom transaction fields.\n     */\n    getCustomFields: function () {\n      axios.get('./api/v1/preferences/transaction_journal_optional_fields').then(response => {\n        this.customFields = response.data.data.attributes.data;\n      });\n    },\n    setDestinationAllowedTypes: function (value) {\n      // console.log('Create::setDestinationAllowedTypes');\n      // console.log(value);\n      if (0 === value.length) {\n        this.destinationAllowedTypes = this.defaultDestinationAllowedTypes;\n        //console.log('empty so back to defaults');\n        return;\n      }\n      this.destinationAllowedTypes = value;\n    },\n    setSourceAllowedTypes(value) {\n      // console.log('Create::setSourceAllowedTypes');\n      // console.log(value);\n      if (0 === value.length) {\n        this.sourceAllowedTypes = this.defaultSourceAllowedTypes;\n        // console.log('empty so back to defaults');\n        return;\n      }\n      this.sourceAllowedTypes = value;\n    }\n  },\n\n}\n</script>\n\n","import { render } from \"./Create.vue?vue&type=template&id=273ba2fd\"\nimport script from \"./Create.vue?vue&type=script&lang=js\"\nexport * from \"./Create.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","/*\n * create.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport store from \"../../components/store\";\nimport Create from \"../../components/transactions/Create\";\nimport Vue from \"vue\";\n\nrequire('../../bootstrap');\n\nVue.config.productionTip = false;\n// i18n\nlet i18n = require('../../i18n');\n\n// See reference nr. 3\n// See reference nr. 4\n// See reference nr. 5\n// See reference nr. 6\n// See reference nr. 7\n\nlet props = {};\nnew Vue({\n            i18n,\n            store,\n            render(createElement) {\n                return createElement(Create, {props: props});\n            },\n            beforeCreate() {\n                this.$store.dispatch('root/initialiseStore');\n                this.$store.commit('initialiseStore');\n                this.$store.dispatch('updateCurrencyPreference');\n            },\n        }).$mount('#transactions_create');\n","/*\n * transactions.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport function getDefaultErrors() {\n    return {\n        description: [],\n        amount: [],\n        source: [],\n        destination: [],\n        currency: [],\n        foreign_currency: [],\n        foreign_amount: [],\n        date: [],\n        custom_dates: [],\n        budget: [],\n        category: [],\n        bill: [],\n        tags: [],\n        piggy_bank: [],\n        internal_reference: [],\n        external_url: [],\n        notes: [],\n        location: []\n    };\n}\n\nexport function getDefaultTransaction() {\n    return {\n        // basic\n        description: '',\n        transaction_journal_id: 0,\n        // accounts:\n        source_account_id: null,\n        source_account_name: null,\n        source_account_type: null,\n\n        source_account_currency_id: null,\n        source_account_currency_code: null,\n        source_account_currency_symbol: null,\n\n        destination_account_id: null,\n        destination_account_name: null,\n        destination_account_type: null,\n\n        destination_account_currency_id: null,\n        destination_account_currency_code: null,\n        destination_account_currency_symbol: null,\n        attachments: false,\n        selectedAttachments: false,\n        uploadTrigger: false,\n        clearTrigger: false,\n\n        source_account: {\n            id: 0,\n            name: \"\",\n            name_with_balance: \"\",\n            type: \"\",\n            currency_id: 0,\n            currency_name: '',\n            currency_code: '',\n            currency_decimal_places: 2\n        },\n        destination_account: {\n            id: 0,\n            name: \"\",\n            type: \"\",\n            currency_id: 0,\n            currency_name: '',\n            currency_code: '',\n            currency_decimal_places: 2\n        },\n\n        // amount:\n        amount: '',\n        currency_id: 0,\n        foreign_amount: '',\n        foreign_currency_id: 0,\n\n        // meta data\n        category: null,\n        budget_id: 0,\n        bill_id: 0,\n        piggy_bank_id: 0,\n        tags: [],\n\n        // optional date fields (6x):\n        interest_date: null,\n        book_date: null,\n        process_date: null,\n        due_date: null,\n        payment_date: null,\n        invoice_date: null,\n\n        // optional other fields:\n        internal_reference: null,\n        external_url: null,\n        external_id: null,\n        notes: null,\n\n        // transaction links:\n        links: [],\n        // location:\n        zoom_level: null,\n        longitude: null,\n        latitude: null,\n\n        // error handling\n        errors: {},\n    }\n}\n\nexport function toW3CString(date) {\n    // https://gist.github.com/tristanlins/6585391\n    let year = date.getFullYear();\n    let month = date.getMonth();\n    month++;\n    if (month < 10) {\n        month = '0' + month;\n    }\n    let day = date.getDate();\n    if (day < 10) {\n        day = '0' + day;\n    }\n    let hours = date.getHours();\n    if (hours < 10) {\n        hours = '0' + hours;\n    }\n    let minutes = date.getMinutes();\n    if (minutes < 10) {\n        minutes = '0' + minutes;\n    }\n    let seconds = date.getSeconds();\n    if (seconds < 10) {\n        seconds = '0' + seconds;\n    }\n    let offset = -date.getTimezoneOffset();\n    let offsetHours = Math.abs(Math.floor(offset / 60));\n    let offsetMinutes = Math.abs(offset) - offsetHours * 60;\n    if (offsetHours < 10) {\n        offsetHours = '0' + offsetHours;\n    }\n    if (offsetMinutes < 10) {\n        offsetMinutes = '0' + offsetMinutes;\n    }\n    let offsetSign = '+';\n    if (offset < 0) {\n        offsetSign = '-';\n    }\n    return year + '-' + month + '-' + day +\n           'T' + hours + ':' + minutes + ':' + seconds +\n           offsetSign + offsetHours + ':' + offsetMinutes;\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".vue-tags-input{display:block;max-width:100%!important}.ti-input,.vue-tags-input{border-radius:.25rem;width:100%}.ti-input{max-width:100%}.ti-new-tag-input{font-size:1rem}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/transactions/TransactionTags.vue\"],\"names\":[],\"mappings\":\"AAsHA,gBAGE,aAAc,CADd,wBAGF,CAEA,0BAHE,oBAAsB,CAHtB,UAUF,CAJA,UAEE,cAEF,CAEA,kBACE,cACF\",\"sourcesContent\":[\"<!--\\n  - TransactionTags.vue\\n  - Copyright (c) 2021 james@firefly-iii.org\\n  -\\n  - This file is part of Firefly III (https://github.com/firefly-iii).\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n  <div class=\\\"form-group\\\">\\n    <div class=\\\"text-xs d-none d-lg-block d-xl-block\\\">\\n      {{ $t('firefly.tags') }}\\n    </div>\\n    <div class=\\\"input-group\\\">\\n      <vue-tags-input\\n          v-model=\\\"currentTag\\\"\\n          :add-only-from-autocomplete=\\\"false\\\"\\n          :autocomplete-items=\\\"autocompleteItems\\\"\\n          :tags=\\\"tags\\\"\\n          :title=\\\"$t('firefly.tags')\\\"\\n          v-bind:placeholder=\\\"$t('firefly.tags')\\\"\\n          @tags-changed=\\\"newTags => this.tags = newTags\\\"\\n      />\\n    </div>\\n    <span v-if=\\\"errors.length > 0\\\">\\n      <span v-for=\\\"error in errors\\\" class=\\\"text-danger small\\\">{{ error }}<br/></span>\\n    </span>\\n  </div>\\n</template>\\n\\n<script>\\nimport VueTagsInput from \\\"@johmun/vue-tags-input\\\";\\nimport axios from \\\"axios\\\";\\n\\nexport default {\\n  name: \\\"TransactionTags\\\",\\n  components: {\\n    VueTagsInput\\n  },\\n  props: ['value', 'index', 'errors'],\\n  data() {\\n    return {\\n      autocompleteItems: [],\\n      debounce: null,\\n      tags: [],\\n      currentTag: '',\\n      updateTags: true, // the idea is that this is always true, except when the tags-function sets the value.\\n      tagList: this.value,\\n    };\\n  },\\n  created() {\\n    let tags = [];\\n    for (let i in this.value) {\\n      if (this.value.hasOwnProperty(i) && /^0$|^[1-9]\\\\d*$/.test(i) && i <= 4294967294) {\\n        tags.push({text: this.value[i]});\\n      }\\n    }\\n    this.updateTags = false;\\n    this.tags = tags;\\n  },\\n  watch: {\\n    'currentTag': 'initItems',\\n    value: function (value) {\\n      this.tagList = value;\\n    },\\n    tagList: function (value) {\\n      // console.log('watch tagList');\\n        this.$emit('set-field', {field: 'tags', index: this.index, value: value});\\n      this.updateTags = false;\\n      this.tags = value;\\n    },\\n    tags: function (value) {\\n      if (this.updateTags) {\\n        let shortList = [];\\n        for (let key in value) {\\n          if (value.hasOwnProperty(key)) {\\n            shortList.push({text: value[key].text});\\n          }\\n        }\\n        this.tagList = shortList;\\n      }\\n      this.updateTags = true;\\n    }\\n  },\\n  methods: {\\n    initItems() {\\n      if (this.currentTag.length < 2) {\\n        return;\\n      }\\n      const url = document.getElementsByTagName('base')[0].href + `api/v1/autocomplete/tags?query=${this.currentTag}`;\\n\\n      clearTimeout(this.debounce);\\n      this.debounce = setTimeout(() => {\\n        axios.get(url).then(response => {\\n          this.autocompleteItems = response.data.map(item => {\\n            return {text: item.tag};\\n          });\\n        }).catch(() => console.warn('Oh. Something went wrong loading tags.'));\\n      }, 300);\\n    },\\n  },\\n\\n\\n}\\n</script>\\n<style>\\n.vue-tags-input {\\n  width: 100%;\\n  max-width: 100% !important;\\n  display: block;\\n  border-radius: 0.25rem;\\n}\\n\\n.ti-input {\\n  border-radius: 0.25rem;\\n  max-width: 100%;\\n  width: 100%;\\n}\\n\\n.ti-new-tag-input {\\n  font-size: 1rem;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","<!--\n  - Alert.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n<template>\n  <div v-if=\"message.length > 0\" :class=\"'alert alert-' + type + ' alert-dismissible'\">\n    <button aria-hidden=\"true\" class=\"close\" data-dismiss=\"alert\" type=\"button\"></button>\n    <h5>\n      <span v-if=\"'danger' === type\" class=\"icon fas fa-ban\"></span>\n      <span v-if=\"'success' === type\" class=\"icon fas fa-thumbs-up\"></span>\n      <span v-if=\"'danger' === type\">{{ $t(\"firefly.flash_error\") }}</span>\n      <span v-if=\"'success' === type\">{{ $t(\"firefly.flash_success\") }}</span>\n    </h5>\n    <span v-html=\"message\"></span>\n  </div>\n</template>\n<script>\nexport default {\n  name: \"Alert\",\n  props: ['message', 'type']\n}\n</script>","import { render } from \"./Alert.vue?vue&type=template&id=45eef68c\"\nimport script from \"./Alert.vue?vue&type=script&lang=js\"\nexport * from \"./Alert.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - SplitForm.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div :id=\"'split_' + index\" :class=\"'tab-pane' + (0 === index ? ' active' : '')\">\n    <div class=\"row\">\n      <div class=\"col\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <h3 class=\"card-title\">\n              {{ $t('firefly.basic_journal_information') }}\n              <span v-if=\"count > 1\">({{ index + 1 }} / {{ count }}) </span>\n            </h3>\n            <div v-if=\"count>1\" class=\"card-tools\">\n              <button type=\"button\" class=\"btn btn-danger btn-xs\" @click=\"removeTransaction\"><span class=\"fas fa-trash-alt\"></span></button>\n            </div>\n          </div>\n\n          <div class=\"card-body\">\n            <!-- start of body -->\n            <div class=\"row\">\n              <div class=\"col\">\n                <TransactionDescription\n                    v-model=\"transaction.description\"\n                    v-on=\"$listeners\"\n                    :errors=\"transaction.errors.description\"\n                    :index=\"index\"\n                ></TransactionDescription>\n              </div>\n            </div>\n            <!-- source and destination -->\n            <div class=\"row\">\n              <div class=\"col-xl-5 col-lg-5 col-md-10 col-sm-12 col-xs-12\">\n                <!-- SOURCE -->\n                <TransactionAccount\n                    v-model=\"sourceAccount\"\n                    v-on=\"$listeners\"\n                    :destination-allowed-types=\"destinationAllowedTypes\"\n                    :errors=\"transaction.errors.source\"\n                    :index=\"index\"\n                    :source-allowed-types=\"sourceAllowedTypes\"\n                    :transaction-type=\"transactionType\"\n                    direction=\"source\"\n                />\n              </div>\n              <!-- switcharoo! -->\n              <div class=\"col-xl-2 col-lg-2 col-md-2 col-sm-12 text-center d-none d-sm-block\">\n                <SwitchAccount\n                    v-if=\"0 === index && allowSwitch\"\n                    v-on=\"$listeners\"\n                    :index=\"index\"\n                    :transaction-type=\"transactionType\"\n                />\n              </div>\n\n              <!-- destination -->\n              <div class=\"col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12\">\n                <!-- DESTINATION -->\n                <TransactionAccount\n                    v-model=\"destinationAccount\"\n                    v-on=\"$listeners\"\n                    :destination-allowed-types=\"destinationAllowedTypes\"\n                    :errors=\"transaction.errors.destination\"\n                    :index=\"index\"\n                    :transaction-type=\"transactionType\"\n                    :source-allowed-types=\"sourceAllowedTypes\"\n                    direction=\"destination\"\n                />\n              </div>\n            </div>\n\n\n            <!-- amount  -->\n            <div class=\"row\">\n              <div class=\"col-xl-5 col-lg-5 col-md-10 col-sm-12 col-xs-12\">\n                <!-- AMOUNT -->\n                <TransactionAmount\n                    v-on=\"$listeners\"\n                    :amount=\"transaction.amount\"\n                    :destination-currency-symbol=\"this.transaction.destination_account_currency_symbol\"\n                    :errors=\"transaction.errors.amount\"\n                    :index=\"index\"\n                    :source-currency-symbol=\"this.transaction.source_account_currency_symbol\"\n                    :transaction-type=\"this.transactionType\"\n                />\n              </div>\n              <div class=\"col-xl-2 col-lg-2 col-md-2 col-sm-12 text-center d-none d-sm-block\">\n                <TransactionForeignCurrency\n                    v-model=\"transaction.foreign_currency_id\"\n                    v-on=\"$listeners\"\n                    :destination-currency-id=\"this.transaction.destination_account_currency_id\"\n                    :index=\"index\"\n                    :selected-currency-id=\"this.transaction.foreign_currency_id\"\n                    :source-currency-id=\"this.transaction.source_account_currency_id\"\n                    :transaction-type=\"this.transactionType\"\n                />\n              </div>\n              <div class=\"col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12\">\n                <!--\n                The reason that TransactionAmount gets the symbols and\n                TransactionForeignAmount gets the ID's of the currencies is\n                because ultimately TransactionAmount doesn't decide which\n                currency id is submitted to Firefly III.\n                -->\n                <TransactionForeignAmount\n                    v-model=\"transaction.foreign_amount\"\n                    v-on=\"$listeners\"\n                    :destination-currency-id=\"this.transaction.destination_account_currency_id\"\n                    :errors=\"transaction.errors.foreign_amount\"\n                    :index=\"index\"\n                    :selected-currency-id=\"this.transaction.foreign_currency_id\"\n                    :source-currency-id=\"this.transaction.source_account_currency_id\"\n                    :transaction-type=\"this.transactionType\"\n                />\n              </div>\n            </div>\n\n            <!-- dates -->\n            <div class=\"row\">\n              <div class=\"col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12\">\n                <TransactionDate\n                    v-on=\"$listeners\"\n                    :date=\"splitDate\"\n                    :errors=\"transaction.errors.date\"\n                    :index=\"index\"\n                />\n              </div>\n\n              <div class=\"col-xl-5 col-lg-5 col-md-12 col-sm-12 col-xs-12 offset-xl-2 offset-lg-2\">\n                <TransactionCustomDates\n                    v-on=\"$listeners\"\n                    :book-date=\"transaction.book_date\"\n                    :custom-fields.sync=\"customFields\"\n                    :due-date=\"transaction.due_date\"\n                    :errors=\"transaction.errors.custom_dates\"\n                    :index=\"index\"\n                    :interest-date=\"transaction.interest_date\"\n                    :invoice-date=\"transaction.invoice_date\"\n                    :payment-date=\"transaction.payment_date\"\n                    :process-date=\"transaction.process_date\"\n                />\n              </div>\n            </div>\n\n            <!-- end of body -->\n          </div>\n        </div>\n      </div>\n    </div> <!-- end of basic card -->\n\n    <!-- card for meta -->\n    <div class=\"row\">\n      <div class=\"col\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <h3 class=\"card-title\">\n              {{ $t('firefly.transaction_journal_meta') }}\n              <span v-if=\"count > 1\">({{ index + 1 }} / {{ count }}) </span>\n            </h3>\n          </div>\n          <div class=\"card-body\">\n            <!-- start of body -->\n            <!-- meta -->\n            <div class=\"row\">\n              <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\">\n                <TransactionBudget\n                    v-if=\"!('Transfer' === transactionType || 'Deposit' === transactionType)\"\n                    v-model=\"transaction.budget_id\"\n                    v-on=\"$listeners\"\n                    :errors=\"transaction.errors.budget\"\n                    :index=\"index\"\n                />\n                <TransactionCategory\n                    v-model=\"transaction.category\"\n                    v-on=\"$listeners\"\n                    :errors=\"transaction.errors.category\"\n                    :index=\"index\"\n                />\n              </div>\n              <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\">\n                <TransactionBill\n                    v-if=\"!('Transfer' === transactionType || 'Deposit' === transactionType)\"\n                    v-model=\"transaction.bill_id\"\n                    v-on=\"$listeners\"\n                    :errors=\"transaction.errors.bill\"\n                    :index=\"index\"\n                />\n                <TransactionTags\n                    v-model=\"transaction.tags\"\n                    v-on=\"$listeners\"\n                    :errors=\"transaction.errors.tags\"\n                    :index=\"index\"\n                />\n                <TransactionPiggyBank\n                    v-if=\"!('Withdrawal' === transactionType || 'Deposit' === transactionType)\"\n                    v-model=\"transaction.piggy_bank_id\"\n                    v-on=\"$listeners\"\n                    :errors=\"transaction.errors.piggy_bank\"\n                    :index=\"index\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- end card for meta -->\n    <!-- card for extra -->\n    <div v-if=\"hasMetaFields\" class=\"row\">\n      <div class=\"col\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <h3 class=\"card-title\">\n              {{ $t('firefly.transaction_journal_extra') }}\n              <span v-if=\"count > 1\">({{ index + 1 }} / {{ count }}) </span>\n            </h3>\n          </div>\n          <div class=\"card-body\">\n            <!-- start of body -->\n            <div class=\"row\">\n              <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\">\n\n                <TransactionInternalReference\n                    v-model=\"transaction.internal_reference\"\n                    v-on=\"$listeners\"\n                    :custom-fields.sync=\"customFields\"\n                    :errors=\"transaction.errors.internal_reference\"\n                    :index=\"index\"\n                />\n\n                <TransactionExternalUrl\n                    v-model=\"transaction.external_url\"\n                    v-on=\"$listeners\"\n                    :custom-fields.sync=\"customFields\"\n                    :errors=\"transaction.errors.external_url\"\n                    :index=\"index\"\n                />\n                <TransactionNotes\n                    v-model=\"transaction.notes\"\n                    v-on=\"$listeners\"\n                    :custom-fields.sync=\"customFields\"\n                    :errors=\"transaction.errors.notes\"\n                    :index=\"index\"\n                />\n              </div>\n              <div class=\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\">\n\n                <TransactionAttachments\n                    ref=\"attachments\"\n                    v-model=\"transaction.attachments\"\n                    v-on=\"$listeners\"\n                    :custom-fields.sync=\"customFields\"\n                    :index=\"index\"\n                    :transaction_journal_id=\"transaction.transaction_journal_id\"\n                    :upload-trigger=\"transaction.uploadTrigger\"\n                    :clear-trigger=\"transaction.clearTrigger\"\n                />\n                <TransactionLocation\n                    v-model=\"transaction.location\"\n                    v-on=\"$listeners\"\n                    :custom-fields.sync=\"customFields\"\n                    :errors=\"transaction.errors.location\"\n                    :index=\"index\"\n                />\n\n                <TransactionLinks\n                    v-model=\"transaction.links\"\n                    v-on=\"$listeners\"\n                    :custom-fields.sync=\"customFields\"\n                    :index=\"index\"\n                />\n              </div>\n\n            </div>\n            <!-- end of body -->\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- end card for extra -->\n    <!-- end of card -->\n  </div>\n</template>\n\n<script>\n\nimport TransactionDescription from \"./TransactionDescription\";\nimport TransactionDate from \"./TransactionDate\";\nimport TransactionBudget from \"./TransactionBudget\";\nimport TransactionAccount from \"./TransactionAccount\";\nimport SwitchAccount from \"./SwitchAccount\";\nimport TransactionAmount from \"./TransactionAmount\";\nimport TransactionForeignAmount from \"./TransactionForeignAmount\";\nimport TransactionForeignCurrency from \"./TransactionForeignCurrency\";\nimport TransactionCustomDates from \"./TransactionCustomDates\";\nimport TransactionCategory from \"./TransactionCategory\";\nimport TransactionBill from \"./TransactionBill\";\nimport TransactionTags from \"./TransactionTags\";\nimport TransactionPiggyBank from \"./TransactionPiggyBank\";\nimport TransactionInternalReference from \"./TransactionInternalReference\";\nimport TransactionExternalUrl from \"./TransactionExternalUrl\";\nimport TransactionNotes from \"./TransactionNotes\";\nimport TransactionLinks from \"./TransactionLinks\";\nimport TransactionAttachments from \"./TransactionAttachments\";\nimport SplitPills from \"./SplitPills\";\nimport TransactionLocation from \"./TransactionLocation\";\n\nexport default {\n  name: \"SplitForm\",\n  props: {\n    transaction: {\n      type: Object,\n      required: true\n    },\n    count: {\n      type: Number,\n      required: true\n    },\n    customFields: {\n      type: Object,\n      required: false\n    },\n    index: {\n      type: Number,\n      required: true\n    },\n    date: {\n      type: String,\n      required: true\n    },\n    transactionType: {\n      type: String,\n      required: true\n    },\n    sourceAllowedTypes: {\n      type: Array,\n      required: false,\n      default: function () {\n        return [];\n      }\n    }, // allowed source account types.\n    destinationAllowedTypes: {\n      type: Array,\n      required: false,\n      default: function () {\n        return [];\n      }\n    },\n    // allow switch?\n    allowSwitch: {\n      type: Boolean,\n      required: false,\n      default: false\n    }\n\n  },\n  created() {\n    // console.log('SplitForm(' + this.index + ')');\n  },\n  methods: {\n    removeTransaction: function () {\n      // console.log('Will remove transaction ' + this.index);\n      this.$emit('remove-transaction', {index: this.index});\n    },\n  },\n  computed: {\n    splitDate: function () {\n      return this.date;\n    },\n    sourceAccount: function () {\n      //console.log('computed::sourceAccount(' + this.index + ')');\n      return {\n        id: this.transaction.source_account_id,\n        name: this.transaction.source_account_name,\n        type: this.transaction.source_account_type,\n      };\n      //console.log(JSON.stringify(value));\n      //return value;\n    },\n    destinationAccount: function () {\n      //console.log('computed::destinationAccount(' + this.index + ')');\n      return {\n        id: this.transaction.destination_account_id,\n        name: this.transaction.destination_account_name,\n        type: this.transaction.destination_account_type,\n      };\n      //console.log(JSON.stringify(value));\n      //return value;\n    },\n    hasMetaFields: function () {\n      let requiredFields = [\n        'internal_reference',\n        'notes',\n        'attachments',\n        'external_uri',\n        'location',\n        'links',\n      ];\n      for (let field in this.customFields) {\n        if (this.customFields.hasOwnProperty(field)) {\n          if (requiredFields.includes(field)) {\n            if (true === this.customFields[field]) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    }\n  },\n  components: {\n    TransactionLocation,\n    SplitPills,\n    TransactionAttachments,\n    TransactionNotes,\n    TransactionExternalUrl,\n    TransactionInternalReference,\n    TransactionPiggyBank,\n    TransactionTags,\n    TransactionLinks,\n    TransactionBill,\n    TransactionCategory,\n    TransactionCustomDates,\n    TransactionForeignCurrency,\n    TransactionForeignAmount,\n    TransactionAmount,\n    SwitchAccount,\n    TransactionAccount,\n    TransactionBudget,\n    TransactionDescription,\n    TransactionDate\n  },\n}\n</script>\n","<!--\n  - TransactionDescription.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <vue-typeahead-bootstrap\n        v-model=\"description\"\n        :data=\"descriptions\"\n        :inputClass=\"errors.length > 0 ? 'is-invalid' : ''\"\n        :minMatchingChars=\"3\"\n        :placeholder=\"$t('firefly.description')\"\n        :serializer=\"item => item.description\"\n        :showOnFocus=true\n        autofocus\n        inputName=\"description[]\"\n        @input=\"lookupDescription\"\n    >\n      <template slot=\"append\">\n        <div class=\"input-group-append\">\n          <button class=\"btn btn-outline-secondary\" tabindex=\"-1\" type=\"button\" v-on:click=\"clearDescription\"><span class=\"far fa-trash-alt\"></span></button>\n        </div>\n      </template>\n    </vue-typeahead-bootstrap>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\n\nimport VueTypeaheadBootstrap from 'vue-typeahead-bootstrap';\nimport {debounce} from \"lodash\";\n\nexport default {\n  props: ['index', 'value', 'errors'],\n  components: {VueTypeaheadBootstrap},\n  name: \"TransactionDescription\",\n  data() {\n    return {\n      descriptions: [],\n      initialSet: [],\n      description: this.value,\n    }\n  },\n  created() {\n    axios.get(this.getACURL(''))\n        .then(response => {\n          this.descriptions = response.data;\n          this.initialSet = response.data;\n        });\n  },\n\n  methods: {\n    clearDescription: function () {\n      this.description = '';\n    },\n    getACURL: function (query) {\n      // update autocomplete URL:\n      return document.getElementsByTagName('base')[0].href + 'api/v1/autocomplete/transactions?query=' + query;\n    },\n    lookupDescription: debounce(function () {\n      // update autocomplete URL:\n      axios.get(this.getACURL(this.value))\n          .then(response => {\n            this.descriptions = response.data;\n          })\n    }, 300)\n  },\n  watch: {\n    value: function (value) {\n      this.description = value;\n    },\n    description: function (value) {\n      this.$emit('set-field', {field: 'description', index: this.index, value: value});\n    }\n  },\n}\n</script>\n","import { render } from \"./TransactionDescription.vue?vue&type=template&id=375a57e5\"\nimport script from \"./TransactionDescription.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionDescription.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionDate.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\" v-if=\"0===index\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.date_and_time') }}\n    </div>\n    <div class=\"input-group\">\n      <input\n          ref=\"date\"\n          v-model=\"dateStr\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"dateStr\"\n          :title=\"$t('firefly.date')\"\n          autocomplete=\"off\"\n          name=\"date[]\"\n          type=\"date\"\n      >\n      <input\n          ref=\"time\"\n          v-model=\"timeStr\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"timeStr\"\n          :title=\"$t('firefly.time')\"\n          autocomplete=\"off\"\n          name=\"time[]\"\n          type=\"time\"\n      >\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n    <span class=\"text-muted small\">{{ localTimeZone }}:{{ systemTimeZone }}</span>\n  </div>\n</template>\n\n<script>\n\nimport {mapGetters} from \"vuex\";\n\nexport default {\n  props: ['index', 'errors', 'date'],\n  name: \"TransactionDate\",\n  created() {\n    this.localTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    this.systemTimeZone = this.timezone;\n    // console.log('TransactionDate: ' + this.date);\n    // split date and time:\n    let parts = this.date.split('T');\n    this.dateStr = parts[0];\n    this.timeStr = parts[1];\n\n  },\n  data() {\n    return {\n      localDate: this.date,\n      localTimeZone: '',\n      systemTimeZone: '',\n      timeStr: '',\n      dateStr: '',\n    }\n  },\n  watch: {\n    dateStr: function (value) {\n      this.$emit('set-date', {date: value + 'T' + this.timeStr});\n    },\n    timeStr: function (value) {\n      this.$emit('set-date', {date: this.dateStr + 'T' + value});\n    }\n  },\n  methods: {},\n  computed: {\n    ...mapGetters('root', ['timezone']),\n  }\n}\n</script>\n","import { render } from \"./TransactionDate.vue?vue&type=template&id=67a4f77b\"\nimport script from \"./TransactionDate.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionDate.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionBudget.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.budget') }}\n    </div>\n    <div class=\"input-group\">\n      <select\n          ref=\"budget\"\n          v-model=\"budget\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :title=\"$t('firefly.budget')\"\n          autocomplete=\"off\"\n          name=\"budget_id[]\"\n      >\n        <option v-for=\"budget in this.budgetList\" :label=\"budget.name\" :value=\"budget.id\">{{ budget.name }}</option>\n      </select>\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['index', 'value', 'errors'],\n  name: \"TransactionBudget\",\n  data() {\n    return {\n      budgetList: [],\n      budget: this.value,\n      emitEvent: true\n    }\n  },\n  created() {\n    this.collectData();\n  },\n  methods: {\n    collectData() {\n      this.budgetList.push(\n          {\n            id: 0,\n            name: this.$t('firefly.no_budget'),\n          }\n      );\n      this.getBudgets();\n    },\n    getBudgets() {\n      axios.get('./api/v1/budgets')\n          .then(response => {\n                  this.parseBudgets(response.data);\n                }\n          );\n    },\n    parseBudgets(data) {\n      for (let key in data.data) {\n        if (data.data.hasOwnProperty(key) && /^0$|^[1-9]\\d*$/.test(key) && key <= 4294967294) {\n          let current = data.data[key];\n          if(!current.attributes.active) {\n            continue;\n          }\n          this.budgetList.push(\n              {\n                id: parseInt(current.id),\n                name: current.attributes.name\n              }\n          );\n        }\n      }\n    },\n  },\n  watch: {\n    value: function (value) {\n      this.emitEvent = false;\n      this.budget = value;\n    },\n    budget: function (value) {\n      this.$emit('set-field', {field: 'budget_id', index: this.index, value: value});\n    }\n  },\n}\n</script>\n","import { render } from \"./TransactionBudget.vue?vue&type=template&id=54257463\"\nimport script from \"./TransactionBudget.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionBudget.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionAccount.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div v-if=\"visible\" class=\"text-xs d-none d-lg-block d-xl-block\">\n      <span v-if=\"0 === this.index\">{{ $t('firefly.' + this.direction + '_account') }}</span>\n      <span v-if=\"this.index > 0\" class=\"text-warning\">{{ $t('firefly.first_split_overrules_' + this.direction) }}</span>\n    </div>\n    <div v-if=\"!visible\" class=\"text-xs d-none d-lg-block d-xl-block\">\n      &nbsp;\n    </div>\n    <vue-typeahead-bootstrap\n        v-if=\"visible\"\n        v-model=\"accountName\"\n        :data=\"accounts\"\n        :inputClass=\"errors.length > 0 ? 'is-invalid' : ''\"\n        :inputName=\"direction + '[]'\"\n        :minMatchingChars=\"3\"\n        :placeholder=\"$t('firefly.' + direction + '_account')\"\n        :serializer=\"item => item.name_with_balance\"\n        :showOnFocus=true\n        aria-autocomplete=\"none\"\n        autocomplete=\"off\"\n        @hit=\"userSelectedAccount\"\n        @input=\"lookupAccount\"\n    >\n\n      <template slot=\"suggestion\" slot-scope=\"{ data, htmlText }\">\n        <div :title=\"data.type\" class=\"d-flex\">\n          <span v-html=\"htmlText\"></span><br>\n        </div>\n      </template>\n      <template slot=\"append\">\n        <div class=\"input-group-append\">\n          <button class=\"btn btn-outline-secondary\" tabindex=\"-1\" type=\"button\" v-on:click=\"clearAccount\"><span class=\"far fa-trash-alt\"></span></button>\n        </div>\n      </template>\n    </vue-typeahead-bootstrap>\n    <div v-if=\"!visible\" class=\"form-control-static\">\n      <span class=\"small text-muted\"><em>{{ $t('firefly.first_split_decides') }}</em></span>\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n      </span>\n  </div>\n</template>\n\n<script>\n\nimport VueTypeaheadBootstrap from 'vue-typeahead-bootstrap';\nimport {debounce} from 'lodash';\n\nexport default {\n  name: \"TransactionAccount\",\n  components: {VueTypeaheadBootstrap},\n  props: {\n    index: {\n      type: Number,\n    },\n    direction: {\n      type: String,\n    },\n    value: {\n      type: Object,\n      default: () => ({})\n    },\n    errors: {\n      type: Array,\n      default: () => ([])\n    },\n    sourceAllowedTypes: {\n      type: Array,\n      default: () => ([])\n    },\n    destinationAllowedTypes: {\n      type: Array,\n      default: () => ([])\n    },\n    transactionType: {\n      type: String,\n      default: 'any'\n    },\n  },\n  data() {\n    return {\n      query: '',\n      accounts: [],\n      accountTypes: [],\n      initialSet: [],\n      selectedAccount: {},\n      accountName: '',\n      selectedAccountTrigger: false,\n    }\n  },\n  created() {\n    this.accountName = this.value.name ?? '';\n    // console.log('TransactionAccount::created() direction=' + this.direction + ', type=' + this.transactionType + ' , name=\"' + this.accountName + '\"');\n    this.selectedAccountTrigger = true;\n  },\n  methods: {\n    getACURL: function (types, query) {\n      return './api/v1/autocomplete/accounts?types=' + types.join(',') + '&query=' + query;\n    },\n    userSelectedAccount: function (event) {\n      // console.log('userSelectedAccount!');\n      // console.log('To prevent invalid propogation, set selectedAccountTrigger = true');\n      this.selectedAccountTrigger = true;\n      this.selectedAccount = event;\n    },\n    systemReturnedAccount: function (event) {\n      //console.log('systemReturnedAccount!');\n      //console.log('To prevent invalid propogation, set selectedAccountTrigger = false');\n      this.selectedAccountTrigger = false;\n      this.selectedAccount = event;\n    },\n    clearAccount: function () {\n      //// console.log('TransactionAccount::clearAccount()');\n      this.accounts = this.initialSet;\n      //this.account = {name: '', type: 'no_type', id: null, currency_id: null, currency_code: null, currency_symbol: null};\n      this.accountName = '';\n    },\n    lookupAccount: debounce(function () {\n      //// console.log('TransactionAccount::lookupAccount()');\n      //// console.log('In lookupAccount()');\n      if (0 === this.accountTypes.length) {\n        // set the types from the default types for this direction:\n        this.accountTypes = 'source' === this.direction ? this.sourceAllowedTypes : this.destinationAllowedTypes;\n      }\n      // // console.log(this.direction + ': Will search for types:');\n      // // console.log(this.accountTypes);\n\n      // update autocomplete URL:\n      axios.get(this.getACURL(this.accountTypes, this.accountName))\n          .then(response => {\n            //// console.log('Got a response!');\n            this.accounts = response.data;\n            //// console.log(response.data);\n          })\n    }, 300),\n\n    createInitialSet: function () {\n      //// console.log('TransactionAccount::createInitialSet()');\n      let types = this.sourceAllowedTypes;\n      if ('destination' === this.direction) {\n        types = this.destinationAllowedTypes;\n      }\n      // // console.log('createInitialSet() direction=' + this.direction + ' resets to these types:');\n      // // console.log(types);\n\n      axios.get(this.getACURL(types, ''))\n          .then(response => {\n            this.accounts = response.data;\n            this.initialSet = response.data;\n          });\n    }\n  },\n  watch: {\n    sourceAllowedTypes: function (value) {\n      //// console.log('TransactionAccount::sourceAllowedTypes()');\n      // // console.log(this.direction + ' account noticed change in sourceAllowedTypes');\n      // // console.log(value);\n      this.createInitialSet();\n    },\n    destinationAllowedTypes: function (value) {\n      //// console.log('TransactionAccount::destinationAllowedTypes()');\n      // // console.log(this.direction + ' account noticed change in destinationAllowedTypes');\n      // // console.log(value);\n      this.createInitialSet();\n    },\n    /**\n     * Triggered when the user selects an account from the auto-complete.\n     *\n     * @param value\n     */\n    selectedAccount: function (value) {\n      //console.log('TransactionAccount::watch selectedAccount()');\n      // console.log(value);\n      if (true === this.selectedAccountTrigger) {\n        // console.log('$emit alles!');\n        this.$emit('set-account',\n                   {\n                     index: this.index,\n                     direction: this.direction,\n                     id: value.id,\n                     type: value.type,\n                     name: value.name,\n                     currency_id: value.currency_id,\n                     currency_code: value.currency_code,\n                     currency_symbol: value.currency_symbol,\n                   }\n        );\n        //console.log('watch::selectedAccount() will now set accountName because selectedAccountTrigger = true');\n        this.accountName = value.name;\n      }\n      if (false === this.selectedAccountTrigger) {\n        //console.log('watch::selectedAccount() will NOT set accountName because selectedAccountTrigger = false');\n      }\n      if (false === this.selectedAccountTrigger && this.accountName !== value.name && null !== value.name) {\n        //console.log('watch::selectedAccount() will set accountName. selectedAccountTrigger = false but name is different (\"' + this.accountName + '\" > \"' + value.name + '\")');\n        this.selectedAccountTrigger = true;\n        this.accountName = value.name;\n      }\n\n    },\n    accountName: function (value) {\n      // console.log('now at watch accountName(\"' + value + '\")');\n      // console.log(this.selectedAccountTrigger);\n      if (true === this.selectedAccountTrigger) {\n        // console.log('Do nothing because selectedAccountTrigger = true');\n      }\n      if (false === this.selectedAccountTrigger) {\n        // console.log('$emit name from watch::accountName() because selectedAccountTrigger = false');\n        this.$emit('set-account',\n                   {\n                     index: this.index,\n                     direction: this.direction,\n                     id: null,\n                     type: null,\n                     name: value,\n                     currency_id: null,\n                     currency_code: null,\n                     currency_symbol: null,\n                   }\n        );\n        // this.account = {name: value, type: null, id: null, currency_id: null, currency_code: null, currency_symbol: null};\n      }\n      // console.log('set selectedAccountTrigger to be FALSE');\n      this.selectedAccountTrigger = false;\n    },\n    value: function (value) {\n      //console.log('TransactionAccount(' + this.index + ')::watch value(' + JSON.stringify(value) + ')');\n      this.systemReturnedAccount(value);\n\n      // // console.log('Index ' + this.index + ' nwAct: ', value);\n      // // console.log(this.direction + ' account overruled by external forces.');\n      // // console.log(value);\n      //this.account = value;\n      //this.selectedAccountTrigger = true;\n      // this.accountName = value.name ?? '';\n      // if(null !== value.id) {\n      // return;\n      // }\n      // this.selectedAccountTrigger = true;\n      //\n      // // console.log('Set selectedAccountTrigger = true');\n      // this.selectedAccount = value;\n    }\n  },\n  computed: {\n    accountKey: {\n      get() {\n        return 'source' === this.direction ? 'source_account' : 'destination_account';\n      }\n    },\n    visible: {\n      get() {\n        // index  0 is always visible:\n        if (0 === this.index) {\n          return true;\n        }\n        // // console.log('Direction of account ' + this.index + ' is ' + this.direction + '(' + this.transactionType + ')');\n        // // console.log(this.transactionType);\n        if ('source' === this.direction) {\n          return 'any' === this.transactionType || 'Deposit' === this.transactionType || typeof this.transactionType === 'undefined';\n        }\n        if ('destination' === this.direction) {\n          return 'any' === this.transactionType || 'Withdrawal' === this.transactionType || typeof this.transactionType === 'undefined';\n        }\n        return false;\n      }\n    }\n  }\n}\n</script>\n","import { render } from \"./TransactionAccount.vue?vue&type=template&id=49893d47\"\nimport script from \"./TransactionAccount.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionAccount.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - SwitchAccount.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      <span v-if=\"'any' !== this.transactionType\" class=\"text-muted\">\n        {{ $t('firefly.' + this.transactionType) }}\n      </span>\n      <span v-if=\"'any' === this.transactionType\" class=\"text-muted\">&nbsp;</span>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"SwitchAccount\",\n  props: ['index', 'transactionType'],\n  methods: {\n    // switchAccounts() {\n    //   this.$emit('switch-accounts', this.index);\n    // }\n  }\n}\n</script>\n\n","import { render } from \"./SwitchAccount.vue?vue&type=template&id=7ccf55e2\"\nimport script from \"./SwitchAccount.vue?vue&type=script&lang=js\"\nexport * from \"./SwitchAccount.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionAmount.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs\">{{ $t('firefly.amount') }}</div>\n    <div class=\"input-group\">\n      <div v-if=\"currencySymbol\" class=\"input-group-prepend\">\n        <div class=\"input-group-text\">{{ currencySymbol }}</div>\n      </div>\n      <input\n          v-model=\"transactionAmount\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"$t('firefly.amount')\"\n          :title=\"$t('firefly.amount')\"\n          autocomplete=\"off\"\n          name=\"amount[]\"\n          type=\"number\"\n          step=\"any\"\n      >\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: \"TransactionAmount\",\n  props: {\n    index: {\n      type: Number,\n      default: 0,\n      required: true\n    },\n    errors: {},\n    amount: {},\n    transactionType: {},\n    sourceCurrencySymbol: {},\n    destinationCurrencySymbol: {},\n    fractionDigits: {\n      default: 2,\n      required: false\n    },\n  },\n  created() {\n    if ('' !== this.amount) {\n      this.emitEvent = false;\n      this.transactionAmount = this.formatNumber(this.amount);\n    }\n  },\n  methods: {\n    formatNumber(str) {\n      return parseFloat(str).toFixed(this.fractionDigits);\n    }\n  },\n  data() {\n    return {\n      transactionAmount: this.amount,\n      currencySymbol: null,\n      srcCurrencySymbol: this.sourceCurrencySymbol,\n      dstCurrencySymbol: this.destinationCurrencySymbol,\n      emitEvent: true\n    }\n  },\n  watch: {\n    transactionAmount: function (value) {\n      if (true === this.emitEvent) {\n        this.$emit('set-field', {field: 'amount', index: this.index, value: value});\n      }\n      this.emitEvent = true;\n    },\n    amount: function (value) {\n      this.transactionAmount = value;\n    },\n    sourceCurrencySymbol: function (value) {\n      this.srcCurrencySymbol = value;\n    },\n    destinationCurrencySymbol: function (value) {\n      this.dstCurrencySymbol = value;\n    },\n    transactionType: function (value) {\n      switch (value) {\n        case 'Transfer':\n        case 'Withdrawal':\n          this.currencySymbol = this.srcCurrencySymbol;\n          break;\n        case 'Deposit':\n          this.currencySymbol = this.dstCurrencySymbol;\n      }\n    },\n  },\n}\n</script>\n\n","import { render } from \"./TransactionAmount.vue?vue&type=template&id=0b4c09d0\"\nimport script from \"./TransactionAmount.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionAmount.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionForeignAmount.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <!-- FOREIGN AMOUNT -->\n  <div v-if=\"isVisible\" class=\"form-group\">\n    <div class=\"text-xs\">{{ $t('form.foreign_amount') }}</div>\n    <div class=\"input-group\">\n      <input\n          v-model=\"amount\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"$t('form.foreign_amount')\"\n          :title=\"$t('form.foreign_amount')\"\n          autocomplete=\"off\"\n          name=\"foreign_amount[]\"\n          type=\"number\"\n      >\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"TransactionForeignAmount\",\n  props: {\n    index: {},\n    errors: {},\n    value: {},\n    transactionType: {},\n    sourceCurrencyId: {},\n    destinationCurrencyId: {},\n    fractionDigits: {\n      type: Number,\n      default: 2\n    }\n  },\n  data() {\n    return {\n      amount: this.value,\n      emitEvent: true\n    }\n  },\n  created() {\n    if ('' !== this.amount) {\n      this.emitEvent = false;\n      this.amount = this.formatNumber(this.amount);\n    }\n  },\n  methods: {\n    formatNumber(str) {\n      return parseFloat(str).toFixed(this.fractionDigits);\n    }\n  },\n  watch: {\n    amount: function (value) {\n      if (true === this.emitEvent) {\n        this.$emit('set-field', {field: 'foreign_amount', index: this.index, value: value});\n      }\n      this.emitEvent = true;\n    },\n    value: function (value) {\n      this.amount = value;\n\n\n    }\n  },\n  computed: {\n    isVisible: {\n      get() {\n        return !('transfer' === this.transactionType.toLowerCase() && parseInt(this.sourceCurrencyId) === parseInt(this.destinationCurrencyId));\n      }\n    },\n  }\n}\n</script>\n\n","import { render } from \"./TransactionForeignAmount.vue?vue&type=template&id=c2e81206\"\nimport script from \"./TransactionForeignAmount.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionForeignAmount.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionForeignCurrency.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <!-- FOREIGN Currency -->\n  <div v-if=\"isVisible\" class=\"form-group\">\n    <div class=\"text-xs\">&nbsp;</div>\n    <div class=\"input-group\">\n      <select v-model=\"selectedCurrency\" class=\"form-control\" name=\"foreign_currency_id[]\">\n        <option v-for=\"currency in selectableCurrencies\" :label=\"currency.name\" :value=\"currency.id\">{{ currency.name }}</option>\n      </select>\n    </div>\n  </div>\n</template>\n<script>\n\nexport default {\n  name: \"TransactionForeignCurrency\",\n  props: [\n    'index',\n    'transactionType',\n    'sourceCurrencyId',\n    'destinationCurrencyId',\n    'selectedCurrencyId',\n    'value'\n  ],\n  data() {\n    return {\n      selectedCurrency: this.value,\n      allCurrencies: [],\n      selectableCurrencies: [],\n      dstCurrencyId: this.destinationCurrencyId,\n      srcCurrencyId: this.sourceCurrencyId,\n      lockedCurrency: 0,\n      emitEvent: true\n    }\n  },\n  watch: {\n    value: function (value) {\n      this.selectedCurrency = value;\n    },\n    sourceCurrencyId: function (value) {\n      // console.log('Watch sourceCurrencyId');\n      this.srcCurrencyId = value;\n      this.lockCurrency();\n    },\n    destinationCurrencyId: function (value) {\n      // console.log('Watch destinationCurrencyId');\n      this.dstCurrencyId = value;\n      this.lockCurrency();\n    },\n    selectedCurrency: function (value) {\n      this.$emit('set-field', {field: 'foreign_currency_id', index: this.index, value: value});\n    },\n    transactionType: function (value) {\n      this.lockCurrency();\n    },\n  },\n  created: function () {\n    // console.log('Created TransactionForeignCurrency');\n    this.getAllCurrencies();\n  },\n  methods: {\n    lockCurrency: function () {\n      // console.log('Lock currency (' + this.transactionType + ')');\n      this.lockedCurrency = 0;\n      if ('transfer' === this.transactionType.toLowerCase()) {\n        // console.log('IS a transfer!');\n        this.lockedCurrency = parseInt(this.dstCurrencyId);\n        this.selectedCurrency = parseInt(this.dstCurrencyId);\n      }\n      this.filterCurrencies();\n    },\n    getAllCurrencies: function () {\n      axios.get('./api/v1/autocomplete/currencies')\n          .then(response => {\n                  this.allCurrencies = response.data;\n                  this.filterCurrencies();\n                }\n          );\n\n    },\n    filterCurrencies() {\n      // console.log('filterCurrencies');\n      // console.log(this.lockedCurrency);\n      // if a currency is locked only that currency can (and must) be selected:\n      if (0 !== this.lockedCurrency) {\n        // console.log('Here we are');\n        for (let key in this.allCurrencies) {\n          if (this.allCurrencies.hasOwnProperty(key) && /^0$|^[1-9]\\d*$/.test(key) && key <= 4294967294) {\n            let current = this.allCurrencies[key];\n            if (parseInt(current.id) === this.lockedCurrency) {\n              this.selectableCurrencies = [current];\n              this.selectedCurrency = current.id;\n            }\n          }\n        }\n        // if source + dest ID are the same, skip the whole field.\n\n        return;\n      }\n\n      this.selectableCurrencies = [\n        {\n          \"id\": 0,\n          \"name\": this.$t('firefly.no_currency')\n        }\n      ];\n      for (let key in this.allCurrencies) {\n        if (this.allCurrencies.hasOwnProperty(key) && /^0$|^[1-9]\\d*$/.test(key) && key <= 4294967294) {\n          let current = this.allCurrencies[key];\n          this.selectableCurrencies.push(current);\n        }\n      }\n    }\n  },\n  computed: {\n    isVisible: function () {\n      return !('transfer' === this.transactionType.toLowerCase() && parseInt(this.srcCurrencyId) === parseInt(this.dstCurrencyId));\n    }\n  }\n}\n</script>\n\n","import { render } from \"./TransactionForeignCurrency.vue?vue&type=template&id=7826af29\"\nimport script from \"./TransactionForeignCurrency.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionForeignCurrency.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionCustomDates.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div>\n    <div v-for=\"(enabled, name) in availableFields\" class=\"form-group\">\n      <div v-if=\"enabled && isDateField(name)\" class=\"text-xs d-none d-lg-block d-xl-block\">\n        {{ $t('form.' + name) }}\n      </div>\n      <div v-if=\"enabled && isDateField(name)\" class=\"input-group\">\n        <input\n            :ref=\"name\"\n            :name=\"name + '[]'\"\n            :placeholder=\"$t('form.' + name)\"\n            :title=\"$t('form.' + name)\"\n            :value=\"getFieldValue(name)\"\n            autocomplete=\"off\"\n            class=\"form-control\"\n            type=\"date\"\n            @change=\"setFieldValue($event, name)\"\n        >\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"TransactionCustomDates\",\n  props: [\n    'index',\n    'errors',\n    'customFields',\n    'interestDate',\n    'bookDate',\n    'processDate',\n    'dueDate',\n    'paymentDate',\n    'invoiceDate'\n  ],\n  data() {\n    return {\n      dateFields: ['interest_date', 'book_date', 'process_date', 'due_date', 'payment_date', 'invoice_date'],\n      availableFields: this.customFields,\n      dates: {\n        interest_date: this.interestDate,\n        book_date: this.bookDate,\n        process_date: this.processDate,\n        due_date: this.dueDate,\n        payment_date: this.paymentDate,\n        invoice_date: this.invoiceDate,\n      }\n      ,\n    }\n  },\n  watch: {\n    customFields: function (value) {\n      this.availableFields = value;\n    },\n    interestDate: function (value) {\n      this.dates.interest_date = value;\n    },\n    bookDate: function (value) {\n      this.dates.book_date = value;\n    },\n    processDate: function (value) {\n      this.dates.process_date = value;\n    },\n    dueDate: function (value) {\n      this.dates.due_date = value;\n    },\n    paymentDate: function (value) {\n      this.dates.payment_date = value;\n    },\n    invoiceDate: function (value) {\n      this.dates.invoice_date = value;\n    },\n  },\n  methods: {\n    isDateField: function (name) {\n      return this.dateFields.includes(name)\n    },\n    getFieldValue(field) {\n      return this.dates[field] ?? '';\n    },\n    setFieldValue(event, field) {\n      this.$emit('set-field', {field: field, index: this.index, value: event.target.value});\n    },\n  }\n}\n</script>\n","import { render } from \"./TransactionCustomDates.vue?vue&type=template&id=728c6420\"\nimport script from \"./TransactionCustomDates.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionCustomDates.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionCategory.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.category') }}\n    </div>\n\n    <vue-typeahead-bootstrap\n        v-model=\"category\"\n        :data=\"categories\"\n        :inputClass=\"errors.length > 0 ? 'is-invalid' : ''\"\n        :minMatchingChars=\"3\"\n        :placeholder=\"$t('firefly.category')\"\n        :serializer=\"item => item.name\"\n        :showOnFocus=true\n        inputName=\"category[]\"\n        @hit=\"selectedCategory = $event\"\n        @input=\"lookupCategory\"\n    >\n      <template slot=\"append\">\n        <div class=\"input-group-append\">\n          <button class=\"btn btn-outline-secondary\" tabindex=\"-1\" type=\"button\" v-on:click=\"clearCategory\"><span class=\"far fa-trash-alt\"></span></button>\n        </div>\n      </template>\n    </vue-typeahead-bootstrap>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\n\nimport VueTypeaheadBootstrap from 'vue-typeahead-bootstrap';\nimport {debounce} from \"lodash\";\n\nexport default {\n  props: ['value', 'index', 'errors'],\n  components: {VueTypeaheadBootstrap},\n  name: \"TransactionCategory\",\n  data() {\n    return {\n      categories: [],\n      initialSet: [],\n      category: this.value\n    }\n  },\n\n  created() {\n    //console.log('Created category(' + this.index + ') \"' + this.value + '\"');\n    // initial list of accounts:\n    axios.get(this.getACURL(''))\n        .then(response => {\n          this.categories = response.data;\n          this.initialSet = response.data;\n        });\n  },\n\n  methods: {\n    clearCategory: function () {\n      this.category = '';\n    },\n    getACURL: function (query) {\n      // update autocomplete URL:\n      // console.log('getACURL(\"' + query + '\")');\n      return document.getElementsByTagName('base')[0].href + 'api/v1/autocomplete/categories?query=' + query;\n    },\n    lookupCategory: debounce(function () {\n      // update autocomplete URL:\n      //console.log('Do a search for \"'+this.category+'\"');\n      axios.get(this.getACURL(this.category))\n          .then(response => {\n            this.categories = response.data;\n          })\n    }, 300)\n  },\n  watch: {\n    value: function (value) {\n      this.category = value ?? '';\n    },\n    category: function (value) {\n      this.$emit('set-field', {field: 'category', index: this.index, value: value});\n    }\n  },\n  computed: {\n    selectedCategory: {\n      get() {\n        return this.categories[this.index].name;\n      },\n      set(value) {\n        this.category = value.name;\n      }\n    }\n  }\n}\n</script>","import { render } from \"./TransactionCategory.vue?vue&type=template&id=7b821709\"\nimport script from \"./TransactionCategory.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionCategory.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionBill.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.bill') }}\n    </div>\n    <div class=\"input-group\">\n      <select\n          ref=\"bill\"\n          v-model=\"bill\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :title=\"$t('firefly.bill')\"\n          autocomplete=\"off\"\n          name=\"bill_id[]\"\n      >\n        <option v-for=\"bill in this.billList\" :label=\"bill.name\" :value=\"bill.id\">{{ bill.name }}</option>\n\n      </select>\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['value', 'index', 'errors'],\n  name: \"TransactionBill\",\n  data() {\n    return {\n      billList: [],\n      bill: this.value,\n    }\n  },\n  created() {\n    this.collectData();\n  },\n  methods: {\n    collectData() {\n      this.billList.push(\n          {\n            id: 0,\n            name: this.$t('firefly.no_bill'),\n          }\n      );\n      this.getBills();\n    },\n    getBills() {\n      axios.get('./api/v1/bills')\n          .then(response => {\n                  this.parseBills(response.data);\n                }\n          );\n    },\n    parseBills(data) {\n      for (let key in data.data) {\n        if (data.data.hasOwnProperty(key) && /^0$|^[1-9]\\d*$/.test(key) && key <= 4294967294) {\n          let current = data.data[key];\n          this.billList.push(\n              {\n                id: parseInt(current.id),\n                name: current.attributes.name\n              }\n          );\n        }\n      }\n    },\n  },\n  watch: {\n    value: function (value) {\n      this.emitEvent = false;\n      this.bill = value;\n    },\n    bill: function (value) {\n        this.$emit('set-field', {field: 'bill_id', index: this.index, value: value});\n    }\n  },\n}\n</script>\n\n","import { render } from \"./TransactionBill.vue?vue&type=template&id=e612fb9c\"\nimport script from \"./TransactionBill.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionBill.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionTags.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.tags') }}\n    </div>\n    <div class=\"input-group\">\n      <vue-tags-input\n          v-model=\"currentTag\"\n          :add-only-from-autocomplete=\"false\"\n          :autocomplete-items=\"autocompleteItems\"\n          :tags=\"tags\"\n          :title=\"$t('firefly.tags')\"\n          v-bind:placeholder=\"$t('firefly.tags')\"\n          @tags-changed=\"newTags => this.tags = newTags\"\n      />\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\nimport VueTagsInput from \"@johmun/vue-tags-input\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"TransactionTags\",\n  components: {\n    VueTagsInput\n  },\n  props: ['value', 'index', 'errors'],\n  data() {\n    return {\n      autocompleteItems: [],\n      debounce: null,\n      tags: [],\n      currentTag: '',\n      updateTags: true, // the idea is that this is always true, except when the tags-function sets the value.\n      tagList: this.value,\n    };\n  },\n  created() {\n    let tags = [];\n    for (let i in this.value) {\n      if (this.value.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n        tags.push({text: this.value[i]});\n      }\n    }\n    this.updateTags = false;\n    this.tags = tags;\n  },\n  watch: {\n    'currentTag': 'initItems',\n    value: function (value) {\n      this.tagList = value;\n    },\n    tagList: function (value) {\n      // console.log('watch tagList');\n        this.$emit('set-field', {field: 'tags', index: this.index, value: value});\n      this.updateTags = false;\n      this.tags = value;\n    },\n    tags: function (value) {\n      if (this.updateTags) {\n        let shortList = [];\n        for (let key in value) {\n          if (value.hasOwnProperty(key)) {\n            shortList.push({text: value[key].text});\n          }\n        }\n        this.tagList = shortList;\n      }\n      this.updateTags = true;\n    }\n  },\n  methods: {\n    initItems() {\n      if (this.currentTag.length < 2) {\n        return;\n      }\n      const url = document.getElementsByTagName('base')[0].href + `api/v1/autocomplete/tags?query=${this.currentTag}`;\n\n      clearTimeout(this.debounce);\n      this.debounce = setTimeout(() => {\n        axios.get(url).then(response => {\n          this.autocompleteItems = response.data.map(item => {\n            return {text: item.tag};\n          });\n        }).catch(() => console.warn('Oh. Something went wrong loading tags.'));\n      }, 300);\n    },\n  },\n\n\n}\n</script>\n<style>\n.vue-tags-input {\n  width: 100%;\n  max-width: 100% !important;\n  display: block;\n  border-radius: 0.25rem;\n}\n\n.ti-input {\n  border-radius: 0.25rem;\n  max-width: 100%;\n  width: 100%;\n}\n\n.ti-new-tag-input {\n  font-size: 1rem;\n}\n</style>\n","import api from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-9.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-9.use[2]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./TransactionTags.vue?vue&type=style&index=0&id=dbf814e6&lang=css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render } from \"./TransactionTags.vue?vue&type=template&id=dbf814e6\"\nimport script from \"./TransactionTags.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionTags.vue?vue&type=script&lang=js\"\n\nimport \"./TransactionTags.vue?vue&type=style&index=0&id=dbf814e6&lang=css\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionPiggyBank.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.piggy_bank') }}\n    </div>\n    <div class=\"input-group\">\n      <select\n          ref=\"piggy_bank_id\"\n          v-model=\"piggy_bank_id\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :title=\"$t('firefly.piggy_bank')\"\n          autocomplete=\"off\"\n          name=\"piggy_bank_id[]\"\n      >\n        <option v-for=\"piggy in this.piggyList\" :label=\"piggy.name_with_balance\" :value=\"piggy.id\">{{ piggy.name_with_balance }}</option>\n\n      </select>\n    </div>\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  props: ['index', 'value', 'errors'],\n  name: \"TransactionPiggyBank\",\n  data() {\n    return {\n      piggyList: [],\n      piggy_bank_id: this.value,\n    }\n  },\n  created() {\n    this.collectData();\n  },\n  methods: {\n    collectData() {\n      this.piggyList.push(\n          {\n            id: 0,\n            name_with_balance: this.$t('firefly.no_piggy_bank'),\n          }\n      );\n      this.getPiggies();\n    },\n    getPiggies() {\n      axios.get('./api/v1/autocomplete/piggy-banks-with-balance')\n          .then(response => {\n                  this.parsePiggies(response.data);\n                }\n          );\n    },\n    parsePiggies(data) {\n      for (let key in data) {\n        if (data.hasOwnProperty(key) && /^0$|^[1-9]\\d*$/.test(key) && key <= 4294967294) {\n          let current = data[key];\n          this.piggyList.push(\n              {\n                id: parseInt(current.id),\n                name_with_balance: current.name_with_balance\n              }\n          );\n        }\n      }\n    },\n  },\n  watch: {\n    value: function (value) {\n      this.piggy_bank_id = value;\n    },\n    piggy_bank_id: function (value) {\n      this.$emit('set-field', {field: 'piggy_bank_id', index: this.index, value: value});\n      this.emitEvent = true;\n    }\n  }\n}\n</script>\n","import { render } from \"./TransactionPiggyBank.vue?vue&type=template&id=18aafbc0\"\nimport script from \"./TransactionPiggyBank.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionPiggyBank.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionInternalReference.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div v-if=\"showField\" class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.internal_reference') }}\n    </div>\n    <div class=\"input-group\">\n      <input\n          v-model=\"reference\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"$t('firefly.internal_reference')\"\n          name=\"internal_reference[]\"\n          type=\"text\"\n      />\n      <div class=\"input-group-append\">\n        <button class=\"btn btn-outline-secondary\" tabindex=\"-1\" type=\"button\"><span class=\"far fa-trash-alt\"></span></button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['index', 'value', 'errors', 'customFields'],\n  name: \"TransactionInternalReference\",\n  data() {\n    return {\n      reference: this.value,\n      availableFields: this.customFields,\n      emitEvent: true\n    }\n  },\n  computed: {\n    showField: function () {\n      if ('internal_reference' in this.availableFields) {\n        return this.availableFields.internal_reference;\n      }\n      return false;\n    }\n  },\n  methods: {},\n  watch: {\n    customFields: function (value) {\n      this.availableFields = value;\n    },\n    value: function (value) {\n      this.emitEvent = false;\n      this.reference = value;\n    },\n    reference: function (value) {\n      this.$emit('set-field', {field: 'internal_reference', index: this.index, value: value});\n    }\n  }\n}\n</script>\n","import { render } from \"./TransactionInternalReference.vue?vue&type=template&id=94f353c2\"\nimport script from \"./TransactionInternalReference.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionInternalReference.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionInternalReference.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div v-if=\"showField\" class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.external_url') }}\n    </div>\n    <div class=\"input-group\">\n      <input\n          v-model=\"url\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"$t('firefly.external_url')\"\n          name=\"external_url[]\"\n          type=\"url\"\n      />\n      <div class=\"input-group-append\">\n        <button class=\"btn btn-outline-secondary\" tabindex=\"-1\" type=\"button\"><span class=\"far fa-trash-alt\"></span></button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: ['index', 'value', 'errors', 'customFields'],\n  name: \"TransactionExternalUrl\",\n  data() {\n    return {\n      url: this.value,\n      availableFields: this.customFields,\n    }\n  },\n  computed: {\n    showField: function () {\n      if ('external_uri' in this.availableFields) {\n        return this.availableFields.external_uri;\n      }\n      return false;\n    }\n  },\n  methods: {},\n  watch: {\n    customFields: function (value) {\n      this.availableFields = value;\n    },\n    value: function (value) {\n      this.url = value;\n    },\n    url: function (value) {\n      this.$emit('set-field', {field: 'external_url', index: this.index, value: value});\n    }\n  }\n}\n</script>\n\n","import { render } from \"./TransactionExternalUrl.vue?vue&type=template&id=7a5ee5e8\"\nimport script from \"./TransactionExternalUrl.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionExternalUrl.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionNotes.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n\n  <div v-if=\"showField\" class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.notes') }}\n    </div>\n    <div class=\"input-group\">\n      <textarea\n          v-model=\"notes\"\n          :class=\"errors.length > 0 ? 'form-control is-invalid' : 'form-control'\"\n          :placeholder=\"$t('firefly.notes')\"\n      ></textarea>\n    </div>\n  </div>\n\n</template>\n\n<script>\nexport default {\n  props: ['index', 'value', 'errors', 'customFields'],\n  name: \"TransactionNotes\",\n  data() {\n    return {\n      notes: this.value,\n      availableFields: this.customFields,\n    }\n  },\n  computed: {\n    showField: function () {\n      if ('notes' in this.availableFields) {\n        return this.availableFields.notes;\n      }\n      return false;\n    }\n  },\n  watch: {\n    value: function (value) {\n      this.notes = value;\n    },\n    customFields: function (value) {\n      this.availableFields = value;\n    },\n    notes: function (value) {\n      this.$emit('set-field', {field: 'notes', index: this.index, value: value});\n    }\n  }\n}\n</script>\n\n","import { render } from \"./TransactionNotes.vue?vue&type=template&id=606fd0df\"\nimport script from \"./TransactionNotes.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionNotes.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionLinks.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div v-if=\"showField\">\n    <div class=\"form-group\">\n      <div class=\"text-xs d-none d-lg-block d-xl-block\">\n        {{ $t('firefly.journal_links') }}\n      </div>\n      <div class=\"row\">\n        <div class=\"col\">\n          <p v-if=\"links.length === 0\">\n            <button type=\"button\" class=\"btn btn-default btn-xs\" data-target=\"#linkModal\" @click=\"resetModal\" data-toggle=\"modal\"><span class=\"fas fa-plus\"></span> Add transaction link</button>\n          </p>\n          <ul v-if=\"links.length > 0\" class=\"list-group\">\n            <li v-for=\"(transaction, index) in links\" class=\"list-group-item\" v-bind:key=\"index\">\n              <em>{{ getTextForLinkType(transaction.link_type_id) }}</em>\n              <a :href='\"./transaction/show/\" + transaction.transaction_group_id'>{{ transaction.description }}</a>\n\n              <span v-if=\"transaction.type === 'withdrawal'\">\n                          (<span class=\"text-danger\">{{\n                  Intl.NumberFormat(locale, {\n                    style: 'currency',\n                    currency: transaction.currency_code\n                  }).format(parseFloat(transaction.amount) * -1)\n                }}</span>)\n                        </span>\n              <span v-if=\"transaction.type === 'deposit'\">\n                          (<span class=\"text-success\">{{\n                  Intl.NumberFormat(locale, {\n                    style: 'currency',\n                    currency: transaction.currency_code\n                  }).format(parseFloat(transaction.amount))\n                }}</span>)\n                        </span>\n              <span v-if=\"transaction.type === 'transfer'\">\n                          (<span class=\"text-info\">{{\n                  Intl.NumberFormat(locale, {\n                    style: 'currency',\n                    currency: transaction.currency_code\n                  }).format(parseFloat(transaction.amount))\n                }}</span>)\n                        </span>\n              <div class=\"btn-group btn-group-xs float-right\">\n                <button type=\"button\" class=\"btn btn-xs btn-danger\" @click=\"removeLink(index)\" tabindex=\"-1\"><span class=\"far fa-trash-alt\"></span></button>\n              </div>\n            </li>\n          </ul>\n          <div v-if=\"links.length > 0\" class=\"form-text\">\n            <button type=\"button\" class=\"btn btn-default\" @click=\"resetModal\" data-target=\"#linkModal\" data-toggle=\"modal\"><span class=\"fas fa-plus\"></span></button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- modal -->\n    <div id=\"linkModal\" class=\"modal\" tabindex=\"-1\" ref=\"linkModal\">\n      <div class=\"modal-dialog modal-lg\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Transaction thing dialog.</h5>\n            <button aria-label=\"Close\" class=\"close\" data-dismiss=\"modal\" type=\"button\">\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"container-fluid\">\n              <div class=\"row\">\n                <div class=\"col\">\n                  <p>\n                    Use this form to search for transactions you wish to link to this one. When in doubt, use <code>id:*</code> where the ID is the number from\n                    the URL.\n                  </p>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col\">\n                  <form v-on:submit.prevent=\"search\" autocomplete=\"off\">\n                    <div class=\"input-group\">\n                      <input id=\"query\" v-model=\"query\" autocomplete=\"off\" class=\"form-control\" maxlength=\"255\" name=\"search\"\n                             placeholder=\"Search query\" type=\"text\">\n                      <div class=\"input-group-append\">\n                        <button class=\"btn btn-default\" type=\"submit\"><span class=\"fas fa-search\"></span> Search</button>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col\">\n                  <span v-if=\"searching\"><span class=\"fas fa-spinner fa-spin\"></span></span>\n                  <h4 v-if=\"searchResults.length > 0\">{{ $t('firefly.search_results') }}</h4>\n                  <table v-if=\"searchResults.length > 0\" class=\"table table-sm\">\n                    <caption style=\"display:none;\">{{ $t('firefly.search_results') }}</caption>\n                    <thead>\n                    <tr>\n                      <th scope=\"col\" colspan=\"2\" style=\"width:33%\">{{ $t('firefly.include') }}</th>\n                      <th scope=\"col\">{{ $t('firefly.transaction') }}</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr v-for=\"result in searchResults\">\n                      <td>\n                        <input v-model=\"result.selected\" class=\"form-control\"\n                               type=\"checkbox\"\n                               @change=\"selectTransaction($event)\"\n                        />\n                      </td>\n                      <td>\n                        <select\n                            v-model=\"result.link_type_id\"\n                            class=\"form-control\"\n                            @change=\"selectLinkType($event)\"\n                        >\n                          <option v-for=\"linkType in linkTypes\" :label=\"linkType.type\" :value=\"linkType.id + '-' + linkType.direction\">{{\n                              linkType.type\n                            }}\n                          </option>\n                        </select>\n                      </td>\n                      <td>\n                        <a :href=\"'./transactions/show/' + result.transaction_group_id\">{{ result.description }}</a>\n                        <span v-if=\"result.type === 'withdrawal'\">\n                          (<span class=\"text-danger\">{{\n                            Intl.NumberFormat(locale, {\n                              style: 'currency',\n                              currency: result.currency_code\n                            }).format(parseFloat(result.amount) * -1)\n                          }}</span>)\n                        </span>\n                        <span v-if=\"result.type === 'deposit'\">\n                          (<span class=\"text-success\">{{\n                            Intl.NumberFormat(locale, {\n                              style: 'currency',\n                              currency: result.currency_code\n                            }).format(parseFloat(result.amount))\n                          }}</span>)\n                        </span>\n                        <span v-if=\"result.type === 'transfer'\">\n                          (<span class=\"text-info\">{{\n                            Intl.NumberFormat(locale, {\n                              style: 'currency',\n                              currency: result.currency_code\n                            }).format(parseFloat(result.amount))\n                          }}</span>)\n                        </span>\n                        <br/>\n                        <em>\n                          <a :href=\"'./accounts/show/' + result.source_id\">{{ result.source_name }}</a>\n                          &rarr;\n                          <a :href=\"'./accounts/show/' + result.destination_id\">{{ result.destination_name }}</a>\n                        </em>\n                      </td>\n                    </tr>\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button class=\"btn btn-secondary\" data-dismiss=\"modal\" type=\"button\">Close</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst lodashClonedeep = require('lodash.clonedeep');\n// See reference nr. 3\nexport default {\n  props: ['index', 'value', 'errors', 'customFields'],\n  name: \"TransactionLinks\",\n  data() {\n    return {\n      searchResults: [],\n      include: [],\n      locale: 'en-US',\n      linkTypes: [],\n      query: '',\n      searching: false,\n      links: this.value,\n      availableFields: this.customFields,\n      emitEvent: true\n    }\n  },\n  created() {\n    this.locale = localStorage.locale ?? 'en-US';\n    this.emitEvent = false;\n    this.links = lodashClonedeep(this.value);\n    this.getLinkTypes();\n\n  },\n  computed: {\n    showField: function () {\n      if ('links' in this.availableFields) {\n        return this.availableFields.links;\n      }\n      return false;\n    }\n  },\n  watch: {\n    value: function (value) {\n      if (null !== value) {\n        this.emitEvent = false;\n        this.links = lodashClonedeep(value);\n      }\n    },\n    links: function (value) {\n      if (true === this.emitEvent) {\n        this.$emit('set-field', {index: this.index, field: 'links', value: lodashClonedeep(value)});\n      }\n      this.emitEvent = true;\n    },\n    customFields: function (value) {\n      this.availableFields = value;\n    }\n  },\n  methods: {\n    removeLink: function (index) {\n      this.links.splice(index, 1);\n    },\n    getTextForLinkType: function (linkTypeId) {\n      let parts = linkTypeId.split('-');\n      for (let i in this.linkTypes) {\n        if (this.linkTypes.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.linkTypes[i];\n          if (parts[0] === current.id && parts[1] === current.direction) {\n            return current.type;\n          }\n        }\n      }\n      return 'text for #' + linkTypeId;\n    },\n    selectTransaction: function (event) {\n      for (let i in this.searchResults) {\n        if (this.searchResults.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.searchResults[i];\n          if (current.selected) {\n            this.addToSelected(current);\n          }\n          if (!current.selected) {\n            // remove from\n            this.removeFromSelected(current);\n          }\n        }\n      }\n    },\n    selectLinkType: function (event) {\n      for (let i in this.searchResults) {\n        if (this.searchResults.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.searchResults[i];\n          this.updateSelected(current.transaction_journal_id, current.link_type_id);\n        }\n      }\n    },\n    updateSelected(journalId, linkTypeId) {\n      for (let i in this.links) {\n        if (this.links.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.links[i];\n          if (parseInt(current.transaction_journal_id) === journalId) {\n            this.links[i].link_type_id = linkTypeId;\n          }\n        }\n      }\n    },\n    addToSelected(journal) {\n      let result = this.links.find(({transaction_journal_id}) => transaction_journal_id === journal.transaction_journal_id);\n      if (typeof result === 'undefined') {\n        this.links.push(journal);\n      }\n    },\n    removeFromSelected(journal) {\n      for (let i in this.links) {\n        if (this.links.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.links[i];\n          if (current.transaction_journal_id === journal.transaction_journal_id) {\n            this.links.splice(parseInt(i), 1);\n          }\n        }\n      }\n    },\n    getLinkTypes: function () {\n      let url = './api/v1/link_types';\n      axios.get(url)\n          .then(response => {\n                  this.parseLinkTypes(response.data);\n                }\n          );\n    },\n    resetModal: function() {\n      this.search();\n    },\n    parseLinkTypes: function (data) {\n      for (let i in data.data) {\n        if (data.data.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = data.data[i];\n          let linkTypeInward = {\n            id: current.id,\n            type: current.attributes.inward,\n            direction: 'inward'\n          };\n          let linkTypeOutward = {\n            id: current.id,\n            type: current.attributes.outward,\n            direction: 'outward'\n          };\n          if (linkTypeInward.type === linkTypeOutward.type) {\n            linkTypeInward.type = linkTypeInward.type + ' ()';\n            linkTypeOutward.type = linkTypeOutward.type + ' ()';\n          }\n          this.linkTypes.push(linkTypeInward);\n          this.linkTypes.push(linkTypeOutward);\n        }\n      }\n    },\n    search: function () {\n      if('' === this.query) {\n        this.searchResults = [];\n        return;\n      }\n      this.searching = true;\n      this.searchResults = [];\n      let url = './api/v1/search/transactions?limit=10&query=' + this.query;\n      axios.get(url)\n          .then(response => {\n                  this.parseSearch(response.data);\n                }\n          );\n    },\n    parseSearch: function (data) {\n      for (let i in data.data) {\n        if (data.data.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          for (let ii in data.data[i].attributes.transactions) {\n            if (data.data[i].attributes.transactions.hasOwnProperty(ii) && /^0$|^[1-9]\\d*$/.test(ii) && ii <= 4294967294) {\n              let current = data.data[i].attributes.transactions[ii];\n              current.transaction_group_id = parseInt(data.data[i].id);\n              current.selected = this.isJournalSelected(current.transaction_journal_id);\n              current.link_type_id = this.getJournalLinkType(current.transaction_journal_id);\n              current.link_type_text = '';\n              this.searchResults.push(current);\n            }\n          }\n        }\n      }\n      this.searching = false;\n    },\n    getJournalLinkType: function (journalId) {\n      for (let i in this.links) {\n        if (this.links.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.links[i];\n          if (current.transaction_journal_id === journalId) {\n            return current.link_type_id;\n          }\n        }\n      }\n      return '1-inward';\n    },\n    isJournalSelected: function (journalId) {\n      for (let i in this.links) {\n        if (this.links.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.links[i];\n          if (current.transaction_journal_id === journalId) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n  }\n}\n</script>\n","import { render } from \"./TransactionLinks.vue?vue&type=template&id=7826e6c4\"\nimport script from \"./TransactionLinks.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionLinks.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionAttachments.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div v-if=\"showField\" class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.attachments') }}\n    </div>\n    <div class=\"input-group\">\n      <input\n          ref=\"att\"\n          class=\"form-control\"\n          multiple\n          @change=\"selectedFile\"\n          name=\"attachments[]\"\n          type=\"file\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"TransactionAttachments\",\n  props: ['transaction_journal_id', 'customFields', 'index', 'uploadTrigger', 'clearTrigger'],\n  data() {\n    return {\n      availableFields: this.customFields,\n      uploads: 0,\n      created: 0,\n      uploaded: 0,\n    }\n  },\n  watch: {\n    customFields: function (value) {\n      this.availableFields = value;\n    },\n    uploadTrigger: function () {\n      // console.log('uploadTrigger(' + this.transaction_journal_id + ',' + this.index + ')');\n      this.doUpload();\n    },\n    clearTrigger: function () {\n      // console.log('clearTrigger(' + this.transaction_journal_id + ',' + this.index + ')');\n      this.$refs.att.value = null;\n    },\n    transaction_journal_id: function (value) {\n      // console.log('watch transaction_journal_id: ' + value + ' (index ' + this.index + ')');\n    }\n  },\n  computed: {\n    showField: function () {\n      if ('attachments' in this.availableFields) {\n        return this.availableFields.attachments;\n      }\n      return false;\n    }\n  },\n  methods: {\n    selectedFile: function () {\n      this.$emit('selected-attachments', {index: this.index, id: this.transaction_journal_id});\n    },\n    createAttachment: function (name) {\n      // console.log('Now in createAttachment()');\n      const uri = './api/v1/attachments';\n      const data = {\n        filename: name,\n        attachable_type: 'TransactionJournal',\n        attachable_id: this.transaction_journal_id,\n      };\n      // create new attachment:\n      return axios.post(uri, data);\n    },\n    uploadAttachment: function (attachmentId, data) {\n      this.created++;\n      // console.log('Now in uploadAttachment()');\n      const uploadUri = './api/v1/attachments/' + attachmentId + '/upload';\n      return axios.post(uploadUri, data)\n    },\n    countAttachment: function () {\n      this.uploaded++;\n      // console.log('Uploaded ' + this.uploaded + ' / ' + this.uploads);\n      if (this.uploaded >= this.uploads) {\n        // console.log('All files uploaded. Emit event for ' + this.transaction_journal_id + '(' + this.index + ')');\n        this.$emit('uploaded-attachments', this.transaction_journal_id);\n      }\n    },\n    doUpload: function () {\n      let files = this.$refs.att.files;\n      this.uploads = files.length;\n      // loop all files and create attachments.\n      for (let i in files) {\n        if (files.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          // console.log('Now at file ' + (parseInt(i) + 1) + ' / ' + files.length);\n          // read file into file reader:\n          let current = files[i];\n          let fileReader = new FileReader();\n          let theParent = this; // dont ask me why i need to do this.\n          fileReader.onloadend = evt => {\n            if (evt.target.readyState === FileReader.DONE) {\n              // console.log('I am done reading file ' + (parseInt(i) + 1));\n              this.createAttachment(current.name).then(response => {\n                // console.log('Created attachment. Now upload (1)');\n                return theParent.uploadAttachment(response.data.data.id, new Blob([evt.target.result]));\n              }).then(theParent.countAttachment);\n            }\n          }\n          fileReader.readAsArrayBuffer(current);\n        }\n      }\n      if (0 === files.length) {\n        //console.log('No files to upload. Emit event!');\n        this.$emit('uploaded-attachments', this.transaction_journal_id);\n      }\n      // Promise.all(promises).then(response => {\n      //   console.log('All files uploaded. Emit event!');\n      //   this.$emit('uploaded-attachments', this.transaction_journal_id);\n      // });\n    }\n  }\n\n}\n</script>\n\n","import { render } from \"./TransactionAttachments.vue?vue&type=template&id=0364e752\"\nimport script from \"./TransactionAttachments.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionAttachments.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionLocation.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div v-if=\"showField\" class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.location') }}\n    </div>\n    <div style=\"width:100%;height:300px;\">\n      <l-map\n          ref=\"myMap\"\n          :center=\"center\"\n          :zoom=\"zoom\" style=\"width:100%;height:300px;\"\n          @ready=\"prepMap()\"\n          @update:zoom=\"zoomUpdated\"\n          @update:center=\"centerUpdated\"\n          @update:bounds=\"boundsUpdated\"\n      >\n        <l-tile-layer :url=\"url\"></l-tile-layer>\n        <l-marker :lat-lng=\"marker\" :visible=\"hasMarker\"></l-marker>\n      </l-map>\n      <span>\n        <button class=\"btn btn-default btn-xs\" @click=\"clearLocation\">{{ $t('firefly.clear_location') }}</button>\n      </span>\n    </div>\n    <p>&nbsp;</p>\n  </div>\n</template>\n\n<script>\n\n// If you need to reference 'L', such as in 'L.icon', then be sure to\n// explicitly import 'leaflet' into your component\n// import L from 'leaflet';\nimport {LMap, LMarker, LTileLayer} from 'vue2-leaflet';\nimport 'leaflet/dist/leaflet.css';\n\nimport L from 'leaflet';\n\ndelete L.Icon.Default.prototype._getIconUrl;\n\nL.Icon.Default.mergeOptions({\n                              iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n                              iconUrl: require('leaflet/dist/images/marker-icon.png'),\n                              shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n                            });\n\nexport default {\n  name: \"TransactionLocation\",\n  props: {\n    index: {},\n    value: {\n      type: Object,\n      required: false\n    },\n    errors: {},\n    customFields: {},\n  },\n  components: {\n    LMap,\n    LTileLayer,\n    LMarker,\n  },\n  created() {\n    if (null === this.value || typeof this.value === 'undefined') {\n      axios.get('./api/v1/configuration/firefly.default_location').then(response => {\n        this.zoom = parseInt(response.data.data.value.zoom_level);\n        this.center =\n            [\n              parseFloat(response.data.data.value.latitude),\n              parseFloat(response.data.data.value.longitude),\n            ]\n        ;\n      });\n      return;\n    }\n    if (null !== this.value.zoom_level && null !== this.value.latitude && null !== this.value.longitude) {\n      this.zoom = this.value.zoom_level;\n      this.center = [\n        parseFloat(this.value.latitude),\n        parseFloat(this.value.longitude),\n      ];\n      this.hasMarker = true;\n    }\n  },\n  data() {\n    return {\n      availableFields: this.customFields,\n      url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n      zoom: 3,\n      center: [0, 0],\n      bounds: null,\n      map: null,\n      hasMarker: false,\n      marker: [0, 0],\n    }\n  },\n  methods: {\n    prepMap: function () {\n      this.map = this.$refs.myMap.mapObject;\n      this.map.on('contextmenu', this.setObjectLocation);\n      this.map.on('zoomend', this.saveZoomLevel);\n    },\n    setObjectLocation: function (event) {\n      this.marker = [event.latlng.lat, event.latlng.lng];\n      this.hasMarker = true;\n      this.emitEvent();\n    },\n    saveZoomLevel: function () {\n      this.emitEvent();\n    },\n    clearLocation: function () {\n      this.hasMarker = false;\n      this.emitEvent();\n    },\n    emitEvent() {\n      this.$emit('set-marker-location', {\n                   index: this.index,\n                   zoomLevel: this.zoom,\n                   lat: this.marker[0],\n                   lng: this.marker[1],\n                   hasMarker: this.hasMarker\n                 }\n      );\n    },\n    zoomUpdated(zoom) {\n      this.zoom = zoom;\n    },\n    centerUpdated(center) {\n      this.center = center;\n    },\n    boundsUpdated(bounds) {\n      this.bounds = bounds;\n    }\n  },\n  computed: {\n    showField: function () {\n      if ('location' in this.availableFields) {\n        return this.availableFields.location;\n      }\n      return false;\n    }\n  },\n  watch: {\n    customFields: function (value) {\n      this.availableFields = value;\n    },\n  }\n}\n</script>\n\n","import { render } from \"./TransactionLocation.vue?vue&type=template&id=26d78234\"\nimport script from \"./TransactionLocation.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionLocation.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./SplitForm.vue?vue&type=template&id=8d9e74a0\"\nimport script from \"./SplitForm.vue?vue&type=script&lang=js\"\nexport * from \"./SplitForm.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - SplitPills.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div v-if=\"transactions.length > 1\" class=\"row\">\n    <div class=\"col\">\n      <!-- tabs -->\n      <ul class=\"nav nav-pills ml-auto p-2\" id=\"transactionTabs\">\n        <li v-for=\"(transaction, index) in this.transactions\" class=\"nav-item\"><a :class=\"'nav-link' + (0 === index ? ' active' : '')\"\n                                                                                  :href=\"'#split_' + index\"\n                                                                                  data-toggle=\"pill\">\n          <span v-if=\"'' !== transaction.description\">{{ transaction.description }}</span>\n          <span v-if=\"'' === transaction.description\">Split {{ index + 1 }}</span>\n        </a></li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"SplitPills\",\n  props: {\n    transactions: {\n      type: Array,\n      required: true,\n      default: function() {\n        return [];\n      }\n    },\n    count: {\n      type: Number,\n      required: true\n    },\n  }\n}\n</script>\n","import { render } from \"./SplitPills.vue?vue&type=template&id=6bee3f8d\"\nimport script from \"./SplitPills.vue?vue&type=script&lang=js\"\nexport * from \"./SplitPills.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<!--\n  - TransactionGroupTitle.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div class=\"form-group\">\n    <div class=\"text-xs d-none d-lg-block d-xl-block\">\n      {{ $t('firefly.split_transaction_title') }}\n    </div>\n    <vue-typeahead-bootstrap\n        v-model=\"title\"\n        :data=\"descriptions\"\n        :inputClass=\"errors.length > 0 ? 'is-invalid' : ''\"\n        :minMatchingChars=\"3\"\n        :placeholder=\"$t('firefly.split_transaction_title')\"\n        :serializer=\"item => item.description\"\n        :showOnFocus=true\n        inputName=\"group_title\"\n        @input=\"lookupDescription\"\n    >\n      <template slot=\"append\">\n        <div class=\"input-group-append\">\n          <button class=\"btn btn-outline-secondary\" tabindex=\"-1\" type=\"button\" v-on:click=\"clearDescription\"><span class=\"far fa-trash-alt\"></span></button>\n        </div>\n      </template>\n    </vue-typeahead-bootstrap>\n\n    <span v-if=\"errors.length > 0\">\n      <span v-for=\"error in errors\" class=\"text-danger small\">{{ error }}<br/></span>\n    </span>\n\n  </div>\n</template>\n\n<script>\nimport VueTypeaheadBootstrap from 'vue-typeahead-bootstrap';\nimport {debounce} from \"lodash\";\n\nexport default {\n  props: ['value', 'errors'],\n  name: \"TransactionGroupTitle\",\n  components: {VueTypeaheadBootstrap},\n  data() {\n    return {\n      descriptions: [],\n      initialSet: [],\n      title: this.value,\n      emitEvent: true\n    }\n  },\n\n  created() {\n    axios.get(this.getACURL(''))\n        .then(response => {\n          this.descriptions = response.data;\n          this.initialSet = response.data;\n        });\n  },\n  watch: {\n    value: function (value) {\n      this.title = value;\n    },\n    title: function (value) {\n      this.$emit('set-group-title', value);\n    }\n  },\n  methods: {\n    clearDescription: function () {\n      this.title = '';\n    },\n    getACURL: function (query) {\n      // update autocomplete URL:\n      return document.getElementsByTagName('base')[0].href + 'api/v1/autocomplete/transactions?query=' + query;\n    },\n    lookupDescription: debounce(function () {\n      // update autocomplete URL:\n      axios.get(this.getACURL(this.title))\n          .then(response => {\n            this.descriptions = response.data;\n          })\n    }, 300)\n  }\n}\n</script>\n\n","import { render } from \"./TransactionGroupTitle.vue?vue&type=template&id=4bdb785a\"\nimport script from \"./TransactionGroupTitle.vue?vue&type=script&lang=js\"\nexport * from \"./TransactionGroupTitle.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}