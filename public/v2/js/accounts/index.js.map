{"version":3,"sources":["webpack:///./src/bootstrap.js","webpack:///./src/components/store/modules/transactions/create.js","webpack:///./src/components/store/modules/transactions/edit.js","webpack:///./src/components/store/modules/dashboard/index.js","webpack:///./src/components/store/modules/root.js","webpack:///./src/components/store/modules/accounts/index.js","webpack:///./src/components/store/index.js","webpack:///./src/i18n.js","webpack:///src/components/accounts/Index.vue","webpack:///./src/components/accounts/Index.vue?9aa9","webpack:///./src/components/accounts/Index.vue","webpack:///./src/components/accounts/Index.vue?be03","webpack:///src/components/accounts/IndexOptions.vue","webpack:///./src/components/accounts/IndexOptions.vue?c018","webpack:///./src/components/accounts/IndexOptions.vue","webpack:///./src/components/accounts/IndexOptions.vue?c9fe","webpack:///./src/pages/accounts/index.js","webpack:///./src/shared/transactions.js","webpack:///./src/components/dashboard/Calendar.vue?c12c","webpack:///./src/components/dashboard/Calendar.vue?d87e","webpack:///src/components/dashboard/Calendar.vue","webpack:///./src/components/dashboard/Calendar.vue?6b2f","webpack:///./src/components/dashboard/Calendar.vue","webpack:///./src/components/dashboard/Calendar.vue?93f8"],"names":["window","$","jQuery","require","axios","defaults","headers","common","token","document","head","querySelector","content","console","error","localeToken","localStorage","locale","vuei18n","VueI18n","uiv","Vue","lodashClonedeep","namespaced","state","transactionType","groupTitle","transactions","customDateFields","interest_date","book_date","process_date","due_date","payment_date","invoice_date","defaultTransaction","getDefaultTransaction","defaultErrors","getDefaultErrors","getters","accountToTransaction","sourceAllowedTypes","destinationAllowedTypes","allowedOpposingTypes","actions","mutations","addTransaction","newTransaction","errors","push","resetErrors","payload","index","resetTransactions","setGroupTitle","setCustomDateFields","deleteTransaction","splice","length","setTransactionType","setAllowedOpposingTypes","setAccountToTransaction","updateField","field","value","setTransactionError","setDestinationAllowedTypes","setSourceAllowedTypes","viewRange","start","end","defaultStart","defaultEnd","initialiseStore","context","get","then","response","data","attributes","commit","dispatch","setDatesFromViewRange","viewRangeStart","Date","viewRangeEnd","viewRangeDefaultStart","viewRangeDefaultEnd","getTime","setHours","diff","getDate","getDay","setDate","lastday","getFullYear","getMonth","quarter","Math","floor","half","setStart","setItem","setEnd","setDefaultStart","setDefaultEnd","setViewRange","range","listPageSize","timezone","parseInt","setListPageSize","number","setTimezone","orderMode","activeFilter","setOrderMode","setActiveFilter","Vuex","modules","root","root_store","create","transactions_create","edit","transactions_edit","accounts","accounts_index","dashboard","dashboard_index","strict","process","plugins","currencyPreference","setCurrencyPreference","currencyCode","code","currencyId","id","updateCurrencyPreference","JSON","parse","currencyResponse","name","symbol","decimal_places","stringify","err","module","exports","documentElement","lang","fallbackLocale","messages","props","accountTypes","String","allAccounts","type","downloaded","loading","ready","fields","currentPage","perPage","total","sortBy","sortDesc","sortableOptions","disabled","chosenClass","onEnd","sortable","watch","storeReady","this","getAccountList","updateFieldList","reorderAccountList","makeTableSortable","filterAccountList","computed","cardTitle","$t","created","parts","params","methods","saveAccountSort","hasOwnProperty","i","test","current","identifier","order","newOrder","put","url","option","indexReady","downloadAccountList","page","active","roleTranslate","role","parsePages","pagination","parseAccounts","key","acct","title","account_role","account_number","current_balance","currency_code","balance_diff","iban","match","join","getAccountBalanceDifference","promises","Promise","resolve","toISOString","split","all","_vm","_h","$createElement","_c","_self","staticClass","attrs","model","callback","$$v","expression","_v","ref","on","$event","scopedSlots","_u","fn","class","item","_s","_e","parseFloat","Intl","NumberFormat","style","currency","format","$store","set","directives","rawName","domProps","Array","isArray","_i","$$a","$$el","target","$$c","checked","$$i","concat","slice","_q","i18n","BTable","BPagination","store","el","render","createElement","Index","beforeCreate","Calendar","IndexOptions","description","amount","source","destination","foreign_currency","foreign_amount","date","custom_dates","budget","category","bill","tags","piggy_bank","internal_reference","external_url","notes","location","transaction_journal_id","source_account_id","source_account_name","source_account_type","source_account_currency_id","source_account_currency_code","source_account_currency_symbol","destination_account_id","destination_account_name","destination_account_type","destination_account_currency_id","destination_account_currency_code","destination_account_currency_symbol","source_account","name_with_balance","currency_id","currency_name","currency_decimal_places","destination_account","foreign_currency_id","budget_id","bill_id","piggy_bank_id","external_id","links","attachments","zoom_level","longitude","latitude","___CSS_LOADER_EXPORT___","defaultRange","periods","resetDate","customDate","generatePeriods","today","firstDayOfMonth","lastDayOfMonth","datesReady","DateTimeFormat","year","month","day","inputValue","inputEvents","isDragging","togglePopover","placement","positionFixed","_l","period","_g","__esModule","default","locals","add"],"mappings":"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","file":"/public/js/accounts/index.js","sourcesContent":["/*\n * bootstrap.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// // imports\nimport Vue from 'vue';\nimport VueI18n from 'vue-i18n'\nimport * as uiv from 'uiv';\n\n// export jquery for others scripts to use\nwindow.$ = window.jQuery = require('jquery');\n\n// axios\nwindow.axios = require('axios');\nwindow.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n\n// CSRF\nlet token = document.head.querySelector('meta[name=\"csrf-token\"]');\n\nif (token) {\n    window.axios.defaults.headers.common['X-CSRF-TOKEN'] = token.content;\n} else {\n    console.error('CSRF token not found: https://laravel.com/docs/csrf#csrf-x-csrf-token');\n}\n\n// locale\nlet localeToken = document.head.querySelector('meta[name=\"locale\"]');\n\nif (localeToken) {\n    localStorage.locale = localeToken.content;\n} else {\n    localStorage.locale = 'en_US';\n}\n\n// admin stuff\nrequire('jquery-ui');\nrequire('bootstrap'); // bootstrap CSS?\n\nrequire('admin-lte/dist/js/adminlte');\nrequire('overlayscrollbars');\n\n\n// vue\nwindow.vuei18n = VueI18n;\nwindow.uiv = uiv;\nVue.use(vuei18n);\nVue.use(uiv);\nwindow.Vue = Vue;","/*\n * create.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nconst lodashClonedeep = require('lodash.clonedeep');\n\nimport {getDefaultTransaction, getDefaultErrors} from '../../../../shared/transactions';\n\n// initial state\nconst state = () => ({\n        transactionType: 'any',\n        groupTitle: '',\n        transactions: [],\n        customDateFields: {\n            interest_date: false,\n            book_date: false,\n            process_date: false,\n            due_date: false,\n            payment_date: false,\n            invoice_date: false,\n        },\n        defaultTransaction: getDefaultTransaction(),\n        defaultErrors: getDefaultErrors()\n    }\n)\n\n\n// getters\nconst getters = {\n    transactions: state => {\n        return state.transactions;\n    },\n    groupTitle: state => {\n        return state.groupTitle;\n    },\n    transactionType: state => {\n        return state.transactionType;\n    },\n    accountToTransaction: state => {\n        // TODO better architecture here, does not need the store.\n        // possible API point!!\n        return state.accountToTransaction;\n    },\n    defaultTransaction: state => {\n        return state.defaultTransaction;\n    },\n    sourceAllowedTypes: state => {\n        return state.sourceAllowedTypes;\n    },\n    destinationAllowedTypes: state => {\n        return state.destinationAllowedTypes;\n    },\n    allowedOpposingTypes: state => {\n        return state.allowedOpposingTypes;\n    },\n    customDateFields: state => {\n        return state.customDateFields;\n    }\n    // // `getters` is localized to this module's getters\n    // // you can use rootGetters via 4th argument of getters\n    // someGetter (state, getters, rootState, rootGetters) {\n    //     getters.someOtherGetter // -> 'foo/someOtherGetter'\n    //     rootGetters.someOtherGetter // -> 'someOtherGetter'\n    //     rootGetters['bar/someOtherGetter'] // -> 'bar/someOtherGetter'\n    // },\n\n}\n\n// actions\nconst actions = {}\n\n// mutations\nconst mutations = {\n    addTransaction(state) {\n        let newTransaction = lodashClonedeep(state.defaultTransaction);\n        newTransaction.errors = lodashClonedeep(state.defaultErrors);\n        state.transactions.push(newTransaction);\n    },\n    resetErrors(state, payload) {\n        //console.log('resetErrors for index ' + payload.index);\n        state.transactions[payload.index].errors = lodashClonedeep(state.defaultErrors);\n    },\n    resetTransactions(state) {\n        state.transactions = [];\n    },\n    setGroupTitle(state, payload) {\n        state.groupTitle = payload.groupTitle;\n    },\n    setCustomDateFields(state, payload) {\n        state.customDateFields = payload;\n    },\n    deleteTransaction(state, payload) {\n        state.transactions.splice(payload.index, 1);\n        // console.log('Deleted transaction ' + payload.index);\n        // console.log(state.transactions);\n        if (0 === state.transactions.length) {\n            // console.log('array is empty!');\n        }\n    },\n    setTransactionType(state, transactionType) {\n        state.transactionType = transactionType;\n    },\n    setAllowedOpposingTypes(state, allowedOpposingTypes) {\n        state.allowedOpposingTypes = allowedOpposingTypes;\n    },\n    setAccountToTransaction(state, payload) {\n        state.accountToTransaction = payload;\n    },\n    updateField(state, payload) {\n        state.transactions[payload.index][payload.field] = payload.value;\n    },\n    setTransactionError(state, payload) {\n        //console.log('Will set transactions[' + payload.index + '][errors][' + payload.field + '] to ');\n        //console.log(payload.errors);\n        state.transactions[payload.index].errors[payload.field] = payload.errors;\n    },\n    setDestinationAllowedTypes(state, payload) {\n        // console.log('Destination allowed types was changed!');\n        state.destinationAllowedTypes = payload;\n    },\n    setSourceAllowedTypes(state, payload) {\n        state.sourceAllowedTypes = payload;\n    }\n}\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * edit.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// initial state\nconst state = () => ({});\n\n\n// getters\nconst getters = {};\n\n// actions\nconst actions = {};\n\n// mutations\nconst mutations = {};\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * index.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// initial state\nconst state = () => (\n    {\n        viewRange: 'default',\n        start: null,\n        end: null,\n        // default range:\n        defaultStart: null,\n        defaultEnd: null,\n    }\n)\n\n\n// getters\nconst getters = {\n    start: state => {\n        return state.start;\n    },\n    end: state => {\n        return state.end;\n    },\n    defaultStart: state => {\n        return state.defaultStart;\n    },\n    defaultEnd: state => {\n        return state.defaultEnd;\n    },\n    viewRange: state => {\n        return state.viewRange;\n    }\n}\n\n// actions\nconst actions = {\n    initialiseStore(context) {\n        if ('default' === context.state.viewRange) {\n            axios.get('./api/v1/preferences/viewRange')\n                .then(response => {\n                          let viewRange = response.data.data.attributes.data;\n                          context.commit('setViewRange', viewRange);\n                          // call another action:\n                          context.dispatch('setDatesFromViewRange');\n                      }\n                ).catch(error => {\n                // console.log(error);\n                context.commit('setViewRange', '1M');\n                // call another action:\n                context.dispatch('setDatesFromViewRange');\n            });\n        }\n    },\n    setDatesFromViewRange(context) {\n        // console.log('Must set dates from viewRange \"' + context.state.viewRange + '\"');\n        // check local storage first?\n        if (localStorage.viewRangeStart) {\n            // console.log('view range start set from local storage.');\n            context.commit('setStart', new Date(localStorage.viewRangeStart));\n        }\n        if (localStorage.viewRangeEnd) {\n            // console.log('view range end set from local storage.');\n            context.commit('setEnd', new Date(localStorage.viewRangeEnd));\n        }\n        // also set default:\n        if (localStorage.viewRangeDefaultStart) {\n            // console.log('view range default start set from local storage.');\n            // console.log(localStorage.viewRangeDefaultStart);\n            context.commit('setDefaultStart', new Date(localStorage.viewRangeDefaultStart));\n        }\n        if (localStorage.viewRangeDefaultEnd) {\n            // console.log('view range default end set from local storage.');\n            // console.log(localStorage.viewRangeDefaultEnd);\n            context.commit('setDefaultEnd', new Date(localStorage.viewRangeDefaultEnd));\n        }\n\n        if (null !== context.getters.end && null !== context.getters.start) {\n            return;\n        }\n        let start;\n        let end;\n        let viewRange = context.getters.viewRange;\n        // console.log('Will recreate view range on ' + viewRange);\n        switch (viewRange) {\n            case '1D':\n                // one day:\n                start = new Date;\n                end = new Date(start.getTime());\n                start.setHours(0, 0, 0, 0);\n                end.setHours(23, 59, 59, 999);\n                break;\n            case '1W':\n                // this week:\n                start = new Date;\n                end = new Date(start.getTime());\n                // start of week\n                let diff = start.getDate() - start.getDay() + (start.getDay() === 0 ? -6 : 1);\n                start.setDate(diff);\n                start.setHours(0, 0, 0, 0);\n\n                // end of week\n                let lastday = end.getDate() - (end.getDay() - 1) + 6;\n                end.setDate(lastday);\n                end.setHours(23, 59, 59, 999);\n                break;\n            case '1M':\n                // this month:\n                start = new Date;\n                start = new Date(start.getFullYear(), start.getMonth(), 1);\n                start.setHours(0, 0, 0, 0);\n                end = new Date(start.getFullYear(), start.getMonth() + 1, 0);\n                end.setHours(23, 59, 59, 999);\n                break;\n            case '3M':\n                // this quarter\n                start = new Date;\n                end = new Date;\n                let quarter = Math.floor((start.getMonth() + 3) / 3) - 1;\n                // start and end months? I'm sure this could be better:\n                let startMonths = [0, 3, 6, 9];\n                let endMonths = [2, 5, 8, 11];\n                // set start to the correct month, day one:\n                start = new Date(start.getFullYear(), startMonths[quarter], 1);\n                start.setHours(0, 0, 0, 0);\n\n                // set end to the correct month, day one\n                end = new Date(end.getFullYear(), endMonths[quarter], 1);\n                // then to the last day of the month:\n                end = new Date(end.getFullYear(), end.getMonth() + 1, 0);\n                end.setHours(23, 59, 59, 999);\n                break;\n            case '6M':\n                // this half-year\n                start = new Date;\n                end = new Date;\n                let half = start.getMonth() <= 5 ? 0 : 1;\n\n                let startHalf = [0, 6];\n                let endHalf = [5, 11];\n                // set start to the correct month, day one:\n                start = new Date(start.getFullYear(), startHalf[half], 1);\n                start.setHours(0, 0, 0, 0);\n\n                // set end to the correct month, day one\n                end = new Date(end.getFullYear(), endHalf[half], 1);\n                // then to the last day of the month:\n                end = new Date(end.getFullYear(), end.getMonth() + 1, 0);\n                end.setHours(23, 59, 59, 999);\n                break;\n            case '1Y':\n                // this year\n                start = new Date;\n                end = new Date;\n                start = new Date(start.getFullYear(), 0, 1);\n\n                end = new Date(end.getFullYear(), 11, 31);\n                start.setHours(0, 0, 0, 0);\n                end.setHours(23, 59, 59, 999);\n                break;\n        }\n        // console.log('Range is ' + viewRange);\n        // console.log('Start is ' + start);\n        // console.log('End is   ' + end);\n        context.commit('setStart', start);\n        context.commit('setEnd', end);\n        context.commit('setDefaultStart', start);\n        context.commit('setDefaultEnd', end);\n    }\n}\n\n// mutations\nconst mutations = {\n    setStart(state, value) {\n        state.start = value;\n        window.localStorage.setItem('viewRangeStart', value);\n    },\n    setEnd(state, value) {\n        state.end = value;\n        window.localStorage.setItem('viewRangeEnd', value);\n    },\n    setDefaultStart(state, value) {\n        state.defaultStart = value;\n        window.localStorage.setItem('viewRangeDefaultStart', value);\n    },\n    setDefaultEnd(state, value) {\n        state.defaultEnd = value;\n        window.localStorage.setItem('viewRangeDefaultEnd', value);\n    },\n    setViewRange(state, range) {\n        state.viewRange = range;\n    }\n}\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * root.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// initial state\nconst state = () => (\n    {\n        listPageSize: 33,\n        timezone: ''\n    }\n)\n\n\n// getters\nconst getters = {\n    listPageSize: state => {\n        return state.listPageSize;\n    },\n    timezone: state => {\n        // console.log('Wil return ' + state.listPageSize);\n        return state.timezone;\n    },\n}\n\n// actions\nconst actions = {\n    initialiseStore(context) {\n        if (localStorage.listPageSize) {\n            state.listPageSize = localStorage.listPageSize;\n            context.commit('setListPageSize', {length: localStorage.listPageSize});\n        }\n        if (!localStorage.listPageSize) {\n            axios.get('./api/v1/preferences/listPageSize')\n                .then(response => {\n                          // console.log('from API: listPageSize is ' + parseInt(response.data.data.attributes.data));\n                          context.commit('setListPageSize', {length: parseInt(response.data.data.attributes.data)});\n                      }\n                );\n        }\n        if (localStorage.timezone) {\n            state.timezone = localStorage.timezone;\n            context.commit('setTimezone', {timezone: localStorage.timezone});\n        }\n        if (!localStorage.timezone) {\n            axios.get('./api/v1/configuration/app.timezone')\n                .then(response => {\n                          context.commit('setTimezone', {timezone: response.data.data.value});\n                      }\n                );\n        }\n    }\n}\n\n// mutations\nconst mutations = {\n    setListPageSize(state, payload) {\n        // console.log('Got a payload in setListPageSize');\n        // console.log(payload);\n        let number = parseInt(payload.length);\n        if (0 !== number) {\n            state.listPageSize = number;\n            localStorage.listPageSize = number;\n\n        }\n    },\n    setTimezone(state, payload) {\n\n        if ('' !== payload.timezone) {\n            state.timezone = payload.timezone;\n            localStorage.timezone = payload.timezone;\n        }\n    },\n}\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * index.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// initial state\nconst state = () => (\n    {\n        orderMode: false,\n        activeFilter: 1\n    }\n)\n\n\n// getters\nconst getters = {\n    orderMode: state => {\n        return state.orderMode;\n    },\n    activeFilter: state => {\n        return state.activeFilter;\n    }\n}\n\n// actions\nconst actions = {}\n\n// mutations\nconst mutations = {\n    setOrderMode(state, payload) {\n        state.orderMode = payload;\n    },\n    setActiveFilter(state, payload) {\n        state.activeFilter = payload;\n    }\n}\n\nexport default {\n    namespaced: true,\n    state,\n    getters,\n    actions,\n    mutations\n}\n","/*\n * index.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nimport Vue from 'vue'\nimport Vuex, {createLogger} from 'vuex'\nimport transactions_create from './modules/transactions/create';\nimport transactions_edit from './modules/transactions/edit';\nimport dashboard_index from './modules/dashboard/index';\nimport root_store from './modules/root';\nimport accounts_index from './modules/accounts/index';\n\nVue.use(Vuex)\nconst debug = process.env.NODE_ENV !== 'production'\n\nexport default new Vuex.Store(\n    {\n        namespaced: true,\n        modules: {\n            root: root_store,\n            transactions: {\n                namespaced: true,\n                modules: {\n                    create: transactions_create,\n                    edit: transactions_edit\n                }\n            },\n            accounts: {\n                namespaced: true,\n                modules: {\n                    index: accounts_index\n                },\n            },\n            dashboard: {\n                namespaced: true,\n                modules: {\n                    index: dashboard_index\n                }\n            }\n        },\n        strict: debug,\n        plugins: debug ? [createLogger()] : [],\n        state: {\n            currencyPreference: {},\n            locale: 'en-US',\n            listPageSize: 50\n        },\n        mutations: {\n            setCurrencyPreference(state, payload) {\n                state.currencyPreference = payload.payload;\n            },\n            initialiseStore(state) {\n                // if locale in local storage:\n                if (localStorage.locale) {\n                    state.locale = localStorage.locale;\n                    return;\n                }\n\n                // set locale from HTML:\n                let localeToken = document.head.querySelector('meta[name=\"locale\"]');\n                if (localeToken) {\n                    state.locale = localeToken.content;\n                    localStorage.locale = localeToken.content;\n                }\n            }\n        },\n        getters: {\n            currencyCode: state => {\n                return state.currencyPreference.code;\n            },\n            currencyPreference: state => {\n                return state.currencyPreference;\n            },\n            currencyId: state => {\n                return state.currencyPreference.id;\n            },\n            locale: state => {\n                return state.locale;\n            }\n            },\n        actions: {\n\n            updateCurrencyPreference(context) {\n                if (localStorage.currencyPreference) {\n                    context.commit('setCurrencyPreference', {payload: JSON.parse(localStorage.currencyPreference)});\n                    return;\n                }\n                axios.get('./api/v1/currencies/default')\n                    .then(response => {\n                        let currencyResponse = {\n                            id: parseInt(response.data.data.id),\n                            name: response.data.data.attributes.name,\n                            symbol: response.data.data.attributes.symbol,\n                            code: response.data.data.attributes.code,\n                            decimal_places: parseInt(response.data.data.attributes.decimal_places),\n                        };\n                        localStorage.currencyPreference = JSON.stringify(currencyResponse);\n                        //console.log('getCurrencyPreference from server')\n                        //console.log(JSON.stringify(currencyResponse));\n                        context.commit('setCurrencyPreference', {payload: currencyResponse});\n                    }).catch(err => {\n                    // console.log('Got error response.');\n                    console.error(err);\n                    context.commit('setCurrencyPreference', {\n                        payload: {\n                            id: 1,\n                            name: 'Euro',\n                            symbol: '',\n                            code: 'EUR',\n                            decimal_places: 2\n                        }\n                    });\n                });\n\n            }\n        }\n    }\n);","/*\n * i18n.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\n// Create VueI18n instance with options\nmodule.exports = new vuei18n({\n    locale: document.documentElement.lang, // set locale\n    fallbackLocale: 'en',\n    messages: {\n        'bg': require('./locales/bg.json'),\n        'cs': require('./locales/cs.json'),\n        'de': require('./locales/de.json'),\n        'en': require('./locales/en.json'),\n        'en-us': require('./locales/en.json'),\n        'en-gb': require('./locales/en-gb.json'),\n        'es': require('./locales/es.json'),\n        'el': require('./locales/el.json'),\n        'fr': require('./locales/fr.json'),\n        'hu': require('./locales/hu.json'),\n        //'id': require('./locales/id.json'),\n        'it': require('./locales/it.json'),\n        'nl': require('./locales/nl.json'),\n        'nb': require('./locales/nb.json'),\n        'pl': require('./locales/pl.json'),\n        'fi': require('./locales/fi.json'),\n        'pt-br': require('./locales/pt-br.json'),\n        'pt-pt': require('./locales/pt.json'),\n        'ro': require('./locales/ro.json'),\n        'ru': require('./locales/ru.json'),\n        //'zh': require('./locales/zh.json'),\n        'zh-tw': require('./locales/zh-tw.json'),\n        'zh-cn': require('./locales/zh-cn.json'),\n        'sk': require('./locales/sk.json'),\n        'sv': require('./locales/sv.json'),\n        'vi': require('./locales/vi.json'),\n    }\n});\n","<!--\n  - Index.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n        <b-pagination\n            v-model=\"currentPage\"\n            :total-rows=\"total\"\n            :per-page=\"perPage\"\n            aria-controls=\"my-table\"\n        ></b-pagination>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-lg-12 col-md-12 col-sm-12 col-xs-12\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n          </div>\n          <div class=\"card-body p-0\">\n            <b-table id=\"my-table\" striped hover primary-key=\"id\"\n                     :items=\"accounts\" :fields=\"fields\"\n                     :per-page=\"perPage\"\n                     sort-icon-left\n                     ref=\"table\"\n                     :current-page=\"currentPage\"\n                     :busy.sync=\"loading\"\n                     :sort-by.sync=\"sortBy\"\n                     :sort-desc.sync=\"sortDesc\"\n            >\n              <template #cell(title)=\"data\">\n                <a :class=\"false === data.item.active ? 'text-muted' : ''\" :href=\"'./accounts/show/' + data.item.id\" :title=\"data.value\">{{ data.value }}</a>\n              </template>\n              <template #cell(number)=\"data\">\n                <span v-if=\"null !== data.item.iban && null === data.item.account_number\">{{ data.item.iban }}</span>\n                <span v-if=\"null === data.item.iban && null !== data.item.account_number\">{{ data.item.account_number }}</span>\n                <span v-if=\"null !== data.item.iban && null !== data.item.account_number\">{{ data.item.iban }} ({{ data.item.account_number }})</span>\n              </template>\n              <template #cell(current_balance)=\"data\">\n                <span class=\"text-success\" v-if=\"parseFloat(data.item.current_balance) > 0\">\n                  {{\n                    Intl.NumberFormat('en-US', {\n                      style: 'currency', currency:\n                      data.item.currency_code\n                    }).format(data.item.current_balance)\n                  }}\n                </span>\n                <span class=\"text-danger\" v-if=\"parseFloat(data.item.current_balance) < 0\">\n                  {{\n                    Intl.NumberFormat('en-US', {\n                      style: 'currency', currency:\n                      data.item.currency_code\n                    }).format(data.item.current_balance)\n                  }}\n                </span>\n\n                <span class=\"text-muted\" v-if=\"0 === parseFloat(data.item.current_balance)\">\n                  {{\n                    Intl.NumberFormat('en-US', {\n                      style: 'currency', currency:\n                      data.item.currency_code\n                    }).format(data.item.current_balance)\n                  }}\n                </span>\n                <span v-if=\"'asset' === type && 'loading' === data.item.balance_diff\">\n                  <i class=\"fas fa-spinner fa-spin\"></i>\n                </span>\n                <span v-if=\"'asset' === type && 'loading' !== data.item.balance_diff\">\n                   (<span class=\"text-success\" v-if=\"parseFloat(data.item.balance_diff) > 0\">{{\n                    Intl.NumberFormat('en-US', {\n                      style: 'currency', currency:\n                      data.item.currency_code\n                    }).format(data.item.balance_diff)\n                  }}</span><span class=\"text-muted\" v-if=\"0===parseFloat(data.item.balance_diff)\">{{\n                    Intl.NumberFormat('en-US', {\n                      style: 'currency', currency:\n                      data.item.currency_code\n                    }).format(data.item.balance_diff)\n                  }}</span><span class=\"text-danger\" v-if=\"parseFloat(data.item.balance_diff) < 0\">{{\n                    Intl.NumberFormat('en-US', {\n                      style: 'currency', currency:\n                      data.item.currency_code\n                    }).format(data.item.balance_diff)\n                  }}</span>)\n                </span>\n              </template>\n              <template #cell(menu)=\"data\">\n                <div class=\"btn-group btn-group-sm\">\n                  <div class=\"dropdown\">\n                    <button class=\"btn btn-light btn-sm dropdown-toggle\" type=\"button\" :id=\"'dropdownMenuButton' + data.item.id\" data-toggle=\"dropdown\"\n                            aria-haspopup=\"true\" aria-expanded=\"false\">\n                      {{ $t('firefly.actions') }}\n                    </button>\n                    <div class=\"dropdown-menu\" :aria-labelledby=\"'dropdownMenuButton' + data.item.id\">\n                      <a class=\"dropdown-item\" :href=\"'./accounts/edit/' + data.item.id\"><i class=\"fa fas fa-pencil-alt\"></i> {{ $t('firefly.edit') }}</a>\n                      <a class=\"dropdown-item\" :href=\"'./accounts/delete/' + data.item.id\"><i class=\"fa far fa-trash\"></i> {{ $t('firefly.delete') }}</a>\n                      <a v-if=\"'asset' === type\" class=\"dropdown-item\" :href=\"'./accounts/reconcile/' + data.item.id + '/index'\"><i class=\"fas fa-check\"></i>\n                        {{ $t('firefly.reconcile_this_account') }}</a>\n                    </div>\n                  </div>\n                </div>\n              </template>\n            </b-table>\n          </div>\n          <div class=\"card-footer\">\n            <a :href=\"'./accounts/create/' + type\" class=\"btn btn-success\" :title=\"$t('firefly.create_new_' + type)\">{{ $t('firefly.create_new_' + type) }}</a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport {mapGetters} from \"vuex\";\nimport Sortable from \"sortablejs\";\n\nexport default {\n  name: \"Index\",\n  props: {\n    accountTypes: String\n  },\n  data() {\n    return {\n      accounts: [],\n      allAccounts: [],\n      type: 'all',\n      downloaded: false,\n      loading: false,\n      ready: false,\n      fields: [],\n      currentPage: 1,\n      perPage: 5,\n      total: 0,\n      sortBy: 'order',\n      sortDesc: false,\n      sortableOptions: {\n        disabled: false,\n        chosenClass: 'is-selected',\n        onEnd: null\n      },\n      sortable: null\n    }\n  },\n  watch: {\n    storeReady: function () {\n      this.getAccountList();\n    },\n    start: function () {\n      this.getAccountList();\n    },\n    end: function () {\n      this.getAccountList();\n    },\n    orderMode: function (value) {\n      // update the table headers\n      this.updateFieldList();\n\n      // reorder the accounts:\n      this.reorderAccountList(value);\n\n      // make table sortable:\n      this.makeTableSortable(value);\n    },\n    activeFilter: function (value) {\n      this.filterAccountList();\n    }\n  },\n  computed: {\n    ...mapGetters('root', ['listPageSize']),\n    ...mapGetters('accounts/index', ['orderMode', 'activeFilter']),\n    ...mapGetters('dashboard/index', ['start', 'end',]),\n    'indexReady': function () {\n      return null !== this.start && null !== this.end && null !== this.listPageSize && this.ready;\n    },\n    cardTitle: function () {\n      return this.$t('firefly.' + this.type + '_accounts');\n    }\n  },\n  created() {\n    let pathName = window.location.pathname;\n    let parts = pathName.split('/');\n    this.type = parts[parts.length - 1];\n\n    let params = new URLSearchParams(window.location.search);\n    this.currentPage = params.get('page') ? parseInt(params.get('page')) : 1;\n    this.updateFieldList();\n    this.ready = true;\n  },\n\n  methods: {\n    saveAccountSort: function (event) {\n      let oldIndex = parseInt(event.oldIndex);\n      let newIndex = parseInt(event.newIndex);\n      let identifier = parseInt(event.item.attributes.getNamedItem('data-pk').value);\n      for (let i in this.accounts) {\n        if (this.accounts.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          let current = this.accounts[i];\n\n          // the actual account\n          if (current.id === identifier) {\n            let newOrder = parseInt(current.order) + (newIndex - oldIndex);\n            this.accounts[i].order = newOrder;\n            let url = './api/v1/accounts/' + current.id;\n            axios.put(url, {order: newOrder}).then(response => {\n              // TODO should update local account list, not refresh the whole thing.\n              this.getAccountList();\n            });\n          }\n        }\n      }\n    },\n    reorderAccountList: function (orderMode) {\n      if (orderMode) {\n        this.sortBy = 'order';\n        this.sortDesc = false;\n      }\n    },\n    makeTableSortable: function (orderMode) {\n      this.sortableOptions.disabled = !orderMode;\n      this.sortableOptions.onEnd = this.saveAccountSort;\n\n      // make sortable of table:\n      if (null === this.sortable) {\n        this.sortable = Sortable.create(this.$refs.table.$el.querySelector('tbody'), this.sortableOptions);\n      }\n      this.sortable.option('disabled', this.sortableOptions.disabled);\n    },\n\n    updateFieldList: function () {\n      this.fields = [];\n\n      this.fields = [{key: 'title', label: this.$t('list.name'), sortable: !this.orderMode}];\n      if ('asset' === this.type) {\n        this.fields.push({key: 'role', label: this.$t('list.role'), sortable: !this.orderMode});\n      }\n      // add the rest\n      this.fields.push({key: 'number', label: this.$t('list.iban'), sortable: !this.orderMode});\n      this.fields.push({key: 'current_balance', label: this.$t('list.currentBalance'), sortable: !this.orderMode});\n      this.fields.push({key: 'menu', label: ' ', sortable: false});\n    },\n    getAccountList: function () {\n      // console.log('getAccountList()');\n      if (this.indexReady && !this.loading && !this.downloaded) {\n        // console.log('Index ready, not loading and not already downloaded. Reset.');\n        this.loading = true;\n        this.perPage = this.listPageSize ?? 51;\n        this.accounts = [];\n        this.allAccounts = [];\n        this.downloadAccountList(1);\n      }\n      if (this.indexReady && !this.loading && this.downloaded) {\n        // console.log('Index ready, not loading and not downloaded.');\n        this.loading = true;\n        this.filterAccountList();\n        // TODO filter accounts.\n      }\n    },\n    downloadAccountList: function (page) {\n      // console.log('downloadAccountList(' + page + ')');\n      axios.get('./api/v1/accounts?type=' + this.type + '&page=' + page)\n          .then(response => {\n                  let currentPage = parseInt(response.data.meta.pagination.current_page);\n                  let totalPage = parseInt(response.data.meta.pagination.total_pages);\n                  this.total = parseInt(response.data.meta.pagination.total);\n                  this.parseAccounts(response.data.data);\n                  if (currentPage < totalPage) {\n                    let nextPage = currentPage + 1;\n                    this.downloadAccountList(nextPage);\n                  }\n                  if (currentPage >= totalPage) {\n                    // console.log('Looks like all downloaded.');\n                    this.downloaded = true;\n                    this.filterAccountList();\n                  }\n                }\n          );\n    },\n    filterAccountList: function () {\n      // console.log('filterAccountList()');\n      this.accounts = [];\n      for (let i in this.allAccounts) {\n        if (this.allAccounts.hasOwnProperty(i) && /^0$|^[1-9]\\d*$/.test(i) && i <= 4294967294) {\n          // 1 = active only\n          // 2 = inactive only\n          // 3 = both\n          if (1 === this.activeFilter && false === this.allAccounts[i].active) {\n            // console.log('Skip account #' + this.allAccounts[i].id + ' because not active.');\n            continue;\n          }\n          if (2 === this.activeFilter && true === this.allAccounts[i].active) {\n            // console.log('Skip account #' + this.allAccounts[i].id + ' because active.');\n            continue;\n          }\n          // console.log('Include account #' + this.allAccounts[i].id + '.');\n\n          this.accounts.push(this.allAccounts[i]);\n        }\n      }\n      this.total = this.accounts.length;\n      this.loading = false;\n    },\n    roleTranslate: function (role) {\n      if (null === role) {\n        return '';\n      }\n      return this.$t('firefly.account_role_' + role);\n    },\n    parsePages: function (data) {\n      this.total = parseInt(data.pagination.total);\n      //console.log('Total is now ' + this.total);\n    },\n    parseAccounts: function (data) {\n      // console.log('In parseAccounts()');\n      for (let key in data) {\n        if (data.hasOwnProperty(key) && /^0$|^[1-9]\\d*$/.test(key) && key <= 4294967294) {\n          let current = data[key];\n          let acct = {};\n          acct.id = parseInt(current.id);\n          acct.order = current.attributes.order;\n          acct.title = current.attributes.name;\n          acct.active = current.attributes.active;\n          acct.role = this.roleTranslate(current.attributes.account_role);\n          acct.account_number = current.attributes.account_number;\n          acct.current_balance = current.attributes.current_balance;\n          acct.currency_code = current.attributes.currency_code;\n          acct.balance_diff = 'loading';\n\n          if (null !== current.attributes.iban) {\n            acct.iban = current.attributes.iban.match(/.{1,4}/g).join(' ');\n          }\n\n          this.allAccounts.push(acct);\n          if ('asset' === this.type) {\n            this.getAccountBalanceDifference(this.allAccounts.length - 1, current);\n          }\n        }\n      }\n    },\n    getAccountBalanceDifference: function (index, acct) {\n      // console.log('getAccountBalanceDifference(' + index + ')');\n      // get account on day 0\n      let promises = [];\n\n      // add meta data to promise context.\n      promises.push(new Promise((resolve) => {\n        resolve(\n            {\n              account: acct,\n              index: index,\n            }\n        );\n      }));\n\n      promises.push(axios.get('./api/v1/accounts/' + acct.id + '?date=' + this.start.toISOString().split('T')[0]));\n      promises.push(axios.get('./api/v1/accounts/' + acct.id + '?date=' + this.end.toISOString().split('T')[0]));\n\n      Promise.all(promises).then(responses => {\n        let index = responses[0].index;\n        let startBalance = parseFloat(responses[1].data.data.attributes.current_balance);\n        let endBalance = parseFloat(responses[2].data.data.attributes.current_balance);\n        this.allAccounts[index].balance_diff = endBalance - startBalance;\n      });\n    },\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=891d6a76&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"891d6a76\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-lg-12 col-md-12 col-sm-12 col-xs-12\"},[_c('b-pagination',{attrs:{\"total-rows\":_vm.total,\"per-page\":_vm.perPage,\"aria-controls\":\"my-table\"},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-lg-12 col-md-12 col-sm-12 col-xs-12\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"}),_vm._v(\" \"),_c('div',{staticClass:\"card-body p-0\"},[_c('b-table',{ref:\"table\",attrs:{\"id\":\"my-table\",\"striped\":\"\",\"hover\":\"\",\"primary-key\":\"id\",\"items\":_vm.accounts,\"fields\":_vm.fields,\"per-page\":_vm.perPage,\"sort-icon-left\":\"\",\"current-page\":_vm.currentPage,\"busy\":_vm.loading,\"sort-by\":_vm.sortBy,\"sort-desc\":_vm.sortDesc},on:{\"update:busy\":function($event){_vm.loading=$event},\"update:sortBy\":function($event){_vm.sortBy=$event},\"update:sort-by\":function($event){_vm.sortBy=$event},\"update:sortDesc\":function($event){_vm.sortDesc=$event},\"update:sort-desc\":function($event){_vm.sortDesc=$event}},scopedSlots:_vm._u([{key:\"cell(title)\",fn:function(data){return [_c('a',{class:false === data.item.active ? 'text-muted' : '',attrs:{\"href\":'./accounts/show/' + data.item.id,\"title\":data.value}},[_vm._v(_vm._s(data.value))])]}},{key:\"cell(number)\",fn:function(data){return [(null !== data.item.iban && null === data.item.account_number)?_c('span',[_vm._v(_vm._s(data.item.iban))]):_vm._e(),_vm._v(\" \"),(null === data.item.iban && null !== data.item.account_number)?_c('span',[_vm._v(_vm._s(data.item.account_number))]):_vm._e(),_vm._v(\" \"),(null !== data.item.iban && null !== data.item.account_number)?_c('span',[_vm._v(_vm._s(data.item.iban)+\" (\"+_vm._s(data.item.account_number)+\")\")]):_vm._e()]}},{key:\"cell(current_balance)\",fn:function(data){return [(parseFloat(data.item.current_balance) > 0)?_c('span',{staticClass:\"text-success\"},[_vm._v(\"\\n                \"+_vm._s(Intl.NumberFormat('en-US', {\n                    style: 'currency', currency:\n                    data.item.currency_code\n                  }).format(data.item.current_balance))+\"\\n              \")]):_vm._e(),_vm._v(\" \"),(parseFloat(data.item.current_balance) < 0)?_c('span',{staticClass:\"text-danger\"},[_vm._v(\"\\n                \"+_vm._s(Intl.NumberFormat('en-US', {\n                    style: 'currency', currency:\n                    data.item.currency_code\n                  }).format(data.item.current_balance))+\"\\n              \")]):_vm._e(),_vm._v(\" \"),(0 === parseFloat(data.item.current_balance))?_c('span',{staticClass:\"text-muted\"},[_vm._v(\"\\n                \"+_vm._s(Intl.NumberFormat('en-US', {\n                    style: 'currency', currency:\n                    data.item.currency_code\n                  }).format(data.item.current_balance))+\"\\n              \")]):_vm._e(),_vm._v(\" \"),('asset' === _vm.type && 'loading' === data.item.balance_diff)?_c('span',[_c('i',{staticClass:\"fas fa-spinner fa-spin\"})]):_vm._e(),_vm._v(\" \"),('asset' === _vm.type && 'loading' !== data.item.balance_diff)?_c('span',[_vm._v(\"\\n                 (\"),(parseFloat(data.item.balance_diff) > 0)?_c('span',{staticClass:\"text-success\"},[_vm._v(_vm._s(Intl.NumberFormat('en-US', {\n                    style: 'currency', currency:\n                    data.item.currency_code\n                  }).format(data.item.balance_diff)))]):_vm._e(),(0===parseFloat(data.item.balance_diff))?_c('span',{staticClass:\"text-muted\"},[_vm._v(_vm._s(Intl.NumberFormat('en-US', {\n                    style: 'currency', currency:\n                    data.item.currency_code\n                  }).format(data.item.balance_diff)))]):_vm._e(),(parseFloat(data.item.balance_diff) < 0)?_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(Intl.NumberFormat('en-US', {\n                    style: 'currency', currency:\n                    data.item.currency_code\n                  }).format(data.item.balance_diff)))]):_vm._e(),_vm._v(\")\\n              \")]):_vm._e()]}},{key:\"cell(menu)\",fn:function(data){return [_c('div',{staticClass:\"btn-group btn-group-sm\"},[_c('div',{staticClass:\"dropdown\"},[_c('button',{staticClass:\"btn btn-light btn-sm dropdown-toggle\",attrs:{\"type\":\"button\",\"id\":'dropdownMenuButton' + data.item.id,\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\"}},[_vm._v(\"\\n                    \"+_vm._s(_vm.$t('firefly.actions'))+\"\\n                  \")]),_vm._v(\" \"),_c('div',{staticClass:\"dropdown-menu\",attrs:{\"aria-labelledby\":'dropdownMenuButton' + data.item.id}},[_c('a',{staticClass:\"dropdown-item\",attrs:{\"href\":'./accounts/edit/' + data.item.id}},[_c('i',{staticClass:\"fa fas fa-pencil-alt\"}),_vm._v(\" \"+_vm._s(_vm.$t('firefly.edit')))]),_vm._v(\" \"),_c('a',{staticClass:\"dropdown-item\",attrs:{\"href\":'./accounts/delete/' + data.item.id}},[_c('i',{staticClass:\"fa far fa-trash\"}),_vm._v(\" \"+_vm._s(_vm.$t('firefly.delete')))]),_vm._v(\" \"),('asset' === _vm.type)?_c('a',{staticClass:\"dropdown-item\",attrs:{\"href\":'./accounts/reconcile/' + data.item.id + '/index'}},[_c('i',{staticClass:\"fas fa-check\"}),_vm._v(\"\\n                      \"+_vm._s(_vm.$t('firefly.reconcile_this_account')))]):_vm._e()])])])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"card-footer\"},[_c('a',{staticClass:\"btn btn-success\",attrs:{\"href\":'./accounts/create/' + _vm.type,\"title\":_vm.$t('firefly.create_new_' + _vm.type)}},[_vm._v(_vm._s(_vm.$t('firefly.create_new_' + _vm.type)))])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - IndexOptions.vue\n  - Copyright (c) 2021 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div>\n    <div class=\"form-check\">\n      <input class=\"form-check-input\" type=\"checkbox\" name=\"order_mode\" id=\"order_mode\" v-model=\"orderMode\">\n      <label class=\"form-check-label\" for=\"order_mode\">\n        Enable order mode\n      </label>\n    </div>\n    <div class=\"form-check\">\n      <input class=\"form-check-input\" :disabled=\"orderMode\" type=\"radio\" value=\"1\" v-model=\"activeFilter\" id=\"active_filter_1\">\n      <label class=\"form-check-label\" for=\"active_filter_1\">\n        Show active accounts\n      </label>\n    </div>\n\n    <div class=\"form-check\">\n      <input class=\"form-check-input\" :disabled=\"orderMode\" type=\"radio\" value=\"2\" v-model=\"activeFilter\" id=\"active_filter_2\">\n      <label class=\"form-check-label\" for=\"active_filter_2\">\n        Show inactive accounts\n      </label>\n    </div>\n\n    <div class=\"form-check\">\n      <input class=\"form-check-input\" :disabled=\"orderMode\" type=\"radio\" value=\"3\" v-model=\"activeFilter\" id=\"active_filter_3\">\n      <label class=\"form-check-label\" for=\"active_filter_3\">\n        Show both\n      </label>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: \"IndexOptions\",\n  data() {\n    return {\n      type: 'invalid'\n    }\n  },\n  // watch orderMode, if its false then go to active in filter.\n  computed: {\n    orderMode: {\n      get() {\n        return this.$store.getters[\"accounts/index/orderMode\"];\n      },\n      set(value) {\n        this.$store.commit('accounts/index/setOrderMode', value);\n        if(true===value) {\n          this.$store.commit('accounts/index/setActiveFilter', 1);\n        }\n      }\n    },\n    activeFilter: {\n      get() {\n        return this.$store.getters[\"accounts/index/activeFilter\"];\n      },\n      set(value) {\n        this.$store.commit('accounts/index/setActiveFilter', parseInt(value));\n      }\n    },\n  },\n  created() {\n    let pathName = window.location.pathname;\n    let parts = pathName.split('/');\n    this.type = parts[parts.length - 1];\n  }\n}\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IndexOptions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./IndexOptions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./IndexOptions.vue?vue&type=template&id=b354f694&scoped=true&\"\nimport script from \"./IndexOptions.vue?vue&type=script&lang=js&\"\nexport * from \"./IndexOptions.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b354f694\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"form-check\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.orderMode),expression:\"orderMode\"}],staticClass:\"form-check-input\",attrs:{\"type\":\"checkbox\",\"name\":\"order_mode\",\"id\":\"order_mode\"},domProps:{\"checked\":Array.isArray(_vm.orderMode)?_vm._i(_vm.orderMode,null)>-1:(_vm.orderMode)},on:{\"change\":function($event){var $$a=_vm.orderMode,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.orderMode=$$a.concat([$$v]))}else{$$i>-1&&(_vm.orderMode=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.orderMode=$$c}}}}),_vm._v(\" \"),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"order_mode\"}},[_vm._v(\"\\n      Enable order mode\\n    \")])]),_vm._v(\" \"),_c('div',{staticClass:\"form-check\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.activeFilter),expression:\"activeFilter\"}],staticClass:\"form-check-input\",attrs:{\"disabled\":_vm.orderMode,\"type\":\"radio\",\"value\":\"1\",\"id\":\"active_filter_1\"},domProps:{\"checked\":_vm._q(_vm.activeFilter,\"1\")},on:{\"change\":function($event){_vm.activeFilter=\"1\"}}}),_vm._v(\" \"),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"active_filter_1\"}},[_vm._v(\"\\n      Show active accounts\\n    \")])]),_vm._v(\" \"),_c('div',{staticClass:\"form-check\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.activeFilter),expression:\"activeFilter\"}],staticClass:\"form-check-input\",attrs:{\"disabled\":_vm.orderMode,\"type\":\"radio\",\"value\":\"2\",\"id\":\"active_filter_2\"},domProps:{\"checked\":_vm._q(_vm.activeFilter,\"2\")},on:{\"change\":function($event){_vm.activeFilter=\"2\"}}}),_vm._v(\" \"),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"active_filter_2\"}},[_vm._v(\"\\n      Show inactive accounts\\n    \")])]),_vm._v(\" \"),_c('div',{staticClass:\"form-check\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.activeFilter),expression:\"activeFilter\"}],staticClass:\"form-check-input\",attrs:{\"disabled\":_vm.orderMode,\"type\":\"radio\",\"value\":\"3\",\"id\":\"active_filter_3\"},domProps:{\"checked\":_vm._q(_vm.activeFilter,\"3\")},on:{\"change\":function($event){_vm.activeFilter=\"3\"}}}),_vm._v(\" \"),_c('label',{staticClass:\"form-check-label\",attrs:{\"for\":\"active_filter_3\"}},[_vm._v(\"\\n      Show both\\n    \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\n * index.js\n * Copyright (c) 2020 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\nrequire('../../bootstrap');\n\nimport Vue from \"vue\";\nimport Index from \"../../components/accounts/Index\";\nimport store from \"../../components/store\";\nimport {BPagination, BTable} from 'bootstrap-vue';\nimport Calendar from \"../../components/dashboard/Calendar\";\nimport IndexOptions from \"../../components/accounts/IndexOptions\";\n\n// i18n\nlet i18n = require('../../i18n');\nlet props = {};\n\n// TODO: long lists are slow to load. Fix this.\n// TODO add interest for liabilities\n\nVue.component('b-table', BTable);\nVue.component('b-pagination', BPagination);\n//Vue.use(Vuex);\n\nnew Vue({\n            i18n,\n            store,\n            el: \"#accounts\",\n            render: (createElement) => {\n                return createElement(Index, {props: props});\n            },\n            beforeCreate() {\n                // init the old root store (TODO remove me)\n                this.$store.commit('initialiseStore');\n                this.$store.dispatch('updateCurrencyPreference');\n\n                // init the new root store (dont care about results)\n                this.$store.dispatch('root/initialiseStore');\n\n                // also init the dashboard store.\n                this.$store.dispatch('dashboard/index/initialiseStore');\n            },\n        });\n\nnew Vue({\n            i18n,\n            store,\n            el: \"#calendar\",\n            render: (createElement) => {\n                return createElement(Calendar, {props: props});\n            },\n            // TODO init store as well?\n        });\n\nnew Vue({\n            i18n,\n            store,\n            el: \"#indexOptions\",\n            render: (createElement) => {\n                return createElement(IndexOptions, {props: props});\n            },\n            // TODO init store as well?\n        });","/*\n * transactions.js\n * Copyright (c) 2021 james@firefly-iii.org\n *\n * This file is part of Firefly III (https://github.com/firefly-iii).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <https://www.gnu.org/licenses/>.\n */\n\nexport function getDefaultErrors() {\n    return {\n        description: [],\n        amount: [],\n        source: [],\n        destination: [],\n        currency: [],\n        foreign_currency: [],\n        foreign_amount: [],\n        date: [],\n        custom_dates: [],\n        budget: [],\n        category: [],\n        bill: [],\n        tags: [],\n        piggy_bank: [],\n        internal_reference: [],\n        external_url: [],\n        notes: [],\n        location: []\n    };\n}\n\nexport function getDefaultTransaction() {\n    return {\n        // basic\n        description: '',\n        transaction_journal_id: 0,\n        // accounts:\n        source_account_id: null,\n        source_account_name: null,\n        source_account_type: null,\n\n        source_account_currency_id: null,\n        source_account_currency_code: null,\n        source_account_currency_symbol: null,\n\n        destination_account_id: null,\n        destination_account_name: null,\n        destination_account_type: null,\n\n        destination_account_currency_id: null,\n        destination_account_currency_code: null,\n        destination_account_currency_symbol: null,\n\n        source_account: {\n            id: 0,\n            name: \"\",\n            name_with_balance: \"\",\n            type: \"\",\n            currency_id: 0,\n            currency_name: '',\n            currency_code: '',\n            currency_decimal_places: 2\n        },\n        destination_account: {\n            id: 0,\n            name: \"\",\n            type: \"\",\n            currency_id: 0,\n            currency_name: '',\n            currency_code: '',\n            currency_decimal_places: 2\n        },\n\n        // amount:\n        amount: '',\n        currency_id: 0,\n        foreign_amount: '',\n        foreign_currency_id: 0,\n\n        // meta data\n        category: null,\n        budget_id: 0,\n        bill_id: 0,\n        piggy_bank_id: 0,\n        tags: [],\n\n        // optional date fields (6x):\n        interest_date: null,\n        book_date: null,\n        process_date: null,\n        due_date: null,\n        payment_date: null,\n        invoice_date: null,\n\n        // optional other fields:\n        internal_reference: null,\n        external_url: null,\n        external_id: null,\n        notes: null,\n\n        // transaction links:\n        links: [],\n        attachments: [],\n        // location:\n        zoom_level: null,\n        longitude: null,\n        latitude: null,\n\n        // error handling\n        errors: {},\n    }\n}\n\nexport function toW3CString(date) {\n    // https://gist.github.com/tristanlins/6585391\n    let year = date.getFullYear();\n    let month = date.getMonth();\n    month++;\n    if (month < 10) {\n        month = '0' + month;\n    }\n    let day = date.getDate();\n    if (day < 10) {\n        day = '0' + day;\n    }\n    let hours = date.getHours();\n    if (hours < 10) {\n        hours = '0' + hours;\n    }\n    let minutes = date.getMinutes();\n    if (minutes < 10) {\n        minutes = '0' + minutes;\n    }\n    let seconds = date.getSeconds();\n    if (seconds < 10) {\n        seconds = '0' + seconds;\n    }\n    let offset = -date.getTimezoneOffset();\n    let offsetHours = Math.abs(Math.floor(offset / 60));\n    let offsetMinutes = Math.abs(offset) - offsetHours * 60;\n    if (offsetHours < 10) {\n        offsetHours = '0' + offsetHours;\n    }\n    if (offsetMinutes < 10) {\n        offsetMinutes = '0' + offsetMinutes;\n    }\n    let offsetSign = '+';\n    if (offset < 0) {\n        offsetSign = '-';\n    }\n    return year + '-' + month + '-' + day +\n           'T' + hours + ':' + minutes + ':' + seconds +\n           offsetSign + offsetHours + ':' + offsetMinutes;\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".dropdown-item[data-v-12891edc],.dropdown-item[data-v-12891edc]:hover{color:#212529}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/dashboard/Calendar.vue\"],\"names\":[],\"mappings\":\"AA0OA,sEACA,aACA\",\"sourcesContent\":[\"<!--\\n  - Calendar.vue\\n  - Copyright (c) 2020 james@firefly-iii.org\\n  -\\n  - This file is part of Firefly III (https://github.com/firefly-iii).\\n  -\\n  - This program is free software: you can redistribute it and/or modify\\n  - it under the terms of the GNU Affero General Public License as\\n  - published by the Free Software Foundation, either version 3 of the\\n  - License, or (at your option) any later version.\\n  -\\n  - This program is distributed in the hope that it will be useful,\\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n  - GNU Affero General Public License for more details.\\n  -\\n  - You should have received a copy of the GNU Affero General Public License\\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\\n  -->\\n\\n<template>\\n  <div>\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col\\\">Start</div>\\n      <div class=\\\"col-8\\\">{{ new Intl.DateTimeFormat(locale, {year: 'numeric', month: 'long', day: 'numeric'}).format(range.start) }}</div>\\n    </div>\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col\\\">End</div>\\n      <div class=\\\"col-8\\\">{{ new Intl.DateTimeFormat(locale, {year: 'numeric', month: 'long', day: 'numeric'}).format(range.end) }}</div>\\n    </div>\\n    <date-picker\\n        v-model=\\\"range\\\"\\n        :rows=\\\"2\\\"\\n        is-range\\n        mode=\\\"date\\\"\\n    >\\n      <template v-slot=\\\"{ inputValue, inputEvents, isDragging, togglePopover }\\\">\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col\\\">\\n            <div class=\\\"btn-group btn-group-sm d-flex\\\">\\n              <button\\n                  :title=\\\"$t('firefly.custom_period')\\\" class=\\\"btn btn-secondary btn-sm\\\"\\n                  @click=\\\"togglePopover({ placement: 'auto-start', positionFixed: true })\\\"\\n              ><i class=\\\"fas fa-calendar-alt\\\"></i></button>\\n              <button :title=\\\"$t('firefly.reset_to_current')\\\"\\n                      class=\\\"btn btn-secondary\\\"\\n                      @click=\\\"resetDate\\\"\\n              ><i class=\\\"fas fa-history\\\"></i></button>\\n              <button id=\\\"dropdownMenuButton\\\" :title=\\\"$t('firefly.select_period')\\\" aria-expanded=\\\"false\\\" aria-haspopup=\\\"true\\\" class=\\\"btn btn-secondary dropdown-toggle\\\"\\n                      data-toggle=\\\"dropdown\\\"\\n                      type=\\\"button\\\">\\n                <i class=\\\"fas fa-list\\\"></i>\\n              </button>\\n              <div aria-labelledby=\\\"dropdownMenuButton\\\" class=\\\"dropdown-menu\\\">\\n                <a v-for=\\\"period in periods\\\" class=\\\"dropdown-item\\\" href=\\\"#\\\" @click=\\\"customDate(period.start, period.end)\\\">{{ period.title }}</a>\\n              </div>\\n\\n            </div>\\n            <input v-on=\\\"inputEvents.start\\\"\\n                   :class=\\\"isDragging ? 'text-gray-600' : 'text-gray-900'\\\"\\n                   :value=\\\"inputValue.start\\\"\\n                   type=\\\"hidden\\\"\\n            />\\n            <input v-on=\\\"inputEvents.end\\\"\\n                   :class=\\\"isDragging ? 'text-gray-600' : 'text-gray-900'\\\"\\n                   :value=\\\"inputValue.end\\\"\\n                   type=\\\"hidden\\\"\\n            />\\n          </div>\\n        </div>\\n      </template>\\n    </date-picker>\\n  </div>\\n</template>\\n\\n<script>\\n\\nimport {createNamespacedHelpers} from \\\"vuex\\\";\\nimport Vue from \\\"vue\\\";\\nimport DatePicker from \\\"v-calendar/lib/components/date-picker.umd\\\";\\nconst {mapState, mapGetters, mapActions, mapMutations} = createNamespacedHelpers('dashboard/index')\\n\\n\\nVue.component('date-picker', DatePicker)\\n\\nexport default {\\n  name: \\\"Calendar\\\",\\n  created() {\\n    this.ready = true;\\n    this.locale = localStorage.locale ?? 'en-US';\\n  },\\n  data() {\\n    return {\\n      locale: 'en-US',\\n      ready: false,\\n      range: {\\n        start: null,\\n        end: null,\\n      },\\n      defaultRange: {\\n        start: null,\\n        end: null,\\n      },\\n      periods: []\\n    };\\n  },\\n  methods: {\\n    ...mapMutations(\\n        [\\n          'setEnd',\\n          'setStart',\\n        ],\\n    ),\\n    resetDate: function () {\\n      //console.log('Reset date to');\\n      //console.log(this.defaultStart);\\n      //console.log(this.defaultEnd);\\n      this.range.start = this.defaultStart;\\n      this.range.end = this.defaultEnd;\\n      this.setStart(this.defaultStart);\\n      this.setEnd(this.defaultEnd);\\n    },\\n    customDate: function (startStr, endStr) {\\n      let start = new Date(startStr);\\n      let end = new Date(endStr);\\n      this.setStart(start);\\n      this.setEnd(end);\\n      this.range.start = start;\\n      this.range.end = end;\\n      this.generatePeriods()\\n      return false;\\n    },\\n    generatePeriods: function () {\\n      this.periods = [];\\n      // create periods.\\n      let today;\\n      let end;\\n\\n      today = new Date(this.range.start);\\n\\n      // previous month\\n      firstDayOfMonth = new Date(today.getFullYear(), today.getMonth()-1, 1);\\n      lastDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 0);\\n      this.periods.push(\\n          {\\n            start: firstDayOfMonth.toDateString(),\\n            end: lastDayOfMonth.toDateString(),\\n            title: new Intl.DateTimeFormat(this.locale, {year: 'numeric', month: 'long'}).format(firstDayOfMonth)\\n          }\\n      );\\n\\n      // this month\\n      firstDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);\\n      lastDayOfMonth = new Date(today.getFullYear(), today.getMonth()+1, 0);\\n      this.periods.push(\\n          {\\n            start: firstDayOfMonth.toDateString(),\\n            end: lastDayOfMonth.toDateString(),\\n            title: new Intl.DateTimeFormat(this.locale, {year: 'numeric', month: 'long'}).format(firstDayOfMonth)\\n          }\\n      );\\n\\n      // next month\\n      let firstDayOfMonth = new Date(today.getFullYear(), today.getMonth()+1, 1);\\n      let lastDayOfMonth = new Date(today.getFullYear(), today.getMonth()+2, 0);\\n      this.periods.push(\\n          {\\n            start: firstDayOfMonth.toDateString(),\\n            end: lastDayOfMonth.toDateString(),\\n            title: new Intl.DateTimeFormat(this.locale, {year: 'numeric', month: 'long'}).format(firstDayOfMonth)\\n          }\\n      );\\n\\n      // last 7 days\\n      today = new Date;\\n      end = new Date;\\n      end.setDate(end.getDate() - 7);\\n      this.periods.push(\\n          {\\n            start: end.toDateString(),\\n            end: today.toDateString(),\\n            title: this.$t('firefly.last_seven_days')\\n          }\\n      );\\n\\n      // last 30 days:\\n      end.setDate(end.getDate() - 23);\\n      this.periods.push(\\n          {\\n            start: end.toDateString(),\\n            end: today.toDateString(),\\n            title: this.$t('firefly.last_thirty_days')\\n          }\\n      );\\n      // last 30 days\\n      // everything\\n    }\\n  },\\n  computed: {\\n    ...mapGetters([\\n                    'viewRange',\\n                    'start',\\n                    'end',\\n                    'defaultStart',\\n                    'defaultEnd'\\n                  ]),\\n    'datesReady': function () {\\n      return null !== this.start && null !== this.end && this.ready;\\n    },\\n  },\\n  watch: {\\n    datesReady: function (value) {\\n      if (false === value) {\\n        return;\\n      }\\n      this.range.start = new Date(this.start);\\n      this.range.end = new Date(this.end);\\n      this.generatePeriods();\\n\\n    },\\n    range: function (value) {\\n      //console.log('User updated range');\\n      this.setStart(value.start);\\n      this.setEnd(value.end);\\n    }\\n  }\\n}\\n</script>\\n\\n<style scoped>\\n.dropdown-item {\\n  color: #212529;\\n}\\n\\n.dropdown-item:hover {\\n  color: #212529;\\n}\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_vm._v(\"Start\")]),_vm._v(\" \"),_c('div',{staticClass:\"col-8\"},[_vm._v(_vm._s(new Intl.DateTimeFormat(_vm.locale, {year: 'numeric', month: 'long', day: 'numeric'}).format(_vm.range.start)))])]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_vm._v(\"End\")]),_vm._v(\" \"),_c('div',{staticClass:\"col-8\"},[_vm._v(_vm._s(new Intl.DateTimeFormat(_vm.locale, {year: 'numeric', month: 'long', day: 'numeric'}).format(_vm.range.end)))])]),_vm._v(\" \"),_c('date-picker',{attrs:{\"rows\":2,\"is-range\":\"\",\"mode\":\"date\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar inputValue = ref.inputValue;\nvar inputEvents = ref.inputEvents;\nvar isDragging = ref.isDragging;\nvar togglePopover = ref.togglePopover;\nreturn [_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"btn-group btn-group-sm d-flex\"},[_c('button',{staticClass:\"btn btn-secondary btn-sm\",attrs:{\"title\":_vm.$t('firefly.custom_period')},on:{\"click\":function($event){return togglePopover({ placement: 'auto-start', positionFixed: true })}}},[_c('i',{staticClass:\"fas fa-calendar-alt\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"title\":_vm.$t('firefly.reset_to_current')},on:{\"click\":_vm.resetDate}},[_c('i',{staticClass:\"fas fa-history\"})]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-secondary dropdown-toggle\",attrs:{\"id\":\"dropdownMenuButton\",\"title\":_vm.$t('firefly.select_period'),\"aria-expanded\":\"false\",\"aria-haspopup\":\"true\",\"data-toggle\":\"dropdown\",\"type\":\"button\"}},[_c('i',{staticClass:\"fas fa-list\"})]),_vm._v(\" \"),_c('div',{staticClass:\"dropdown-menu\",attrs:{\"aria-labelledby\":\"dropdownMenuButton\"}},_vm._l((_vm.periods),function(period){return _c('a',{staticClass:\"dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){return _vm.customDate(period.start, period.end)}}},[_vm._v(_vm._s(period.title))])}),0)]),_vm._v(\" \"),_c('input',_vm._g({class:isDragging ? 'text-gray-600' : 'text-gray-900',attrs:{\"type\":\"hidden\"},domProps:{\"value\":inputValue.start}},inputEvents.start)),_vm._v(\" \"),_c('input',_vm._g({class:isDragging ? 'text-gray-600' : 'text-gray-900',attrs:{\"type\":\"hidden\"},domProps:{\"value\":inputValue.end}},inputEvents.end))])])]}}]),model:{value:(_vm.range),callback:function ($$v) {_vm.range=$$v},expression:\"range\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\n  - Calendar.vue\n  - Copyright (c) 2020 james@firefly-iii.org\n  -\n  - This file is part of Firefly III (https://github.com/firefly-iii).\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program.  If not, see <https://www.gnu.org/licenses/>.\n  -->\n\n<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col\">Start</div>\n      <div class=\"col-8\">{{ new Intl.DateTimeFormat(locale, {year: 'numeric', month: 'long', day: 'numeric'}).format(range.start) }}</div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col\">End</div>\n      <div class=\"col-8\">{{ new Intl.DateTimeFormat(locale, {year: 'numeric', month: 'long', day: 'numeric'}).format(range.end) }}</div>\n    </div>\n    <date-picker\n        v-model=\"range\"\n        :rows=\"2\"\n        is-range\n        mode=\"date\"\n    >\n      <template v-slot=\"{ inputValue, inputEvents, isDragging, togglePopover }\">\n        <div class=\"row\">\n          <div class=\"col\">\n            <div class=\"btn-group btn-group-sm d-flex\">\n              <button\n                  :title=\"$t('firefly.custom_period')\" class=\"btn btn-secondary btn-sm\"\n                  @click=\"togglePopover({ placement: 'auto-start', positionFixed: true })\"\n              ><i class=\"fas fa-calendar-alt\"></i></button>\n              <button :title=\"$t('firefly.reset_to_current')\"\n                      class=\"btn btn-secondary\"\n                      @click=\"resetDate\"\n              ><i class=\"fas fa-history\"></i></button>\n              <button id=\"dropdownMenuButton\" :title=\"$t('firefly.select_period')\" aria-expanded=\"false\" aria-haspopup=\"true\" class=\"btn btn-secondary dropdown-toggle\"\n                      data-toggle=\"dropdown\"\n                      type=\"button\">\n                <i class=\"fas fa-list\"></i>\n              </button>\n              <div aria-labelledby=\"dropdownMenuButton\" class=\"dropdown-menu\">\n                <a v-for=\"period in periods\" class=\"dropdown-item\" href=\"#\" @click=\"customDate(period.start, period.end)\">{{ period.title }}</a>\n              </div>\n\n            </div>\n            <input v-on=\"inputEvents.start\"\n                   :class=\"isDragging ? 'text-gray-600' : 'text-gray-900'\"\n                   :value=\"inputValue.start\"\n                   type=\"hidden\"\n            />\n            <input v-on=\"inputEvents.end\"\n                   :class=\"isDragging ? 'text-gray-600' : 'text-gray-900'\"\n                   :value=\"inputValue.end\"\n                   type=\"hidden\"\n            />\n          </div>\n        </div>\n      </template>\n    </date-picker>\n  </div>\n</template>\n\n<script>\n\nimport {createNamespacedHelpers} from \"vuex\";\nimport Vue from \"vue\";\nimport DatePicker from \"v-calendar/lib/components/date-picker.umd\";\nconst {mapState, mapGetters, mapActions, mapMutations} = createNamespacedHelpers('dashboard/index')\n\n\nVue.component('date-picker', DatePicker)\n\nexport default {\n  name: \"Calendar\",\n  created() {\n    this.ready = true;\n    this.locale = localStorage.locale ?? 'en-US';\n  },\n  data() {\n    return {\n      locale: 'en-US',\n      ready: false,\n      range: {\n        start: null,\n        end: null,\n      },\n      defaultRange: {\n        start: null,\n        end: null,\n      },\n      periods: []\n    };\n  },\n  methods: {\n    ...mapMutations(\n        [\n          'setEnd',\n          'setStart',\n        ],\n    ),\n    resetDate: function () {\n      //console.log('Reset date to');\n      //console.log(this.defaultStart);\n      //console.log(this.defaultEnd);\n      this.range.start = this.defaultStart;\n      this.range.end = this.defaultEnd;\n      this.setStart(this.defaultStart);\n      this.setEnd(this.defaultEnd);\n    },\n    customDate: function (startStr, endStr) {\n      let start = new Date(startStr);\n      let end = new Date(endStr);\n      this.setStart(start);\n      this.setEnd(end);\n      this.range.start = start;\n      this.range.end = end;\n      this.generatePeriods()\n      return false;\n    },\n    generatePeriods: function () {\n      this.periods = [];\n      // create periods.\n      let today;\n      let end;\n\n      today = new Date(this.range.start);\n\n      // previous month\n      firstDayOfMonth = new Date(today.getFullYear(), today.getMonth()-1, 1);\n      lastDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 0);\n      this.periods.push(\n          {\n            start: firstDayOfMonth.toDateString(),\n            end: lastDayOfMonth.toDateString(),\n            title: new Intl.DateTimeFormat(this.locale, {year: 'numeric', month: 'long'}).format(firstDayOfMonth)\n          }\n      );\n\n      // this month\n      firstDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);\n      lastDayOfMonth = new Date(today.getFullYear(), today.getMonth()+1, 0);\n      this.periods.push(\n          {\n            start: firstDayOfMonth.toDateString(),\n            end: lastDayOfMonth.toDateString(),\n            title: new Intl.DateTimeFormat(this.locale, {year: 'numeric', month: 'long'}).format(firstDayOfMonth)\n          }\n      );\n\n      // next month\n      let firstDayOfMonth = new Date(today.getFullYear(), today.getMonth()+1, 1);\n      let lastDayOfMonth = new Date(today.getFullYear(), today.getMonth()+2, 0);\n      this.periods.push(\n          {\n            start: firstDayOfMonth.toDateString(),\n            end: lastDayOfMonth.toDateString(),\n            title: new Intl.DateTimeFormat(this.locale, {year: 'numeric', month: 'long'}).format(firstDayOfMonth)\n          }\n      );\n\n      // last 7 days\n      today = new Date;\n      end = new Date;\n      end.setDate(end.getDate() - 7);\n      this.periods.push(\n          {\n            start: end.toDateString(),\n            end: today.toDateString(),\n            title: this.$t('firefly.last_seven_days')\n          }\n      );\n\n      // last 30 days:\n      end.setDate(end.getDate() - 23);\n      this.periods.push(\n          {\n            start: end.toDateString(),\n            end: today.toDateString(),\n            title: this.$t('firefly.last_thirty_days')\n          }\n      );\n      // last 30 days\n      // everything\n    }\n  },\n  computed: {\n    ...mapGetters([\n                    'viewRange',\n                    'start',\n                    'end',\n                    'defaultStart',\n                    'defaultEnd'\n                  ]),\n    'datesReady': function () {\n      return null !== this.start && null !== this.end && this.ready;\n    },\n  },\n  watch: {\n    datesReady: function (value) {\n      if (false === value) {\n        return;\n      }\n      this.range.start = new Date(this.start);\n      this.range.end = new Date(this.end);\n      this.generatePeriods();\n\n    },\n    range: function (value) {\n      //console.log('User updated range');\n      this.setStart(value.start);\n      this.setEnd(value.end);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.dropdown-item {\n  color: #212529;\n}\n\n.dropdown-item:hover {\n  color: #212529;\n}\n</style>","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Calendar.vue?vue&type=template&id=12891edc&scoped=true&\"\nimport script from \"./Calendar.vue?vue&type=script&lang=js&\"\nexport * from \"./Calendar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Calendar.vue?vue&type=style&index=0&id=12891edc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12891edc\",\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-9[0].rules[0].use[1]!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-9[0].rules[0].use[2]!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Calendar.vue?vue&type=style&index=0&id=12891edc&scoped=true&lang=css&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"69ef6cc5\", content, true, {});"],"sourceRoot":""}